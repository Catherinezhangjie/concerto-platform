version: 5.0.beta.9.1
collection:
  -
    class_name: ViewTemplate
    id: 4
    name: questionnaire
    description: ''
    accessibility: 0
    archived: '0'
    head: ''
    css: |
      .questionnaire-table {
        display: table;
      }
      
      .questionnaire-header {
        
      }
      
      .questionnaire-row {
        display: table-row;
      }
      
      .questionnaire-cell {
        display: table-cell;
      }
      
      .questionnaire-error {
      }
      
      .questionnaire-timer:empty {
        display: none;
      }
      
    js: |
      testRunner.controllerProvider.register("questionnaire", function($scope) {
        $scope.items = testRunner.R.items;
        $scope.responseOptions = testRunner.R.responseOptions;
        $scope.canGoBack = testRunner.R.canGoBack == 1;
        $scope.responseRequired = testRunner.R.responseRequired == 1;
        $scope.responseRequiredAlert = testRunner.R.responeRequiredAlert;
        $scope.pastResponses = testRunner.R.responses;
        $scope.responses = {};
      
        if($scope.pastResponses) {
          for(var i=0;i<$scope.pastResponses.length;i++) {
            var response = $scope.pastResponses[i];
            $scope.responses["r"+response.item_id] = response.response;
          }
        }
      
        for(var i=0;i<$scope.items.length;i++) {
          var item = $scope.items[i];
          if(typeof $scope.responses["r"+item.id] === 'undefined') {
            $scope.responses["r"+item.id] = null;
          }
        }
      });
      
    html: |
      <form name="form" ng-controller="questionnaire">
        <div class="questionnaire-timer">[[timeLeft]]</div>
        <div class="questionnaire-table">
          <div class="questionnaire-row questionnaire-header">
            <div class="questionnaire-cell"></div>
      
            <div class="questionnaire-cell" ng-repeat="option in responseOptions">[[option.label]]</div>
          </div>
      
          <div class="questionnaire-row" ng-repeat="item in items track by $index">
            <div class="questionnaire-cell">[[item.question]]</div>
      
            <div class="questionnaire-cell" ng-repeat="option in responseOptions"><input id="r[[item.id]]-[[option.value]]" name="r[[item.id]]" ng-model="responses['r' + item.id]" ng-required="responseRequired" ng-value="option.value" type="radio" /></div>
          </div>
        </div>
      
        <div class="questionnaire-error" ng-show="form['r'+item.id].$error.required &amp;&amp; form['r'+item.id].$dirty">[[responseRequiredAlert]]</div>
        <button name="back" ng-show="canGoBack">Previous</button><button name="next" ng-disabled="!form.$valid">Next</button></form>
      
    groups: ''
    starterContent: true
    hash: 93134aaca256c7e20bbc3e16bdf56fe81faabd60
  -
    class_name: ViewTemplate
    id: 3
    name: form
    description: ''
    accessibility: 0
    archived: '0'
    head: ''
    css: ''
    js: |
      testRunner.controllerProvider.register("form", function($scope) {
        $scope.fields = angular.fromJson(testRunner.R.fields);
        $scope.values = angular.fromJson(testRunner.R.initialValues);
        if(typeof $scope.values === 'undefined' || $scope.values === null) $scope.values = {};
      
        $scope.getValidator = function(field, type) {
          for(var i=0; i<field.validation.length; i++) {
            var validation = field.validation[i];
            if(validation.type === type) {
              return validation;
            }
          }
          return null;
        };
      
        function initializeValues() {
          for(var i=0; i<$scope.fields.length; i++) {
            var field = $scope.fields[i];
            
            switch(field.type) {
              case "checkbox": {
                if(typeof $scope.values[field.name] === 'undefined') { $scope.values[field.name] = 0; }
                testRunner.addExtraControl(field.name, function() {
                  return $scope.values[field.name];
                });
                break;
              }
              default: {
                if(typeof $scope.values[field.name] === 'undefined') { $scope.values[field.name] = ""; }
              }
            }
          }
        }
      
        initializeValues();
      });
      
    html: |
      <form name="form" ng-controller="form">
        <div ng-repeat="field in fields track by $index">
          <div class="form-label">[[field.label]]</div>
      
          <div class="form-field" ng-switch="field.type">
            <div ng-switch-when="singleLine">
              <input name="[[field.name]]" ng-max="getValidator(field, 'max').value" ng-maxlength="getValidator(field, 'maxlength').value" ng-min="getValidator(field, 'min').value" ng-minlength="getValidator(field, 'minlength').value" ng-model="values[field.name]" ng-pattern="getValidator(field, 'pattern').value" ng-required="getValidator(field, 'required')" type="text" />
            </div>
            
            <div ng-switch-when="password">
              <input name="[[field.name]]" ng-max="getValidator(field, 'max').value" ng-maxlength="getValidator(field, 'maxlength').value" ng-min="getValidator(field, 'min').value" ng-minlength="getValidator(field, 'minlength').value" ng-model="values[field.name]" ng-pattern="getValidator(field, 'pattern').value" ng-required="getValidator(field, 'required')" type="password" />
            </div>
      
            <div ng-switch-when="multiLine"><textarea name="[[field.name]]" ng-max="getValidator(field, 'max').value" ng-maxlength="getValidator(field, 'maxlength').value" ng-min="getValidator(field, 'min').value" ng-minlength="getValidator(field, 'minlength').value" ng-model="values[field.name]" ng-pattern="getValidator(field, 'pattern').value" ng-required="getValidator(field, 'required')"></textarea></div>
      
            <div ng-switch-when="checkbox"><input name="[[field.name]]" ng-false-value="'0'" ng-model="values[field.name]" ng-required="getValidator(field, 'required')" ng-true-value="'1'" type="checkbox" /></div>
          </div>
      
          <div class="form-error" ng-repeat="error in field.validation" ng-show="form[field.name].$error[error.type] &amp;&amp; form[field.name].$dirty">[[error.alert]]</div>
        </div>
        <button name="submit" ng-disabled="!form.$valid">submit</button></form>
      
    groups: ''
    starterContent: true
    hash: 72d5711cb06078817a6427674de6442b7cd826ab
  -
    class_name: ViewTemplate
    id: 2
    name: linearTest
    description: ''
    accessibility: 0
    archived: '0'
    head: ''
    css: |
      .linearTest-response {
        display: table;
      }
      
      .linearTest-response-radio-cell {
        display: table-cell;
      }
      
      .linearTest-response-label-cell {
        display: table-cell;
      }
      
      .linearTest-error {
      }
      
      .linearTest-timer:empty {
        display: none;
      }
      
    js: |
      testRunner.controllerProvider.register("linearTest", function($scope) {
        $scope.item = testRunner.R.item;
        $scope.canGoBack = testRunner.R.canGoBack == 1;
        $scope.responseRequired = testRunner.R.responseRequired == 1;
        $scope.responseRequiredAlert = testRunner.R.responeRequiredAlert;
        
        $scope.response = {
          value: testRunner.R.response ? testRunner.R.response.response : null
        }
      });
      
    html: |
      <form name="form" ng-controller="linearTest">
        <div class="linearTest-timer">[[timeLeft]]</div>
      <div class="linearTest-question" ng-bind-html="item.question"></div>
      
      <div class="linearTest-response-group" ng-if="item.responseOptions.type == 'options'">
      <div class="linearTest-response" ng-repeat="option in item.responseOptions.options track by $index">
      <div class="linearTest-response-radio-cell"><input id="input-response-[[$index+1]]" name="response" ng-model="response.value" ng-required="responseRequired" type="radio" value="[[option.value]]" /></div>
      
      <div class="linearTest-response-label-cell"><label for="input-response-[[$index+1]]" ng-bind-html="option.label">&nbsp;</label></div>
      </div>
      
      <div ng-if="item.responseOptions.type == 'open'"><input name="response" ng-model="response.value" ng-required="responseRequired" type="text" /></div>
      
      <div class="linearTest-error" ng-show="form.response.$error.required &amp;&amp; form.response.$dirty">[[responseRequiredAlert]]</div>
      </div>
      <button name="back" ng-show="canGoBack">Previous</button><button name="next" ng-disabled="!form.$valid">Next</button></form>
      
    groups: ''
    starterContent: true
    hash: 1a54fa6316ef81c403e3176d2cc031d6d067aa00
  -
    class_name: ViewTemplate
    id: 1
    name: CAT
    description: ''
    accessibility: 0
    archived: '0'
    head: ''
    css: |
      .CAT-response {
        display: table;
      }
      
      .CAT-response-radio-cell {
        display: table-cell;
      }
      
      .CAT-response-label-cell {
        display: table-cell;
      }
      
      .CAT-timer:empty {
        display: none;
      }
      
    js: |
      testRunner.controllerProvider.register("CAT", function($scope) {
        $scope.item = testRunner.R.item;
        $scope.responseRequired = testRunner.R.responseRequired == 1;
        $scope.responseRequiredAlert = testRunner.R.responseRequiredAlert;
        
        $scope.response = {
          value: null
        };
      });
      
    html: |
      <form name="form" ng-controller="CAT">
        <div class="CAT-timer">[[timeLeft]]</div>
        <div class="CAT-question" ng-bind-html="item.question"></div>
      
        <div class="CAT-response-group" ng-if="item.responseOptions.type == 'options'">
          <div class="CAT-response" ng-repeat="option in item.responseOptions.options track by $index">
            <div class="CAT-response-radio-cell"><input id="input_response_[[$index+1]]" name="response" ng-model="response.value" ng-required="responseRequired" type="radio" value="[[option.value]]" /></div>
      
            <div class="CAT-response-label-cell"><label for="input_response_[[$index+1]]" ng-bind-html="option.label">&nbsp;</label></div>
          </div>
      
          <div ng-if="item.responseOptions.type == 'open'"><input name="response" ng-model="response" ng-required="responseRequired" type="text" /></div>
      
          <div class="CAT-error" ng-show="form.response.$error.required &amp;&amp; form.response.$dirty">[[responseRequiredAlert]]</div>
        </div>
        <button name="submit" ng-disabled="!form.$valid">submit</button></form>
      
    groups: ''
    starterContent: true
    hash: 2a2c9e0910505f37464ffe629e7627b88820e5e7
  -
    class_name: DataTable
    id: 9
    name: translationDictionary
    description: ''
    accessibility: 0
    archived: '0'
    columns:
      -
        name: id
        type: bigint
        nullable: false
      -
        name: entryKey
        type: string
        nullable: false
      -
        name: en
        type: text
        nullable: false
      -
        name: de
        type: text
        nullable: false
      -
        name: es
        type: text
        nullable: false
      -
        name: fr
        type: text
        nullable: false
      -
        name: zh
        type: text
        nullable: false
    groups: ''
    starterContent: true
    hash: d39f707938a292225bc07af776c9bbee2b4bb5d7
  -
    class_name: DataTable
    id: 8
    name: questionnaireResponses
    description: ''
    accessibility: 2
    archived: '0'
    columns:
      -
        name: id
        type: bigint
        nullable: false
      -
        name: item_id
        type: bigint
        nullable: false
      -
        name: response
        type: string
        nullable: false
      -
        name: timeTaken
        type: float
        nullable: false
      -
        name: session_id
        type: string
        nullable: false
      -
        name: score
        type: float
        nullable: false
      -
        name: trait
        type: string
        nullable: false
    groups: ''
    starterContent: true
    hash: e7f2e55b0a0102ab25c3002c97643cf6d668a379
  -
    class_name: DataTable
    id: 7
    name: questionnaireItems
    description: ''
    accessibility: 0
    archived: '0'
    columns:
      -
        name: id
        type: bigint
        nullable: false
      -
        name: question
        type: text
        nullable: false
      -
        name: orderIndex
        type: integer
        nullable: false
      -
        name: trait
        type: string
        nullable: false
      -
        name: reversedScore
        type: boolean
        nullable: false
    groups: ''
    starterContent: true
    hash: 9b0f51a732e979905e7250bf573ffeeb9351b541
  -
    class_name: DataTable
    id: 6
    name: linearTestResponses
    description: ''
    accessibility: 2
    archived: '0'
    columns:
      -
        name: id
        type: bigint
        nullable: false
      -
        name: item_id
        type: bigint
        nullable: false
      -
        name: response
        type: string
        nullable: false
      -
        name: timeTaken
        type: float
        nullable: false
      -
        name: session_id
        type: string
        nullable: false
      -
        name: score
        type: float
        nullable: false
      -
        name: trait
        type: string
        nullable: false
    groups: ''
    starterContent: true
    hash: 6a88eea42660caedf519c69a254dac3be29df919
  -
    class_name: DataTable
    id: 5
    name: linearTestItems
    description: ''
    accessibility: 0
    archived: '0'
    columns:
      -
        name: id
        type: bigint
        nullable: false
      -
        name: question
        type: text
        nullable: false
      -
        name: responseOptions
        type: text
        nullable: false
      -
        name: orderIndex
        type: integer
        nullable: false
      -
        name: trait
        type: string
        nullable: false
    groups: ''
    starterContent: true
    hash: c7a0430965944cc149b18229407c1606461b7877
  -
    class_name: DataTable
    id: 4
    name: CATItems
    description: ''
    accessibility: 0
    archived: '0'
    columns:
      -
        name: id
        type: bigint
        nullable: false
      -
        name: question
        type: text
        nullable: false
      -
        name: responseOptions
        type: text
        nullable: false
      -
        name: a
        type: float
        nullable: false
      -
        name: b
        type: float
        nullable: false
      -
        name: c
        type: float
        nullable: false
      -
        name: d
        type: float
        nullable: false
      -
        name: correct
        type: string
        nullable: false
      -
        name: cbGroup
        type: text
        nullable: false
      -
        name: fixedIndex
        type: integer
        nullable: false
    groups: ''
    starterContent: true
    hash: e69c6126edfcd762345ac2304d19d6b3e4b7241c
  -
    class_name: DataTable
    id: 3
    name: CATResponses
    description: ''
    accessibility: 2
    archived: '0'
    columns:
      -
        name: id
        type: bigint
        nullable: false
      -
        name: item_id
        type: bigint
        nullable: false
      -
        name: response
        type: string
        nullable: false
      -
        name: timeTaken
        type: float
        nullable: false
      -
        name: session_id
        type: string
        nullable: false
      -
        name: correct
        type: boolean
        nullable: false
      -
        name: theta
        type: float
        nullable: false
      -
        name: sem
        type: float
        nullable: false
    groups: ''
    starterContent: true
    hash: 19091d0035ceb9d977976912c93e30382952936b
  -
    class_name: DataTable
    id: 2
    name: sessions
    description: ''
    accessibility: 0
    archived: '0'
    columns:
      -
        name: id
        type: bigint
        nullable: false
      -
        name: internal_id
        type: bigint
        nullable: false
      -
        name: test_id
        type: bigint
        nullable: false
      -
        name: user_id
        type: bigint
        nullable: false
      -
        name: startedTime
        type: datetime
        nullable: false
      -
        name: updateTime
        type: datetime
        nullable: false
      -
        name: finished
        type: boolean
        nullable: false
    groups: ''
    starterContent: true
    hash: aacff426b7217ab867ec99eb633711619d5b935f
  -
    class_name: DataTable
    id: 1
    name: users
    description: ''
    accessibility: 2
    archived: '0'
    columns:
      -
        name: id
        type: bigint
        nullable: false
      -
        name: login
        type: string
        nullable: false
      -
        name: password
        type: string
        nullable: false
      -
        name: enabled
        type: boolean
        nullable: false
    groups: ''
    starterContent: true
    hash: e2ba936fe247f4aed6496c984f4479b276c0936c
  -
    class_name: Test
    id: 1
    name: _showPage
    accessibility: 0
    archived: '0'
    visibility: 2
    type: 0
    code: |
      getTemplateParams = function(templateParams) {
        if(!is.list(templateParams)) {
          templateParams = list()
        }
        for(.name in .dynamicInputs) {
          templateParams[[.name]] = get(.name)
        }
        return(templateParams)
      }
      
      response = concerto5:::concerto.template.show(
        template=template, 
        html=if(!is.null(html) && !is.na(html) && html != "") {html} else {""},
        params=getTemplateParams(templateParams), 
        timeLimit=if(!is.na(timeLimit)) { as.numeric(timeLimit) } else { 0 }
      )
      
      for(.name in .dynamicReturns) {
        assign(.name, response[[.name]])
      }
      if(".branch" %in% .dynamicReturns) {
        .branch = response$buttonPressed
        if(!(.branch %in% .dynamicBranches)) { .branch = "out" }
      }
      
    description: ''
    variables:
      -
        class_name: TestVariable
        id: 1
        name: out
        type: 2
        description: ''
        passableThroughUrl: '0'
        value: '0'
        test: 1
        parentVariable: null
      -
        class_name: TestVariable
        id: 2
        name: template
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 1
        parentVariable: null
      -
        class_name: TestVariable
        id: 3
        name: response
        type: 1
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 1
        parentVariable: null
      -
        class_name: TestVariable
        id: 4
        name: timeLimit
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: '0'
        test: 1
        parentVariable: null
      -
        class_name: TestVariable
        id: 5
        name: templateParams
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 1
        parentVariable: null
      -
        class_name: TestVariable
        id: 6
        name: html
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 1
        parentVariable: null
    sourceWizard: null
    sourceWizardTest: null
    nodes: {  }
    nodesConnections: {  }
    tags: ''
    groups: ''
    starterContent: true
    hash: 62ab1f92cfde75cf2e72dc8cbb6d7b264f26dd39
  -
    class_name: TestWizard
    id: 1
    name: showPage
    description: ''
    accessibility: 0
    archived: '0'
    steps:
      -
        class_name: TestWizardStep
        id: 1
        title: Template
        description: ''
        orderNum: 0
        colsNum: 0
        wizard: 1
        params:
          -
            class_name: TestWizardParam
            id: 1
            label: 'View Template'
            description: 'View template to show'
            hideCondition: ''
            type: 5
            passableThroughUrl: '0'
            value: ''
            testVariable: 2
            name: template
            wizardStep: 1
            stepTitle: Template
            order: 0
            wizard: 1
            definition:
              placeholder: 0
              defvalue: ''
          -
            class_name: TestWizardParam
            id: 2
            label: 'Time limit'
            description: 'Time limit in seconds. <strong>0</strong> for no limit.'
            hideCondition: ''
            type: 0
            passableThroughUrl: '0'
            value: '0'
            testVariable: 4
            name: timeLimit
            wizardStep: 1
            stepTitle: Template
            order: 2
            wizard: 1
            definition:
              placeholder: 0
              defvalue: '0'
          -
            class_name: TestWizardParam
            id: 3
            label: HTML
            description: 'HTML template to show. Will be ignored when view template is selected.'
            hideCondition: ''
            type: 2
            passableThroughUrl: '0'
            value: ''
            testVariable: 6
            name: html
            wizardStep: 1
            stepTitle: Template
            order: 1
            wizard: 1
            definition:
              placeholder: 0
              defvalue: ''
    test: 1
    groups: ''
    starterContent: true
    hash: bb72121d1cc3412f10f18479a6561804dbe918bc
  -
    class_name: Test
    id: 2
    name: showPage
    accessibility: 0
    archived: '0'
    visibility: 2
    type: 1
    code: null
    description: 'Shows page to user.'
    variables:
      -
        class_name: TestVariable
        id: 7
        name: out
        type: 2
        description: ''
        passableThroughUrl: '0'
        value: '0'
        test: 2
        parentVariable: 1
      -
        class_name: TestVariable
        id: 8
        name: template
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 2
        parentVariable: 2
      -
        class_name: TestVariable
        id: 9
        name: response
        type: 1
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 2
        parentVariable: 3
      -
        class_name: TestVariable
        id: 10
        name: timeLimit
        type: 0
        description: 'Time limit in seconds.'
        passableThroughUrl: '0'
        value: '0'
        test: 2
        parentVariable: 4
      -
        class_name: TestVariable
        id: 11
        name: templateParams
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 2
        parentVariable: 5
      -
        class_name: TestVariable
        id: 12
        name: html
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 2
        parentVariable: 6
    sourceWizard: 1
    sourceWizardTest: 1
    nodes: {  }
    nodesConnections: {  }
    tags: _concerto_core
    groups: ''
    starterContent: true
    hash: b41e718afdd291e244cfb146626c7141a504e826
  -
    class_name: Test
    id: 3
    name: _setInternalTemplates
    accessibility: 0
    archived: '0'
    visibility: 2
    type: 0
    code: |
      if(!is.list(params)) {
        params = list()
      }
      for(.name in .dynamicInputs) {
        params[[.name]] = get(.name)
      }
      
      if(!is.na(loaderTemplate)) {
        concerto.template.loader(loaderTemplate, params=params)
      }
      
    description: ''
    variables:
      -
        class_name: TestVariable
        id: 13
        name: out
        type: 2
        description: ''
        passableThroughUrl: '0'
        value: '0'
        test: 3
        parentVariable: null
      -
        class_name: TestVariable
        id: 14
        name: loaderTemplate
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 3
        parentVariable: null
      -
        class_name: TestVariable
        id: 15
        name: params
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 3
        parentVariable: null
    sourceWizard: null
    sourceWizardTest: null
    nodes: {  }
    nodesConnections: {  }
    tags: ''
    groups: ''
    starterContent: true
    hash: f1758ad2520a47c8338eb829ae960d0747af11e6
  -
    class_name: TestWizard
    id: 2
    name: setInternalTemplates
    description: ''
    accessibility: 0
    archived: '0'
    steps:
      -
        class_name: TestWizardStep
        id: 2
        title: 'Internal Templates'
        description: ''
        orderNum: 0
        colsNum: 0
        wizard: 2
        params:
          -
            class_name: TestWizardParam
            id: 4
            label: 'Loader template'
            description: 'Loading page. It is shown on page submit, until new page is ready to be shown.'
            hideCondition: ''
            type: 5
            passableThroughUrl: '0'
            value: ''
            testVariable: 14
            name: loaderTemplate
            wizardStep: 2
            stepTitle: 'Internal Templates'
            order: 0
            wizard: 2
            definition:
              placeholder: 0
              defvalue: ''
    test: 3
    groups: ''
    starterContent: true
    hash: e4ae0189fa6b48fcc95e5c8aa7da79a622cb4457
  -
    class_name: Test
    id: 4
    name: setInternalTemplates
    accessibility: 0
    archived: '0'
    visibility: 2
    type: 1
    code: null
    description: 'Sets templates to use for internal Concerto Platform pages. E.g. loading template.'
    variables:
      -
        class_name: TestVariable
        id: 16
        name: out
        type: 2
        description: ''
        passableThroughUrl: '0'
        value: '0'
        test: 4
        parentVariable: 13
      -
        class_name: TestVariable
        id: 17
        name: loaderTemplate
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 4
        parentVariable: 14
      -
        class_name: TestVariable
        id: 18
        name: params
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 4
        parentVariable: 15
    sourceWizard: 2
    sourceWizardTest: 3
    nodes: {  }
    nodesConnections: {  }
    tags: _concerto_core
    groups: ''
    starterContent: true
    hash: 8f8bff222ba88af5c3a2dab8749d18d6cfc748e1
  -
    class_name: Test
    id: 5
    name: _authorizeUser
    accessibility: 0
    archived: '0'
    visibility: 2
    type: 0
    code: |
      library(digest)
      
      resultCode = 0
      getUserByLogin = function(login) {
        if(userBankType == "direct") {
          userList = fromJSON(userBankList)
          if(length(userList) == 0) {
            resultCode <<- 1
            return(NULL)
          }
      
          for(i in 1:length(userList)) {
            user = userList[[i]]
            if(user$login == login && user$enabled == 1) {
              return(user)
            }
          }
          resultCode <<- 1
          return(NULL)
        } else {
          tableMap = fromJSON(userBankTable)
          sql = "
      SELECT * 
      FROM {{table}} 
      WHERE 
      {{loginColumn}}='{{login}}'
      AND {{enabledColumn}}=1
      "
          user = concerto.table.query(sql, params=list(
            table=tableMap$table,
            loginColumn=tableMap$columns$login,
            enabledColumn=tableMap$columns$enabled,
            login=login
          ))
          if(dim(user)[1] == 0) {
            resultCode <<- 1
            return(NULL)
          }
          return(user[1,])
        }
      }
      
      checkPassword = function(rawPassword, encryptedPassword, encryption) {
        if(is.na(encryptedPassword) || encryptedPassword == "") { return(T) }
        if(is.na(rawPassword)) { return(F) }
        if(encryption=="plain") {
          return(rawPassword == encryptedPassword)
        }
        return(digest(rawPassword, encryption, serialize=F) == encryptedPassword)
      }
      
      authorizeUser = function(login, password) {
        user = getUserByLogin(login)
        concerto.log(login, "login checked")
        concerto.log(password, "password checked")
        concerto.log(user, "user checked for password")
        
        if(!is.null(user) && checkPassword(password, user$password, userBankEncryption)) {
          return(user)
        }
        resultCode <<- 1
        return(NULL)
      }
      
      user = authorizeUser(login, password)
      if(is.null(user)) {
        concerto.log(paste0("user ",login," unauthorized"), title="authorization result")
        .branch = "unauthorized"
      } else {
        concerto.log(paste0("user ",login," authorized"), title="authorization result")
        .branch = "authorized"
      }
      
    description: ''
    variables:
      -
        class_name: TestVariable
        id: 19
        name: authorized
        type: 2
        description: ''
        passableThroughUrl: '0'
        value: '0'
        test: 5
        parentVariable: null
      -
        class_name: TestVariable
        id: 20
        name: login
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 5
        parentVariable: null
      -
        class_name: TestVariable
        id: 21
        name: password
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 5
        parentVariable: null
      -
        class_name: TestVariable
        id: 22
        name: unauthorized
        type: 2
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 5
        parentVariable: null
      -
        class_name: TestVariable
        id: 23
        name: user
        type: 1
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 5
        parentVariable: null
      -
        class_name: TestVariable
        id: 24
        name: .branch
        type: 1
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 5
        parentVariable: null
      -
        class_name: TestVariable
        id: 25
        name: userBankType
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 5
        parentVariable: null
      -
        class_name: TestVariable
        id: 26
        name: userBankList
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 5
        parentVariable: null
      -
        class_name: TestVariable
        id: 27
        name: userBankTable
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 5
        parentVariable: null
      -
        class_name: TestVariable
        id: 28
        name: userBankEncryption
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 5
        parentVariable: null
      -
        class_name: TestVariable
        id: 29
        name: resultCode
        type: 1
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 5
        parentVariable: null
    sourceWizard: null
    sourceWizardTest: null
    nodes: {  }
    nodesConnections: {  }
    tags: ''
    groups: ''
    starterContent: true
    hash: 201ff021e772efc44c2e5727e8d421104c168794
  -
    class_name: TestWizard
    id: 3
    name: authorizeUser
    description: ''
    accessibility: 0
    archived: '0'
    steps:
      -
        class_name: TestWizardStep
        id: 3
        title: 'User Bank'
        description: 'User bank settings'
        orderNum: 0
        colsNum: 0
        wizard: 3
        params:
          -
            class_name: TestWizardParam
            id: 5
            label: Type
            description: |
              Type of user bank. Possible options:
              <ul>
              	<li><b>Direct</b>&nbsp;- user bank is declared at node level</li>
              	<li><strong>Table</strong> - user bank is taken from data table</li>
              </ul>
              
            hideCondition: ''
            type: 3
            passableThroughUrl: '0'
            value: direct
            testVariable: 25
            name: userBankType
            wizardStep: 3
            stepTitle: 'User Bank'
            order: 0
            wizard: 3
            definition:
              placeholder: 0
              options:
                -
                  value: direct
                  label: Direct
                -
                  value: table
                  label: Table
              defvalue: direct
          -
            class_name: TestWizardParam
            id: 6
            label: 'User list'
            description: 'Direct user list to use for authorization'
            hideCondition: 'values.userBankType != "direct"'
            type: 10
            passableThroughUrl: '0'
            value: '[]'
            testVariable: 26
            name: userBankList
            wizardStep: 3
            stepTitle: 'User Bank'
            order: 1
            wizard: 3
            definition:
              element:
                type: 9
                definition:
                  placeholder: 0
                  fields:
                    -
                      type: 0
                      name: id
                      label: Id
                      definition:
                        placeholder: 0
                    -
                      type: 0
                      name: login
                      label: Login
                      definition:
                        placeholder: 0
                    -
                      type: 0
                      name: password
                      label: Password
                      definition:
                        placeholder: 0
                    -
                      type: 4
                      name: enabled
                      label: Enabled
                      definition:
                        placeholder: 0
                        defvalue: '1'
          -
            class_name: TestWizardParam
            id: 7
            label: 'Password encryption'
            description: |
              <p>Hashing used for user&#39;s passwords. One of the following:</p>
              
              <ul>
              	<li><strong>md5</strong></li>
              	<li><strong>sha1</strong></li>
              	<li><strong>crc32</strong></li>
              	<li><strong>sha256</strong></li>
              	<li><strong>sha512</strong></li>
              	<li><strong>xxhash32</strong></li>
              	<li><strong>xxhash64</strong></li>
              	<li><strong>murmur32</strong></li>
              	<li><strong>plain</strong></li>
              </ul>
              
            hideCondition: ''
            type: 3
            passableThroughUrl: '0'
            value: plain
            testVariable: 28
            name: userBankEncryption
            wizardStep: 3
            stepTitle: 'User Bank'
            order: 0
            wizard: 3
            definition:
              placeholder: 0
              options:
                -
                  value: md5
                  label: md5
                  order: 1
                -
                  value: sha1
                  label: sha1
                  order: 2
                -
                  value: crc32
                  label: crc32
                  order: 3
                -
                  value: sha256
                  label: sha256
                  order: 4
                -
                  value: sha512
                  label: sha512
                  order: 5
                -
                  value: xxhash32
                  label: xxhash32
                  order: 6
                -
                  value: xxhash64
                  label: xxhash64
                  order: 7
                -
                  value: murmur32
                  label: murmur32
                  order: 8
                -
                  value: plain
                  label: plain
                  order: 0
              defvalue: plain
          -
            class_name: TestWizardParam
            id: 8
            label: 'User table'
            description: 'Column mapping for data table used as a user bank'
            hideCondition: 'values.userBankType != "table"'
            type: 12
            passableThroughUrl: '0'
            value: '[]'
            testVariable: 27
            name: userBankTable
            wizardStep: 3
            stepTitle: 'User Bank'
            order: 1
            wizard: 3
            definition:
              placeholder: 0
              cols:
                -
                  name: id
                  label: Id
                  tooltip: ''
                -
                  name: login
                  label: Login
                  tooltip: ''
                -
                  name: password
                  label: Password
                  tooltip: ''
                -
                  name: enabled
                  label: Enabled
                  tooltip: ''
    test: 5
    groups: ''
    starterContent: true
    hash: a29b275087ce300fa5959af413b8a2b5bb059da6
  -
    class_name: Test
    id: 6
    name: authorizeUser
    accessibility: 0
    archived: '0'
    visibility: 2
    type: 1
    code: null
    description: 'User authorization.'
    variables:
      -
        class_name: TestVariable
        id: 30
        name: authorized
        type: 2
        description: ''
        passableThroughUrl: '0'
        value: '0'
        test: 6
        parentVariable: 19
      -
        class_name: TestVariable
        id: 31
        name: login
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 6
        parentVariable: 20
      -
        class_name: TestVariable
        id: 32
        name: password
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 6
        parentVariable: 21
      -
        class_name: TestVariable
        id: 33
        name: unauthorized
        type: 2
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 6
        parentVariable: 22
      -
        class_name: TestVariable
        id: 34
        name: user
        type: 1
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 6
        parentVariable: 23
      -
        class_name: TestVariable
        id: 35
        name: .branch
        type: 1
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 6
        parentVariable: 24
      -
        class_name: TestVariable
        id: 36
        name: userBankType
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: direct
        test: 6
        parentVariable: 25
      -
        class_name: TestVariable
        id: 37
        name: userBankList
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: '[]'
        test: 6
        parentVariable: 26
      -
        class_name: TestVariable
        id: 38
        name: userBankTable
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: '{"table":"users","columns":{"id":"id","login":"login","password":"password","enabled":"enabled"}}'
        test: 6
        parentVariable: 27
      -
        class_name: TestVariable
        id: 39
        name: userBankEncryption
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: plain
        test: 6
        parentVariable: 28
      -
        class_name: TestVariable
        id: 40
        name: resultCode
        type: 1
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 6
        parentVariable: 29
    sourceWizard: 3
    sourceWizardTest: 5
    nodes: {  }
    nodesConnections: {  }
    tags: _concerto_core
    groups: ''
    starterContent: true
    hash: d78101625d98b43269e265a4a3eff7e8456bf509
  -
    class_name: Test
    id: 7
    name: _createUser
    accessibility: 0
    archived: '0'
    visibility: 2
    type: 0
    code: |
      library(digest)
      
      formatFields = function(login, password, userBankEncryption, enabled, extraFields) {
        fields = list(
          login=login,
          password=password,
          enabled=enabled
        )
        if(userBankEncryption != "plain") {
          fields$password = digest(password, userBankEncryption, serialize=F)
        }
        if(is.list(extraFields)) {
          for(name in ls(extraFields)) {
            fields[[name]] = extraFields[[name]]
          }
        }
        return(fields)
      }
      
      checkLoginExist = function(login, tableMap) {
        sql = "
      SELECT * FROM {{table}} 
      WHERE {{loginColumn}}='{{login}}'
      "
        user = concerto.table.query(sql, params=list(
          table=tableMap$table,
          loginColumn=tableMap$columns$login,
          login=login
        ))
      
        return(dim(user)[1]>0)
      }
      
      getMappedColumns = function(fieldNames, tableMap) {
        cols = c()
        for(i in 1:length(fieldNames)) {
          col = tableMap$columns[[fieldNames[i]]]
          if(!is.null(col)) {
            cols=c(cols,col)
            next
          }
          cols=c(cols,fieldNames[i])
        }
        return(cols)
      }
      
      insertUser = function(fields, tableMap) {
        sql = paste0(
          "INSERT INTO {{table}} (",
          paste(getMappedColumns(ls(fields), tableMap), collapse=","),
          ") VALUES (",
          paste0("'{{",ls(fields),"}}'", collapse=","),
          ")"
        )
        concerto.table.query(sql, params=append(fields, list(
          table=tableMap$table
        )))
        userId = concerto.table.lastInsertId()
        concerto.log(userId, title="new user id")
      
        sql="SELECT * FROM {{table}} WHERE {{idColumn}}={{id}}"
        user=concerto.table.query(sql,params=list(
          table=tableMap$table,
          idColumn=tableMap$columns$id,
          id=userId
        ))
        concerto.log(user, title="inserted user")
        return(user)
      }
      
      user=NULL
      if(is.na(password)) { password = "" }
      tableMap = fromJSON(userBankTable)
      fields = formatFields(login, password, userBankEncryption, enabled, extraFields)
      if(checkLoginExist(login, tableMap)) {
        concerto.log(login, title="login already exist")
        .branch = "loginAlreadyExist"
      } else {
        concerto.log(login, title="login doesn't exist and can be created")
        user=insertUser(fields, tableMap)
        .branch = "created"
      }
      
    description: ''
    variables:
      -
        class_name: TestVariable
        id: 41
        name: created
        type: 2
        description: ''
        passableThroughUrl: '0'
        value: '0'
        test: 7
        parentVariable: null
      -
        class_name: TestVariable
        id: 42
        name: userBankTable
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 7
        parentVariable: null
      -
        class_name: TestVariable
        id: 43
        name: login
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 7
        parentVariable: null
      -
        class_name: TestVariable
        id: 44
        name: password
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 7
        parentVariable: null
      -
        class_name: TestVariable
        id: 45
        name: enabled
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: '1'
        test: 7
        parentVariable: null
      -
        class_name: TestVariable
        id: 46
        name: loginAlreadyExist
        type: 2
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 7
        parentVariable: null
      -
        class_name: TestVariable
        id: 47
        name: .branch
        type: 1
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 7
        parentVariable: null
      -
        class_name: TestVariable
        id: 48
        name: user
        type: 1
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 7
        parentVariable: null
      -
        class_name: TestVariable
        id: 49
        name: userBankEncryption
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 7
        parentVariable: null
      -
        class_name: TestVariable
        id: 50
        name: extraFields
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 7
        parentVariable: null
    sourceWizard: null
    sourceWizardTest: null
    nodes: {  }
    nodesConnections: {  }
    tags: ''
    groups: ''
    starterContent: true
    hash: 8b279a05cfefd0c5ba293c20c5dc5ead154fcb9c
  -
    class_name: TestWizard
    id: 4
    name: createUser
    description: ''
    accessibility: 0
    archived: '0'
    steps:
      -
        class_name: TestWizardStep
        id: 4
        title: 'User Bank'
        description: ''
        orderNum: 0
        colsNum: 0
        wizard: 4
        params:
          -
            class_name: TestWizardParam
            id: 9
            label: 'User table'
            description: 'User bank column mapping'
            hideCondition: ''
            type: 12
            passableThroughUrl: '0'
            value: '[]'
            testVariable: 42
            name: userBankTable
            wizardStep: 4
            stepTitle: 'User Bank'
            order: 1
            wizard: 4
            definition:
              placeholder: 0
              cols:
                -
                  name: id
                  label: Id
                  tooltip: ''
                -
                  name: login
                  label: Login
                  tooltip: ''
                -
                  name: password
                  label: Password
                  tooltip: ''
                -
                  name: enabled
                  label: Enabled
                  tooltip: ''
          -
            class_name: TestWizardParam
            id: 10
            label: 'Password encryption'
            description: |
              <p>Hashing used for user&#39;s passwords. One of the following:</p>
              
              <ul>
              	<li><strong>md5</strong></li>
              	<li><strong>sha1</strong></li>
              	<li><strong>crc32</strong></li>
              	<li><strong>sha256</strong></li>
              	<li><strong>sha512</strong></li>
              	<li><strong>xxhash32</strong></li>
              	<li><strong>xxhash64</strong></li>
              	<li><strong>murmur32</strong></li>
              	<li><strong>plain</strong></li>
              </ul>
              
            hideCondition: ''
            type: 3
            passableThroughUrl: '0'
            value: plain
            testVariable: 49
            name: userBankEncryption
            wizardStep: 4
            stepTitle: 'User Bank'
            order: 0
            wizard: 4
            definition:
              placeholder: 0
              options:
                -
                  value: md5
                  label: md5
                  order: 1
                -
                  value: sha1
                  label: sha1
                  order: 2
                -
                  value: crc32
                  label: crc32
                  order: 3
                -
                  value: sha256
                  label: sha256
                  order: 4
                -
                  value: sha512
                  label: sha512
                  order: 5
                -
                  value: xxhash32
                  label: xxhash32
                  order: 6
                -
                  value: xxhash64
                  label: xxhash64
                  order: 7
                -
                  value: murmur32
                  label: murmur32
                  order: 8
                -
                  value: plain
                  label: plain
                  order: 0
              defvalue: plain
    test: 7
    groups: ''
    starterContent: true
    hash: 1b71cb713730a03c085fe9a135019861680d1ea2
  -
    class_name: Test
    id: 8
    name: createUser
    accessibility: 0
    archived: '0'
    visibility: 2
    type: 1
    code: null
    description: 'User creation.'
    variables:
      -
        class_name: TestVariable
        id: 51
        name: created
        type: 2
        description: ''
        passableThroughUrl: '0'
        value: '0'
        test: 8
        parentVariable: 41
      -
        class_name: TestVariable
        id: 52
        name: userBankTable
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: '{"table":"users","columns":{"id":"id","login":"login","password":"password","enabled":"enabled"}}'
        test: 8
        parentVariable: 42
      -
        class_name: TestVariable
        id: 53
        name: login
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 8
        parentVariable: 43
      -
        class_name: TestVariable
        id: 54
        name: password
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 8
        parentVariable: 44
      -
        class_name: TestVariable
        id: 55
        name: enabled
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: '1'
        test: 8
        parentVariable: 45
      -
        class_name: TestVariable
        id: 56
        name: loginAlreadyExist
        type: 2
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 8
        parentVariable: 46
      -
        class_name: TestVariable
        id: 57
        name: .branch
        type: 1
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 8
        parentVariable: 47
      -
        class_name: TestVariable
        id: 58
        name: user
        type: 1
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 8
        parentVariable: 48
      -
        class_name: TestVariable
        id: 59
        name: userBankEncryption
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: plain
        test: 8
        parentVariable: 49
      -
        class_name: TestVariable
        id: 60
        name: extraFields
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 8
        parentVariable: 50
    sourceWizard: 4
    sourceWizardTest: 7
    nodes: {  }
    nodesConnections: {  }
    tags: _concerto_core
    groups: ''
    starterContent: true
    hash: 4e0160c1bc6feb3dfd8195f91df1961af1db2bf9
  -
    class_name: Test
    id: 9
    name: _startSession
    accessibility: 0
    archived: '0'
    visibility: 2
    type: 0
    code: |
      concerto.log(user, "user")
      
      formatFields = function(user, extraFields) {
        userId = 0
        if(!is.null(user) && !is.na(user)) { userId=user$id }
        fields = list(
          user_id=userId,
          internal_id=concerto$session$id, 
          test_id=concerto$mainTest$id,
          startedTime=Sys.time(),
          updateTime=Sys.time(),
          finished=0
        )
        if(is.list(extraFields)) {
          for(name in ls(extraFields)) {
            fields[[name]] = extraFields[[name]]
          }
        }
        return(fields)
      }
      
      getMappedColumns = function(fieldNames, tableMap) {
        cols = c()
        for(i in 1:length(fieldNames)) {
          col = tableMap$columns[[fieldNames[i]]]
          if(!is.null(col)) {
            cols=c(cols,col)
            next
          }
          cols=c(cols,fieldNames[i])
        }
        return(cols)
      }
      
      insertSession = function(fields, tableMap) {
        sqlColumns = paste(getMappedColumns(ls(fields), tableMap), collapse=",")
        sqlValues = paste0("'{{",ls(fields),"}}'", collapse=",")
        sql = paste0("INSERT INTO {{table}} (",sqlColumns,") VALUES (",sqlValues,")")
        concerto.table.query(sql, params=append(fields, list(
          table=tableMap$table
        )))
        id = concerto.table.lastInsertId()
      
        sql = "SELECT * FROM {{table}} WHERE {{idColumn}}={{id}}"
        session = concerto.table.query(sql, params=list(
          table=tableMap$table,
          idColumn=tableMap$columns$id,
          id=id
        ))
        if(dim(session)[1] > 0) {
          return(session[1,])
        }
        return(NULL)
      }
      
      resumeSession = function(user, tableMap) {
        if(is.null(user)) { return(NULL) }
      
        session = concerto.table.query("
      SELECT * FROM {{table}} 
      WHERE 
      {{testIdColumn}} = {{testId}} AND 
      {{userIdColumn}} = '{{userId}}' AND 
      {{finishedColumn}} = 0 
      ORDER BY id DESC", params=list(
          table=tableMap$table, 
          testIdColumn=tableMap$columns$test_id, 
          testId=concerto$mainTest$id, 
          userIdColumn=tableMap$columns$user_id, 
          userId=user$id,
          finishedColumn=tableMap$columns$finished
        ), n=1)
        if(dim(session)[1] == 0) {
          return(NULL)
        }
        
        session = as.list(session)
        session$previousInternal_id = session$internal_id
        session$internal_id = concerto$session$id
      
        timeLimit = as.numeric(resumableExpiration)
        if(timeLimit > 0) {
          timeDiff = as.numeric(Sys.time()) - as.numeric(strptime(session$updateTime, "%Y-%m-%d %H:%M:%S"))
          if(timeDiff > timeLimit) {
            concerto.log("session resume time limit exceeded")
            return(NULL)
          }
        }
      
        concerto.table.query("
      UPDATE {{table}} 
      SET 
      {{internalIdColumn}}='{{internal_id}}', 
      {{updateTimeColumn}}=CURRENT_TIMESTAMP 
      WHERE id={{id}}", params=list(
          table=tableMap$table,
          internalIdColumn=tableMap$columns$internal_id,
          internal_id=concerto$session$id,
          id=session$id,
          updateTimeColumn=tableMap$columns$updateTime
        ))
      
        return(session)
      }
      
      fields = formatFields(user, extraFields)
      concerto.log(fields, "fields")
      tableMap = fromJSON(sessionBankTable)
      
      session = NULL
      if(resumable == 1) {
        session = resumeSession(user, tableMap)
        if(!is.null(session)) {
          hash = concerto.table.query("SELECT hash FROM TestSession WHERE id={{id}}", list(id=session$previousInternal_id))
          concerto.log(hash, "resuming session...")
          if(!concerto.session.unserialize(hash=hash)) {
            	session = NULL
          }
        }
      }
      if(is.null(session)) {
      	session = insertSession(fields, tableMap)
      }
      concerto.log(session, "session")
      
    description: ''
    variables:
      -
        class_name: TestVariable
        id: 61
        name: out
        type: 2
        description: ''
        passableThroughUrl: '0'
        value: '0'
        test: 9
        parentVariable: null
      -
        class_name: TestVariable
        id: 62
        name: extraFields
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 9
        parentVariable: null
      -
        class_name: TestVariable
        id: 63
        name: user
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 9
        parentVariable: null
      -
        class_name: TestVariable
        id: 64
        name: sessionBankTable
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 9
        parentVariable: null
      -
        class_name: TestVariable
        id: 65
        name: session
        type: 1
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 9
        parentVariable: null
      -
        class_name: TestVariable
        id: 66
        name: resumable
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 9
        parentVariable: null
      -
        class_name: TestVariable
        id: 67
        name: resumableExpiration
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 9
        parentVariable: null
    sourceWizard: null
    sourceWizardTest: null
    nodes: {  }
    nodesConnections: {  }
    tags: ''
    groups: ''
    starterContent: true
    hash: c47bb84671feba6237a82af943d7816dce8938d0
  -
    class_name: TestWizard
    id: 5
    name: startSession
    description: ''
    accessibility: 0
    archived: '0'
    steps:
      -
        class_name: TestWizardStep
        id: 5
        title: Session
        description: ''
        orderNum: 0
        colsNum: 0
        wizard: 5
        params:
          -
            class_name: TestWizardParam
            id: 11
            label: Table
            description: 'Session table column mapping.'
            hideCondition: ''
            type: 12
            passableThroughUrl: '0'
            value: '[]'
            testVariable: 64
            name: sessionBankTable
            wizardStep: 5
            stepTitle: Session
            order: 0
            wizard: 5
            definition:
              placeholder: 0
              cols:
                -
                  name: id
                  label: Id
                  tooltip: ''
                -
                  name: internal_id
                  label: 'Internal id'
                  tooltip: ''
                -
                  name: user_id
                  label: 'User id'
                  tooltip: ''
                -
                  name: test_id
                  label: 'Test id'
                  tooltip: ''
                -
                  name: startedTime
                  label: 'Started time'
                  tooltip: ''
                -
                  name: updateTime
                  label: 'Update time'
                  tooltip: ''
                -
                  name: finished
                  label: Finished
                  tooltip: ''
          -
            class_name: TestWizardParam
            id: 12
            label: 'Resumable expiration'
            description: 'How long should session be resumable (in seconds). <strong>0</strong> for no expiration.'
            hideCondition: ''
            type: 0
            passableThroughUrl: '0'
            value: '0'
            testVariable: 67
            name: resumableExpiration
            wizardStep: 5
            stepTitle: Session
            order: 2
            wizard: 5
            definition:
              placeholder: 0
              defvalue: '0'
          -
            class_name: TestWizardParam
            id: 13
            label: 'Resumable?'
            description: 'Is session resumable?'
            hideCondition: ''
            type: 4
            passableThroughUrl: '0'
            value: '0'
            testVariable: 66
            name: resumable
            wizardStep: 5
            stepTitle: Session
            order: 1
            wizard: 5
            definition:
              placeholder: 0
    test: 9
    groups: ''
    starterContent: true
    hash: e9522d92b867309b98f67539fc9a09180c519b16
  -
    class_name: Test
    id: 10
    name: startSession
    accessibility: 0
    archived: '0'
    visibility: 2
    type: 1
    code: null
    description: 'Start session.'
    variables:
      -
        class_name: TestVariable
        id: 68
        name: out
        type: 2
        description: ''
        passableThroughUrl: '0'
        value: '0'
        test: 10
        parentVariable: 61
      -
        class_name: TestVariable
        id: 69
        name: extraFields
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 10
        parentVariable: 62
      -
        class_name: TestVariable
        id: 70
        name: user
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 10
        parentVariable: 63
      -
        class_name: TestVariable
        id: 71
        name: sessionBankTable
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: '{"table":"sessions","columns":{"id":"id","internal_id":"internal_id","user_id":"user_id","test_id":"test_id","updateTime":"updateTime","finished":"finished","startedTime":"startedTime"}}'
        test: 10
        parentVariable: 64
      -
        class_name: TestVariable
        id: 72
        name: session
        type: 1
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 10
        parentVariable: 65
      -
        class_name: TestVariable
        id: 73
        name: resumable
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: '0'
        test: 10
        parentVariable: 66
      -
        class_name: TestVariable
        id: 74
        name: resumableExpiration
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: '0'
        test: 10
        parentVariable: 67
    sourceWizard: 5
    sourceWizardTest: 9
    nodes: {  }
    nodesConnections: {  }
    tags: _concerto_core
    groups: ''
    starterContent: true
    hash: 384579a9e9be97416921456e2c108c566e362d1a
  -
    class_name: Test
    id: 11
    name: set
    accessibility: 0
    archived: '0'
    visibility: 2
    type: 0
    code: |
      for(.name in .dynamicInputs) {
        c.set(.name, get(.name), posOffset = -1)
      }
      
    description: 'Promote variables. Use dynamic inputs to declare which variables you want to promote.'
    variables:
      -
        class_name: TestVariable
        id: 75
        name: out
        type: 2
        description: ''
        passableThroughUrl: '0'
        value: '0'
        test: 11
        parentVariable: null
    sourceWizard: null
    sourceWizardTest: null
    nodes: {  }
    nodesConnections: {  }
    tags: _concerto_core
    groups: ''
    starterContent: true
    hash: 74f7a7bbe8623d0d968724f9267d5c304c91f6f6
  -
    class_name: Test
    id: 12
    name: _runTest
    accessibility: 0
    archived: '0'
    visibility: 2
    type: 0
    code: |
      if(!is.list(params)) {
        params = list()
      }
      for(name in .dynamicInputs) {
        value = get(name)
        if(is.null(value)) {
          params[name] = list(NULL)
        } else {
          params[[name]] = value
        }
      }
      
      results = concerto5:::concerto.test.run(test, params=params)
      for(name in .dynamicReturns) {
        assign(name, results[[name]])
      }
      
    description: ''
    variables:
      -
        class_name: TestVariable
        id: 76
        name: out
        type: 2
        description: ''
        passableThroughUrl: '0'
        value: '0'
        test: 12
        parentVariable: null
      -
        class_name: TestVariable
        id: 77
        name: test
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 12
        parentVariable: null
      -
        class_name: TestVariable
        id: 78
        name: params
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 12
        parentVariable: null
      -
        class_name: TestVariable
        id: 79
        name: results
        type: 1
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 12
        parentVariable: null
    sourceWizard: null
    sourceWizardTest: null
    nodes: {  }
    nodesConnections: {  }
    tags: ''
    groups: ''
    starterContent: true
    hash: 28395689418c8145bcf6f0e12f15dc208f943863
  -
    class_name: TestWizard
    id: 6
    name: runTest
    description: ''
    accessibility: 0
    archived: '0'
    steps:
      -
        class_name: TestWizardStep
        id: 6
        title: Test
        description: ''
        orderNum: 0
        colsNum: 0
        wizard: 6
        params:
          -
            class_name: TestWizardParam
            id: 14
            label: Test
            description: 'Test that should be run.'
            hideCondition: ''
            type: 8
            passableThroughUrl: '0'
            value: ''
            testVariable: 77
            name: test
            wizardStep: 6
            stepTitle: Test
            order: 0
            wizard: 6
            definition:
              placeholder: 0
              defvalue: ''
    test: 12
    groups: ''
    starterContent: true
    hash: 3f2902814d716ef4a692a2fcf8f893b277250756
  -
    class_name: Test
    id: 13
    name: runTest
    accessibility: 0
    archived: '0'
    visibility: 2
    type: 1
    code: null
    description: 'Run other test.'
    variables:
      -
        class_name: TestVariable
        id: 80
        name: out
        type: 2
        description: ''
        passableThroughUrl: '0'
        value: '0'
        test: 13
        parentVariable: 76
      -
        class_name: TestVariable
        id: 81
        name: test
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 13
        parentVariable: 77
      -
        class_name: TestVariable
        id: 82
        name: params
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 13
        parentVariable: 78
      -
        class_name: TestVariable
        id: 83
        name: results
        type: 1
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 13
        parentVariable: 79
    sourceWizard: 6
    sourceWizardTest: 12
    nodes: {  }
    nodesConnections: {  }
    tags: _concerto_core
    groups: ''
    starterContent: true
    hash: 2a12072638d0a7f4a3031ad7c34caa3a735c37df
  -
    class_name: Test
    id: 14
    name: if
    accessibility: 0
    archived: '0'
    visibility: 2
    type: 0
    code: |
      .branch = "false"
      if(expression) { .branch = "true" }
      
    description: '<strong>If</strong>&nbsp;expression.'
    variables:
      -
        class_name: TestVariable
        id: 84
        name: 'true'
        type: 2
        description: ''
        passableThroughUrl: '0'
        value: '0'
        test: 14
        parentVariable: null
      -
        class_name: TestVariable
        id: 85
        name: expression
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 14
        parentVariable: null
      -
        class_name: TestVariable
        id: 86
        name: .branch
        type: 1
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 14
        parentVariable: null
      -
        class_name: TestVariable
        id: 87
        name: 'false'
        type: 2
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 14
        parentVariable: null
    sourceWizard: null
    sourceWizardTest: null
    nodes: {  }
    nodesConnections: {  }
    tags: _concerto_core
    groups: ''
    starterContent: true
    hash: c6ff2904ae23016825bd8094fb1c653a43cf35a5
  -
    class_name: Test
    id: 15
    name: eval
    accessibility: 0
    archived: '0'
    visibility: 2
    type: 0
    code: 'result = eval(parse(text=code))'
    description: 'Evaluate R code.'
    variables:
      -
        class_name: TestVariable
        id: 88
        name: out
        type: 2
        description: ''
        passableThroughUrl: '0'
        value: '0'
        test: 15
        parentVariable: null
      -
        class_name: TestVariable
        id: 89
        name: code
        type: 0
        description: 'Code value is expected to be text.'
        passableThroughUrl: '0'
        value: null
        test: 15
        parentVariable: null
      -
        class_name: TestVariable
        id: 90
        name: result
        type: 1
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 15
        parentVariable: null
    sourceWizard: null
    sourceWizardTest: null
    nodes: {  }
    nodesConnections: {  }
    tags: _concerto_core
    groups: ''
    starterContent: true
    hash: 1266085682e797e33d130cd9966d38e369437848
  -
    class_name: Test
    id: 16
    name: get
    accessibility: 0
    archived: '0'
    visibility: 2
    type: 0
    code: |
      for(.name in .dynamicReturns) {
        assign(.name, c.get(.name, posOffset = -1))
      }
      
    description: 'Gets promoted variables values. Use dynamic returns to declare which variables you want to get.'
    variables: {  }
    sourceWizard: null
    sourceWizardTest: null
    nodes: {  }
    nodesConnections: {  }
    tags: _concerto_core
    groups: ''
    starterContent: true
    hash: 3e981acda0de491a23bcbe6668c7e4774084793c
  -
    class_name: Test
    id: 17
    name: _CATInitialization
    accessibility: 0
    archived: '0'
    visibility: 2
    type: 0
    code: |
      getItems = function(itemBankType, itemBankItems, itemBankTable){
        items = NULL
        if(itemBankType == "table") {
          tableMap = fromJSON(itemBankTable)
          table = tableMap$table
          questionColumn = tableMap$columns$question
          responseOptionsColumn = tableMap$columns$responseOptions
          aColumn = tableMap$columns$a
          bColumn = tableMap$columns$b
          cColumn = tableMap$columns$c
          dColumn = tableMap$columns$d
          correctColumn = tableMap$columns$correct
          cbGroupColumn = tableMap$columns$cbGroup
          fixedIndexColumn = tableMap$columns$fixedIndex
          items = concerto.table.query(
            "
      SELECT 
      id, 
      {{questionColumn}} AS question, 
      {{responseOptionsColumn}} AS responseOptions,
      {{aColumn}} AS a,
      {{bColumn}} AS b,
      {{cColumn}} AS c,
      {{dColumn}} AS d,
      {{correctColumn}} AS correct,
      {{cbGroupColumn}} AS cbGroup,
      {{fixedIndexColumn}} AS fixedIndex
      FROM {{table}}
      ", 
            list(
              questionColumn=questionColumn,
              responseOptionsColumn=responseOptionsColumn,
              aColumn=aColumn,
              bColumn=bColumn,
              cColumn=cColumn,
              dColumn=dColumn,
              correctColumn=correctColumn,
              cbGroupColumn=cbGroupColumn,
              fixedIndexColumn=fixedIndexColumn,
              table=table
            ))
        }
        if(itemBankType == "direct") {
          itemBankItems = fromJSON(itemBankItems)
          if(length(itemBankItems) > 0) {
            for(i in 1:length(itemBankItems)) {
              itemBankItems[[i]]$responseOptions = as.character(toJSON(itemBankItems[[i]]$responseOptions)) #response options don't fit into flat table, so turn them back to JSON.
              items = rbind(items, data.frame(itemBankItems[[i]], stringsAsFactors=F))
            }
          }
        } 
        
        if(dim(items)[1] == 0) { stop("Item bank must not be empty!") }
        return(items)
      }
      
      items = getItems(settings$itemBankType, settings$itemBankItems, settings$itemBankTable)
      itemsNum = dim(items)[1]
      
      cbGroup = NULL
      cbControl = NULL
      cbProps = fromJSON(settings$contentBalancing)
      if(length(cbProps) > 0) {
        cbGroup = as.character(items[,"cbGroup"])
        cbControl = list(
          names=as.character(cbProps[,"name"]),
          props=as.numeric(cbProps[,"proportion"])
        )
      }
      
      paramBank = items[,c("a","b","c","d"),drop=F]
      paramBank = apply(paramBank, 2, as.numeric)
      
      theta = as.numeric(settings$startingTheta)
      itemsAdministered = NULL
      correctness = NULL
      testTimeStarted = as.numeric(Sys.time())
      testTimeLeft = as.numeric(settings$testTimeLimit) + as.numeric(settings$testTimeLimitOffset)
      
    description: ''
    variables:
      -
        class_name: TestVariable
        id: 91
        name: out
        type: 2
        description: ''
        passableThroughUrl: '0'
        value: '0'
        test: 17
        parentVariable: null
      -
        class_name: TestVariable
        id: 92
        name: items
        type: 1
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 17
        parentVariable: null
      -
        class_name: TestVariable
        id: 93
        name: cbGroup
        type: 1
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 17
        parentVariable: null
      -
        class_name: TestVariable
        id: 94
        name: cbControl
        type: 1
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 17
        parentVariable: null
      -
        class_name: TestVariable
        id: 95
        name: paramBank
        type: 1
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 17
        parentVariable: null
      -
        class_name: TestVariable
        id: 96
        name: theta
        type: 1
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 17
        parentVariable: null
      -
        class_name: TestVariable
        id: 97
        name: itemsAdministered
        type: 1
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 17
        parentVariable: null
      -
        class_name: TestVariable
        id: 98
        name: correctness
        type: 1
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 17
        parentVariable: null
      -
        class_name: TestVariable
        id: 99
        name: testTimeStarted
        type: 1
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 17
        parentVariable: null
      -
        class_name: TestVariable
        id: 100
        name: testTimeLeft
        type: 1
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 17
        parentVariable: null
      -
        class_name: TestVariable
        id: 101
        name: settings
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 17
        parentVariable: null
    sourceWizard: null
    sourceWizardTest: null
    nodes: {  }
    nodesConnections: {  }
    tags: ''
    groups: ''
    starterContent: true
    hash: 0c1c74a4b74296ce8aede855c0aa4ea9c3906178
  -
    class_name: Test
    id: 18
    name: _CATShowItem
    accessibility: 0
    archived: '0'
    visibility: 2
    type: 0
    code: |
      getTemplateParams = function(itemSafe, templateParams, responseRequired, responseRequiredAlert) {
        templateParams$item = itemSafe
        templateParams$responseRequired = responseRequired
        templateParams$responseRequiredAlert = responseRequiredAlert
        
        return(templateParams)
      }
      
      getTimeLimit = function(testTimeStarted, testTimeLimit, itemTimeLimit) {
        limit = 0
        startedAgo = as.numeric(Sys.time()) - testTimeStarted
        testTimeLeft = 0
        if(testTimeLimit > 0) {
          testTimeLeft = max(testTimeLimit - startedAgo, 1)
          limit = testTimeLeft
        }
        if(itemTimeLimit > 0) {
          if(limit > 0) {
            limit = min(limit, itemTimeLimit)
          } else {
            limit = itemTimeLimit
          }
        }
        return(limit)
      }
      
      response = concerto.template.show(
        settings$itemTemplate, 
        params=getTemplateParams(itemSafe, templateParams, settings$responseRequired, settings$responseRequiredAlert), 
        timeLimit=getTimeLimit(
          testTimeStarted, 
          as.numeric(settings$testTimeLimit), 
          as.numeric(settings$itemTimeLimit)
        )
      )
      
      .branch = "submitted"
      if(response$isTimeout == 1) { .branch = "outOfTime" }
      
    description: ''
    variables:
      -
        class_name: TestVariable
        id: 102
        name: submitted
        type: 2
        description: ''
        passableThroughUrl: '0'
        value: '0'
        test: 18
        parentVariable: null
      -
        class_name: TestVariable
        id: 103
        name: item
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 18
        parentVariable: null
      -
        class_name: TestVariable
        id: 104
        name: templateParams
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 18
        parentVariable: null
      -
        class_name: TestVariable
        id: 105
        name: testTimeStarted
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 18
        parentVariable: null
      -
        class_name: TestVariable
        id: 106
        name: testTimeLeft
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 18
        parentVariable: null
      -
        class_name: TestVariable
        id: 107
        name: response
        type: 1
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 18
        parentVariable: null
      -
        class_name: TestVariable
        id: 108
        name: outOfTime
        type: 2
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 18
        parentVariable: null
      -
        class_name: TestVariable
        id: 109
        name: .branch
        type: 1
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 18
        parentVariable: null
      -
        class_name: TestVariable
        id: 110
        name: itemSafe
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 18
        parentVariable: null
      -
        class_name: TestVariable
        id: 111
        name: settings
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 18
        parentVariable: null
    sourceWizard: null
    sourceWizardTest: null
    nodes: {  }
    nodesConnections: {  }
    tags: ''
    groups: ''
    starterContent: true
    hash: ea9a0518c71d1fd34d11ff8d469dfcc47e5bfeb5
  -
    class_name: Test
    id: 19
    name: createList
    accessibility: 0
    archived: '0'
    visibility: 2
    type: 0
    code: |
      result = list()
      if(is.list(sourceList)) {
        result = sourceList
      }
      for(.name in .dynamicInputs) {
          result[.name] = list(get(.name))
      }
      
    description: 'List creation. Dynamic inputs will be used as list elements (input name as list key, input value as list value).'
    variables:
      -
        class_name: TestVariable
        id: 112
        name: out
        type: 2
        description: ''
        passableThroughUrl: '0'
        value: '0'
        test: 19
        parentVariable: null
      -
        class_name: TestVariable
        id: 113
        name: sourceList
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 19
        parentVariable: null
      -
        class_name: TestVariable
        id: 114
        name: result
        type: 1
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 19
        parentVariable: null
    sourceWizard: null
    sourceWizardTest: null
    nodes: {  }
    nodesConnections: {  }
    tags: _concerto_core
    groups: ''
    starterContent: true
    hash: 7e8f02d3c0a49e247ce9f634167d57aee20da6e0
  -
    class_name: Test
    id: 20
    name: _CAT
    accessibility: 0
    archived: '0'
    visibility: 2
    type: 2
    code: null
    description: ''
    variables:
      -
        class_name: TestVariable
        id: 115
        name: out
        type: 2
        description: ''
        passableThroughUrl: '0'
        value: '0'
        test: 20
        parentVariable: null
      -
        class_name: TestVariable
        id: 116
        name: itemBankType
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: direct
        test: 20
        parentVariable: null
      -
        class_name: TestVariable
        id: 117
        name: itemBankItems
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: '[]'
        test: 20
        parentVariable: null
      -
        class_name: TestVariable
        id: 118
        name: itemBankTable
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 20
        parentVariable: null
      -
        class_name: TestVariable
        id: 119
        name: testTimeLimit
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: '0'
        test: 20
        parentVariable: null
      -
        class_name: TestVariable
        id: 120
        name: itemTimeLimit
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: '0'
        test: 20
        parentVariable: null
      -
        class_name: TestVariable
        id: 121
        name: itemTimeFullRequired
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: '0'
        test: 20
        parentVariable: null
      -
        class_name: TestVariable
        id: 122
        name: testTimeLimitOffset
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: '0'
        test: 20
        parentVariable: null
      -
        class_name: TestVariable
        id: 123
        name: contentBalancing
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: '[]'
        test: 20
        parentVariable: null
      -
        class_name: TestVariable
        id: 124
        name: startingTheta
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: '0'
        test: 20
        parentVariable: null
      -
        class_name: TestVariable
        id: 125
        name: nextItemCriterion
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: MFI
        test: 20
        parentVariable: null
      -
        class_name: TestVariable
        id: 126
        name: nextItemRandomesque
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: '1'
        test: 20
        parentVariable: null
      -
        class_name: TestVariable
        id: 127
        name: scoringMethod
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: BM
        test: 20
        parentVariable: null
      -
        class_name: TestVariable
        id: 128
        name: responseBank
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 20
        parentVariable: null
      -
        class_name: TestVariable
        id: 129
        name: itemTemplate
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 20
        parentVariable: null
      -
        class_name: TestVariable
        id: 130
        name: session
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 20
        parentVariable: null
      -
        class_name: TestVariable
        id: 131
        name: itemNumLimit
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: '0'
        test: 20
        parentVariable: null
      -
        class_name: TestVariable
        id: 132
        name: minAccuracy
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: '1'
        test: 20
        parentVariable: null
      -
        class_name: TestVariable
        id: 133
        name: nextItemSelectorModule
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 20
        parentVariable: null
      -
        class_name: TestVariable
        id: 134
        name: scoringModule
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 20
        parentVariable: null
      -
        class_name: TestVariable
        id: 135
        name: responseProcessorModule
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 20
        parentVariable: null
      -
        class_name: TestVariable
        id: 136
        name: statusCheckModule
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 20
        parentVariable: null
      -
        class_name: TestVariable
        id: 137
        name: responseRequired
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 20
        parentVariable: null
      -
        class_name: TestVariable
        id: 138
        name: responseRequiredAlert
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 20
        parentVariable: null
      -
        class_name: TestVariable
        id: 139
        name: sem
        type: 1
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 20
        parentVariable: null
      -
        class_name: TestVariable
        id: 140
        name: theta
        type: 1
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 20
        parentVariable: null
    sourceWizard: null
    sourceWizardTest: null
    nodes:
      -
        class_name: TestNode
        id: 31
        title: ''
        type: 1
        posX: 14369
        posY: 14742
        flowTest: 20
        sourceTest: 20
        sourceTestName: _CAT
        sourceTestDescription: ''
        ports:
          -
            class_name: TestNodePort
            id: 366
            value: direct
            node: 31
            variable: 116
            variableObject:
              class_name: TestVariable
              id: 116
              name: itemBankType
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: direct
              test: 20
              parentVariable: null
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 1
            exposed: '1'
            name: itemBankType
            pointer: '0'
            pointerVariable: ''
          -
            class_name: TestNodePort
            id: 367
            value: '[]'
            node: 31
            variable: 117
            variableObject:
              class_name: TestVariable
              id: 117
              name: itemBankItems
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: '[]'
              test: 20
              parentVariable: null
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 1
            exposed: '1'
            name: itemBankItems
            pointer: '0'
            pointerVariable: ''
          -
            class_name: TestNodePort
            id: 368
            value: null
            node: 31
            variable: 118
            variableObject:
              class_name: TestVariable
              id: 118
              name: itemBankTable
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 20
              parentVariable: null
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 1
            exposed: '1'
            name: itemBankTable
            pointer: '0'
            pointerVariable: ''
          -
            class_name: TestNodePort
            id: 369
            value: '0'
            node: 31
            variable: 119
            variableObject:
              class_name: TestVariable
              id: 119
              name: testTimeLimit
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: '0'
              test: 20
              parentVariable: null
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 1
            exposed: '1'
            name: testTimeLimit
            pointer: '0'
            pointerVariable: ''
          -
            class_name: TestNodePort
            id: 370
            value: '0'
            node: 31
            variable: 120
            variableObject:
              class_name: TestVariable
              id: 120
              name: itemTimeLimit
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: '0'
              test: 20
              parentVariable: null
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 1
            exposed: '1'
            name: itemTimeLimit
            pointer: '0'
            pointerVariable: ''
          -
            class_name: TestNodePort
            id: 371
            value: '0'
            node: 31
            variable: 121
            variableObject:
              class_name: TestVariable
              id: 121
              name: itemTimeFullRequired
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: '0'
              test: 20
              parentVariable: null
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 1
            exposed: '1'
            name: itemTimeFullRequired
            pointer: '0'
            pointerVariable: ''
          -
            class_name: TestNodePort
            id: 372
            value: '0'
            node: 31
            variable: 122
            variableObject:
              class_name: TestVariable
              id: 122
              name: testTimeLimitOffset
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: '0'
              test: 20
              parentVariable: null
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 1
            exposed: '1'
            name: testTimeLimitOffset
            pointer: '0'
            pointerVariable: ''
          -
            class_name: TestNodePort
            id: 373
            value: '[]'
            node: 31
            variable: 123
            variableObject:
              class_name: TestVariable
              id: 123
              name: contentBalancing
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: '[]'
              test: 20
              parentVariable: null
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 1
            exposed: '1'
            name: contentBalancing
            pointer: '0'
            pointerVariable: ''
          -
            class_name: TestNodePort
            id: 374
            value: '0'
            node: 31
            variable: 124
            variableObject:
              class_name: TestVariable
              id: 124
              name: startingTheta
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: '0'
              test: 20
              parentVariable: null
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 1
            exposed: '1'
            name: startingTheta
            pointer: '0'
            pointerVariable: ''
          -
            class_name: TestNodePort
            id: 375
            value: MFI
            node: 31
            variable: 125
            variableObject:
              class_name: TestVariable
              id: 125
              name: nextItemCriterion
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: MFI
              test: 20
              parentVariable: null
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 1
            exposed: '1'
            name: nextItemCriterion
            pointer: '0'
            pointerVariable: ''
          -
            class_name: TestNodePort
            id: 376
            value: '1'
            node: 31
            variable: 126
            variableObject:
              class_name: TestVariable
              id: 126
              name: nextItemRandomesque
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: '1'
              test: 20
              parentVariable: null
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 1
            exposed: '1'
            name: nextItemRandomesque
            pointer: '0'
            pointerVariable: ''
          -
            class_name: TestNodePort
            id: 377
            value: BM
            node: 31
            variable: 127
            variableObject:
              class_name: TestVariable
              id: 127
              name: scoringMethod
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: BM
              test: 20
              parentVariable: null
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 1
            exposed: '1'
            name: scoringMethod
            pointer: '0'
            pointerVariable: ''
          -
            class_name: TestNodePort
            id: 378
            value: null
            node: 31
            variable: 128
            variableObject:
              class_name: TestVariable
              id: 128
              name: responseBank
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 20
              parentVariable: null
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 1
            exposed: '1'
            name: responseBank
            pointer: '0'
            pointerVariable: ''
          -
            class_name: TestNodePort
            id: 379
            value: null
            node: 31
            variable: 129
            variableObject:
              class_name: TestVariable
              id: 129
              name: itemTemplate
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 20
              parentVariable: null
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 1
            exposed: '1'
            name: itemTemplate
            pointer: '0'
            pointerVariable: ''
          -
            class_name: TestNodePort
            id: 380
            value: null
            node: 31
            variable: 130
            variableObject:
              class_name: TestVariable
              id: 130
              name: session
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 20
              parentVariable: null
            string: '1'
            defaultValue: '0'
            dynamic: '0'
            type: 1
            exposed: '1'
            name: session
            pointer: '1'
            pointerVariable: session
          -
            class_name: TestNodePort
            id: 381
            value: '0'
            node: 31
            variable: 131
            variableObject:
              class_name: TestVariable
              id: 131
              name: itemNumLimit
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: '0'
              test: 20
              parentVariable: null
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 1
            exposed: '1'
            name: itemNumLimit
            pointer: '0'
            pointerVariable: ''
          -
            class_name: TestNodePort
            id: 382
            value: '1'
            node: 31
            variable: 132
            variableObject:
              class_name: TestVariable
              id: 132
              name: minAccuracy
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: '1'
              test: 20
              parentVariable: null
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 1
            exposed: '1'
            name: minAccuracy
            pointer: '0'
            pointerVariable: ''
          -
            class_name: TestNodePort
            id: 383
            value: null
            node: 31
            variable: 133
            variableObject:
              class_name: TestVariable
              id: 133
              name: nextItemSelectorModule
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 20
              parentVariable: null
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 1
            exposed: '0'
            name: nextItemSelectorModule
            pointer: '0'
            pointerVariable: ''
          -
            class_name: TestNodePort
            id: 384
            value: null
            node: 31
            variable: 134
            variableObject:
              class_name: TestVariable
              id: 134
              name: scoringModule
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 20
              parentVariable: null
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 1
            exposed: '0'
            name: scoringModule
            pointer: '0'
            pointerVariable: ''
          -
            class_name: TestNodePort
            id: 385
            value: null
            node: 31
            variable: 135
            variableObject:
              class_name: TestVariable
              id: 135
              name: responseProcessorModule
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 20
              parentVariable: null
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 1
            exposed: '0'
            name: responseProcessorModule
            pointer: '0'
            pointerVariable: ''
          -
            class_name: TestNodePort
            id: 386
            value: null
            node: 31
            variable: 136
            variableObject:
              class_name: TestVariable
              id: 136
              name: statusCheckModule
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 20
              parentVariable: null
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 1
            exposed: '0'
            name: statusCheckModule
            pointer: '0'
            pointerVariable: ''
          -
            class_name: TestNodePort
            id: 387
            value: null
            node: 31
            variable: 137
            variableObject:
              class_name: TestVariable
              id: 137
              name: responseRequired
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 20
              parentVariable: null
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 1
            exposed: '0'
            name: responseRequired
            pointer: '0'
            pointerVariable: responseRequired
          -
            class_name: TestNodePort
            id: 388
            value: null
            node: 31
            variable: 138
            variableObject:
              class_name: TestVariable
              id: 138
              name: responseRequiredAlert
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 20
              parentVariable: null
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 1
            exposed: '0'
            name: responseRequiredAlert
            pointer: '0'
            pointerVariable: responseRequiredAlert
      -
        class_name: TestNode
        id: 32
        title: ''
        type: 2
        posX: 16736
        posY: 15739
        flowTest: 20
        sourceTest: 20
        sourceTestName: _CAT
        sourceTestDescription: ''
        ports:
          -
            class_name: TestNodePort
            id: 389
            value: null
            node: 32
            variable: 139
            variableObject:
              class_name: TestVariable
              id: 139
              name: sem
              type: 1
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 20
              parentVariable: null
            string: '1'
            defaultValue: '0'
            dynamic: '0'
            type: 0
            exposed: '0'
            name: sem
            pointer: '1'
            pointerVariable: sem
          -
            class_name: TestNodePort
            id: 390
            value: null
            node: 32
            variable: 140
            variableObject:
              class_name: TestVariable
              id: 140
              name: theta
              type: 1
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 20
              parentVariable: null
            string: '1'
            defaultValue: '0'
            dynamic: '0'
            type: 0
            exposed: '0'
            name: theta
            pointer: '1'
            pointerVariable: theta
      -
        class_name: TestNode
        id: 33
        title: ''
        type: 0
        posX: 15254
        posY: 15084
        flowTest: 20
        sourceTest: 17
        sourceTestName: _CATInitialization
        sourceTestDescription: ''
        ports:
          -
            class_name: TestNodePort
            id: 391
            value: '0'
            node: 33
            variable: 91
            variableObject:
              class_name: TestVariable
              id: 91
              name: out
              type: 2
              description: ''
              passableThroughUrl: '0'
              value: '0'
              test: 17
              parentVariable: null
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 2
            exposed: '1'
            name: out
            pointer: '0'
            pointerVariable: ''
          -
            class_name: TestNodePort
            id: 392
            value: null
            node: 33
            variable: 92
            variableObject:
              class_name: TestVariable
              id: 92
              name: items
              type: 1
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 17
              parentVariable: null
            string: '1'
            defaultValue: '0'
            dynamic: '0'
            type: 1
            exposed: '1'
            name: items
            pointer: '1'
            pointerVariable: items
          -
            class_name: TestNodePort
            id: 393
            value: null
            node: 33
            variable: 93
            variableObject:
              class_name: TestVariable
              id: 93
              name: cbGroup
              type: 1
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 17
              parentVariable: null
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 1
            exposed: '1'
            name: cbGroup
            pointer: '0'
            pointerVariable: ''
          -
            class_name: TestNodePort
            id: 394
            value: null
            node: 33
            variable: 94
            variableObject:
              class_name: TestVariable
              id: 94
              name: cbControl
              type: 1
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 17
              parentVariable: null
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 1
            exposed: '1'
            name: cbControl
            pointer: '0'
            pointerVariable: ''
          -
            class_name: TestNodePort
            id: 395
            value: null
            node: 33
            variable: 95
            variableObject:
              class_name: TestVariable
              id: 95
              name: paramBank
              type: 1
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 17
              parentVariable: null
            string: '1'
            defaultValue: '0'
            dynamic: '0'
            type: 1
            exposed: '1'
            name: paramBank
            pointer: '1'
            pointerVariable: paramBank
          -
            class_name: TestNodePort
            id: 396
            value: null
            node: 33
            variable: 96
            variableObject:
              class_name: TestVariable
              id: 96
              name: theta
              type: 1
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 17
              parentVariable: null
            string: '1'
            defaultValue: '0'
            dynamic: '0'
            type: 1
            exposed: '1'
            name: theta
            pointer: '1'
            pointerVariable: theta
          -
            class_name: TestNodePort
            id: 397
            value: null
            node: 33
            variable: 97
            variableObject:
              class_name: TestVariable
              id: 97
              name: itemsAdministered
              type: 1
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 17
              parentVariable: null
            string: '1'
            defaultValue: '0'
            dynamic: '0'
            type: 1
            exposed: '1'
            name: itemsAdministered
            pointer: '1'
            pointerVariable: itemsAdministered
          -
            class_name: TestNodePort
            id: 398
            value: null
            node: 33
            variable: 98
            variableObject:
              class_name: TestVariable
              id: 98
              name: correctness
              type: 1
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 17
              parentVariable: null
            string: '1'
            defaultValue: '0'
            dynamic: '0'
            type: 1
            exposed: '1'
            name: correctness
            pointer: '1'
            pointerVariable: correctness
          -
            class_name: TestNodePort
            id: 399
            value: null
            node: 33
            variable: 99
            variableObject:
              class_name: TestVariable
              id: 99
              name: testTimeStarted
              type: 1
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 17
              parentVariable: null
            string: '1'
            defaultValue: '0'
            dynamic: '0'
            type: 1
            exposed: '1'
            name: testTimeStarted
            pointer: '1'
            pointerVariable: testTimeStarted
          -
            class_name: TestNodePort
            id: 400
            value: null
            node: 33
            variable: 100
            variableObject:
              class_name: TestVariable
              id: 100
              name: testTimeLeft
              type: 1
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 17
              parentVariable: null
            string: '1'
            defaultValue: '0'
            dynamic: '0'
            type: 1
            exposed: '1'
            name: testTimeLeft
            pointer: '1'
            pointerVariable: testTimeLeft
          -
            class_name: TestNodePort
            id: 401
            value: null
            node: 33
            variable: 101
            variableObject:
              class_name: TestVariable
              id: 101
              name: settings
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 17
              parentVariable: null
            string: '1'
            defaultValue: '0'
            dynamic: '0'
            type: 0
            exposed: '1'
            name: settings
            pointer: '1'
            pointerVariable: settings
      -
        class_name: TestNode
        id: 34
        title: ''
        type: 0
        posX: 16073
        posY: 15132
        flowTest: 20
        sourceTest: 18
        sourceTestName: _CATShowItem
        sourceTestDescription: ''
        ports:
          -
            class_name: TestNodePort
            id: 402
            value: '0'
            node: 34
            variable: 102
            variableObject:
              class_name: TestVariable
              id: 102
              name: submitted
              type: 2
              description: ''
              passableThroughUrl: '0'
              value: '0'
              test: 18
              parentVariable: null
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 2
            exposed: '1'
            name: submitted
            pointer: '0'
            pointerVariable: ''
          -
            class_name: TestNodePort
            id: 403
            value: null
            node: 34
            variable: 103
            variableObject:
              class_name: TestVariable
              id: 103
              name: item
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 18
              parentVariable: null
            string: '1'
            defaultValue: '0'
            dynamic: '0'
            type: 0
            exposed: '1'
            name: item
            pointer: '1'
            pointerVariable: item
          -
            class_name: TestNodePort
            id: 404
            value: c.getDynamicInputs()
            node: 34
            variable: 104
            variableObject:
              class_name: TestVariable
              id: 104
              name: templateParams
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 18
              parentVariable: null
            string: '0'
            defaultValue: '0'
            dynamic: '0'
            type: 0
            exposed: '1'
            name: templateParams
            pointer: '0'
            pointerVariable: ''
          -
            class_name: TestNodePort
            id: 405
            value: null
            node: 34
            variable: 105
            variableObject:
              class_name: TestVariable
              id: 105
              name: testTimeStarted
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 18
              parentVariable: null
            string: '1'
            defaultValue: '0'
            dynamic: '0'
            type: 0
            exposed: '1'
            name: testTimeStarted
            pointer: '1'
            pointerVariable: testTimeStarted
          -
            class_name: TestNodePort
            id: 406
            value: null
            node: 34
            variable: 106
            variableObject:
              class_name: TestVariable
              id: 106
              name: testTimeLeft
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 18
              parentVariable: null
            string: '1'
            defaultValue: '0'
            dynamic: '0'
            type: 0
            exposed: '1'
            name: testTimeLeft
            pointer: '1'
            pointerVariable: testTimeLeft
          -
            class_name: TestNodePort
            id: 407
            value: null
            node: 34
            variable: 107
            variableObject:
              class_name: TestVariable
              id: 107
              name: response
              type: 1
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 18
              parentVariable: null
            string: '1'
            defaultValue: '0'
            dynamic: '0'
            type: 1
            exposed: '1'
            name: response
            pointer: '1'
            pointerVariable: response
          -
            class_name: TestNodePort
            id: 408
            value: null
            node: 34
            variable: 108
            variableObject:
              class_name: TestVariable
              id: 108
              name: outOfTime
              type: 2
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 18
              parentVariable: null
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 2
            exposed: '1'
            name: outOfTime
            pointer: '0'
            pointerVariable: ''
          -
            class_name: TestNodePort
            id: 409
            value: null
            node: 34
            variable: 109
            variableObject:
              class_name: TestVariable
              id: 109
              name: .branch
              type: 1
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 18
              parentVariable: null
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 1
            exposed: '1'
            name: .branch
            pointer: '0'
            pointerVariable: ''
          -
            class_name: TestNodePort
            id: 410
            value: null
            node: 34
            variable: 110
            variableObject:
              class_name: TestVariable
              id: 110
              name: itemSafe
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 18
              parentVariable: null
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 0
            exposed: '1'
            name: itemSafe
            pointer: '0'
            pointerVariable: ''
          -
            class_name: TestNodePort
            id: 411
            value: null
            node: 34
            variable: 111
            variableObject:
              class_name: TestVariable
              id: 111
              name: settings
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 18
              parentVariable: null
            string: '1'
            defaultValue: '0'
            dynamic: '0'
            type: 0
            exposed: '1'
            name: settings
            pointer: '1'
            pointerVariable: settings
      -
        class_name: TestNode
        id: 35
        title: 'next item selector module'
        type: 0
        posX: 15673
        posY: 15113
        flowTest: 20
        sourceTest: 13
        sourceTestName: runTest
        sourceTestDescription: 'Run other test.'
        ports:
          -
            class_name: TestNodePort
            id: 412
            value: ''
            node: 35
            variable: 81
            variableObject:
              class_name: TestVariable
              id: 81
              name: test
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 13
              parentVariable: 77
            string: '1'
            defaultValue: '0'
            dynamic: '0'
            type: 0
            exposed: '1'
            name: test
            pointer: '0'
            pointerVariable: ''
          -
            class_name: TestNodePort
            id: 413
            value: null
            node: 35
            variable: 82
            variableObject:
              class_name: TestVariable
              id: 82
              name: params
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 13
              parentVariable: 78
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 0
            exposed: '0'
            name: params
            pointer: '0'
            pointerVariable: ''
          -
            class_name: TestNodePort
            id: 414
            value: null
            node: 35
            variable: 83
            variableObject:
              class_name: TestVariable
              id: 83
              name: results
              type: 1
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 13
              parentVariable: 79
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 1
            exposed: '0'
            name: results
            pointer: '0'
            pointerVariable: ''
          -
            class_name: TestNodePort
            id: 415
            value: '0'
            node: 35
            variable: 80
            variableObject:
              class_name: TestVariable
              id: 80
              name: out
              type: 2
              description: ''
              passableThroughUrl: '0'
              value: '0'
              test: 13
              parentVariable: 76
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 2
            exposed: '1'
            name: out
            pointer: '0'
            pointerVariable: ''
          -
            class_name: TestNodePort
            id: 416
            value: ''
            node: 35
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '1'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: cbControl
            pointer: '0'
            pointerVariable: ''
          -
            class_name: TestNodePort
            id: 417
            value: ''
            node: 35
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '1'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: cbGroup
            pointer: '0'
            pointerVariable: ''
          -
            class_name: TestNodePort
            id: 418
            value: ''
            node: 35
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '0'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: items
            pointer: '1'
            pointerVariable: items
          -
            class_name: TestNodePort
            id: 419
            value: ''
            node: 35
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '0'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: paramBank
            pointer: '1'
            pointerVariable: paramBank
          -
            class_name: TestNodePort
            id: 420
            value: ''
            node: 35
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '0'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: theta
            pointer: '1'
            pointerVariable: theta
          -
            class_name: TestNodePort
            id: 421
            value: ''
            node: 35
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '0'
            dynamic: '1'
            type: 1
            exposed: '1'
            name: nextItem
            pointer: '1'
            pointerVariable: item
          -
            class_name: TestNodePort
            id: 422
            value: ''
            node: 35
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '0'
            dynamic: '1'
            type: 1
            exposed: '1'
            name: nextItemIndex
            pointer: '1'
            pointerVariable: itemIndex
          -
            class_name: TestNodePort
            id: 423
            value: 'NULL'
            node: 35
            variable: null
            variableObject: null
            string: '0'
            defaultValue: '0'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: itemsAdministered
            pointer: '1'
            pointerVariable: itemsAdministered
          -
            class_name: TestNodePort
            id: 424
            value: ''
            node: 35
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '1'
            dynamic: '1'
            type: 1
            exposed: '1'
            name: nextItemSafe
            pointer: '0'
            pointerVariable: ''
          -
            class_name: TestNodePort
            id: 425
            value: ''
            node: 35
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '0'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: settings
            pointer: '1'
            pointerVariable: settings
      -
        class_name: TestNode
        id: 36
        title: 'scoring module'
        type: 0
        posX: 16490
        posY: 15129
        flowTest: 20
        sourceTest: 13
        sourceTestName: runTest
        sourceTestDescription: 'Run other test.'
        ports:
          -
            class_name: TestNodePort
            id: 426
            value: ''
            node: 36
            variable: 81
            variableObject:
              class_name: TestVariable
              id: 81
              name: test
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 13
              parentVariable: 77
            string: '1'
            defaultValue: '0'
            dynamic: '0'
            type: 0
            exposed: '1'
            name: test
            pointer: '0'
            pointerVariable: ''
          -
            class_name: TestNodePort
            id: 427
            value: null
            node: 36
            variable: 82
            variableObject:
              class_name: TestVariable
              id: 82
              name: params
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 13
              parentVariable: 78
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 0
            exposed: '0'
            name: params
            pointer: '0'
            pointerVariable: ''
          -
            class_name: TestNodePort
            id: 428
            value: null
            node: 36
            variable: 83
            variableObject:
              class_name: TestVariable
              id: 83
              name: results
              type: 1
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 13
              parentVariable: 79
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 1
            exposed: '0'
            name: results
            pointer: '0'
            pointerVariable: ''
          -
            class_name: TestNodePort
            id: 429
            value: '0'
            node: 36
            variable: 80
            variableObject:
              class_name: TestVariable
              id: 80
              name: out
              type: 2
              description: ''
              passableThroughUrl: '0'
              value: '0'
              test: 13
              parentVariable: 76
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 2
            exposed: '0'
            name: out
            pointer: '0'
            pointerVariable: ''
          -
            class_name: TestNodePort
            id: 430
            value: 'NULL'
            node: 36
            variable: null
            variableObject: null
            string: '0'
            defaultValue: '0'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: correctness
            pointer: '1'
            pointerVariable: correctness
          -
            class_name: TestNodePort
            id: 431
            value: ''
            node: 36
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '0'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: item
            pointer: '1'
            pointerVariable: item
          -
            class_name: TestNodePort
            id: 432
            value: ''
            node: 36
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '0'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: itemIndex
            pointer: '1'
            pointerVariable: itemIndex
          -
            class_name: TestNodePort
            id: 433
            value: ''
            node: 36
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '0'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: paramBank
            pointer: '1'
            pointerVariable: paramBank
          -
            class_name: TestNodePort
            id: 434
            value: ''
            node: 36
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '0'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: response
            pointer: '1'
            pointerVariable: response
          -
            class_name: TestNodePort
            id: 435
            value: ''
            node: 36
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '1'
            dynamic: '1'
            type: 2
            exposed: '1'
            name: correct
            pointer: '0'
            pointerVariable: ''
          -
            class_name: TestNodePort
            id: 436
            value: ''
            node: 36
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '1'
            dynamic: '1'
            type: 2
            exposed: '1'
            name: incorrect
            pointer: '0'
            pointerVariable: ''
          -
            class_name: TestNodePort
            id: 437
            value: ''
            node: 36
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '1'
            dynamic: '1'
            type: 1
            exposed: '1'
            name: .branch
            pointer: '0'
            pointerVariable: ''
          -
            class_name: TestNodePort
            id: 438
            value: ''
            node: 36
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '1'
            dynamic: '1'
            type: 1
            exposed: '1'
            name: correct
            pointer: '0'
            pointerVariable: ''
          -
            class_name: TestNodePort
            id: 439
            value: ''
            node: 36
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '0'
            dynamic: '1'
            type: 1
            exposed: '1'
            name: correctness
            pointer: '1'
            pointerVariable: correctness
          -
            class_name: TestNodePort
            id: 440
            value: ''
            node: 36
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '0'
            dynamic: '1'
            type: 1
            exposed: '1'
            name: sem
            pointer: '1'
            pointerVariable: sem
          -
            class_name: TestNodePort
            id: 441
            value: ''
            node: 36
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '0'
            dynamic: '1'
            type: 1
            exposed: '1'
            name: theta
            pointer: '1'
            pointerVariable: theta
          -
            class_name: TestNodePort
            id: 442
            value: 'NULL'
            node: 36
            variable: null
            variableObject: null
            string: '0'
            defaultValue: '0'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: itemsAdministered
            pointer: '1'
            pointerVariable: itemsAdministered
          -
            class_name: TestNodePort
            id: 443
            value: ''
            node: 36
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '0'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: settings
            pointer: '1'
            pointerVariable: settings
          -
            class_name: TestNodePort
            id: 444
            value: ''
            node: 36
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '0'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: items
            pointer: '1'
            pointerVariable: items
      -
        class_name: TestNode
        id: 37
        title: 'response processor module'
        type: 0
        posX: 16910
        posY: 15135
        flowTest: 20
        sourceTest: 13
        sourceTestName: runTest
        sourceTestDescription: 'Run other test.'
        ports:
          -
            class_name: TestNodePort
            id: 445
            value: ''
            node: 37
            variable: 81
            variableObject:
              class_name: TestVariable
              id: 81
              name: test
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 13
              parentVariable: 77
            string: '1'
            defaultValue: '0'
            dynamic: '0'
            type: 0
            exposed: '1'
            name: test
            pointer: '0'
            pointerVariable: ''
          -
            class_name: TestNodePort
            id: 446
            value: null
            node: 37
            variable: 82
            variableObject:
              class_name: TestVariable
              id: 82
              name: params
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 13
              parentVariable: 78
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 0
            exposed: '0'
            name: params
            pointer: '0'
            pointerVariable: ''
          -
            class_name: TestNodePort
            id: 447
            value: null
            node: 37
            variable: 83
            variableObject:
              class_name: TestVariable
              id: 83
              name: results
              type: 1
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 13
              parentVariable: 79
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 1
            exposed: '0'
            name: results
            pointer: '0'
            pointerVariable: ''
          -
            class_name: TestNodePort
            id: 448
            value: '0'
            node: 37
            variable: 80
            variableObject:
              class_name: TestVariable
              id: 80
              name: out
              type: 2
              description: ''
              passableThroughUrl: '0'
              value: '0'
              test: 13
              parentVariable: 76
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 2
            exposed: '1'
            name: out
            pointer: '0'
            pointerVariable: ''
          -
            class_name: TestNodePort
            id: 449
            value: ''
            node: 37
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '1'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: correct
            pointer: '0'
            pointerVariable: ''
          -
            class_name: TestNodePort
            id: 450
            value: ''
            node: 37
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '0'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: item
            pointer: '1'
            pointerVariable: item
          -
            class_name: TestNodePort
            id: 451
            value: ''
            node: 37
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '0'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: response
            pointer: '1'
            pointerVariable: response
          -
            class_name: TestNodePort
            id: 452
            value: ''
            node: 37
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '0'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: sem
            pointer: '1'
            pointerVariable: sem
          -
            class_name: TestNodePort
            id: 453
            value: ''
            node: 37
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '0'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: session
            pointer: '1'
            pointerVariable: session
          -
            class_name: TestNodePort
            id: 454
            value: ''
            node: 37
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '0'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: theta
            pointer: '1'
            pointerVariable: theta
          -
            class_name: TestNodePort
            id: 455
            value: ''
            node: 37
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '1'
            dynamic: '1'
            type: 1
            exposed: '1'
            name: responseId
            pointer: '0'
            pointerVariable: ''
          -
            class_name: TestNodePort
            id: 456
            value: ''
            node: 37
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '0'
            dynamic: '1'
            type: 1
            exposed: '1'
            name: itemsAdministered
            pointer: '1'
            pointerVariable: itemsAdministered
          -
            class_name: TestNodePort
            id: 457
            value: 'NULL'
            node: 37
            variable: null
            variableObject: null
            string: '0'
            defaultValue: '0'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: itemsAdministered
            pointer: '1'
            pointerVariable: itemsAdministered
          -
            class_name: TestNodePort
            id: 458
            value: ''
            node: 37
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '0'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: settings
            pointer: '1'
            pointerVariable: settings
          -
            class_name: TestNodePort
            id: 459
            value: ''
            node: 37
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '0'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: itemIndex
            pointer: '1'
            pointerVariable: itemIndex
      -
        class_name: TestNode
        id: 38
        title: 'status check module'
        type: 0
        posX: 16251
        posY: 15699
        flowTest: 20
        sourceTest: 13
        sourceTestName: runTest
        sourceTestDescription: 'Run other test.'
        ports:
          -
            class_name: TestNodePort
            id: 460
            value: ''
            node: 38
            variable: 81
            variableObject:
              class_name: TestVariable
              id: 81
              name: test
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 13
              parentVariable: 77
            string: '1'
            defaultValue: '0'
            dynamic: '0'
            type: 0
            exposed: '1'
            name: test
            pointer: '0'
            pointerVariable: ''
          -
            class_name: TestNodePort
            id: 461
            value: null
            node: 38
            variable: 82
            variableObject:
              class_name: TestVariable
              id: 82
              name: params
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 13
              parentVariable: 78
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 0
            exposed: '0'
            name: params
            pointer: '0'
            pointerVariable: ''
          -
            class_name: TestNodePort
            id: 462
            value: null
            node: 38
            variable: 83
            variableObject:
              class_name: TestVariable
              id: 83
              name: results
              type: 1
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 13
              parentVariable: 79
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 1
            exposed: '0'
            name: results
            pointer: '0'
            pointerVariable: ''
          -
            class_name: TestNodePort
            id: 463
            value: '0'
            node: 38
            variable: 80
            variableObject:
              class_name: TestVariable
              id: 80
              name: out
              type: 2
              description: ''
              passableThroughUrl: '0'
              value: '0'
              test: 13
              parentVariable: 76
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 2
            exposed: '0'
            name: out
            pointer: '0'
            pointerVariable: ''
          -
            class_name: TestNodePort
            id: 464
            value: ''
            node: 38
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '0'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: sem
            pointer: '1'
            pointerVariable: sem
          -
            class_name: TestNodePort
            id: 465
            value: ''
            node: 38
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '0'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: testTimeStarted
            pointer: '1'
            pointerVariable: testTimeStarted
          -
            class_name: TestNodePort
            id: 466
            value: ''
            node: 38
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '1'
            dynamic: '1'
            type: 2
            exposed: '1'
            name: continue
            pointer: '0'
            pointerVariable: ''
          -
            class_name: TestNodePort
            id: 467
            value: ''
            node: 38
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '1'
            dynamic: '1'
            type: 2
            exposed: '1'
            name: stop
            pointer: '0'
            pointerVariable: ''
          -
            class_name: TestNodePort
            id: 468
            value: ''
            node: 38
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '1'
            dynamic: '1'
            type: 1
            exposed: '1'
            name: .branch
            pointer: '0'
            pointerVariable: ''
          -
            class_name: TestNodePort
            id: 469
            value: 'NULL'
            node: 38
            variable: null
            variableObject: null
            string: '0'
            defaultValue: '0'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: itemsAdministered
            pointer: '1'
            pointerVariable: itemsAdministered
          -
            class_name: TestNodePort
            id: 470
            value: ''
            node: 38
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '0'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: settings
            pointer: '1'
            pointerVariable: settings
          -
            class_name: TestNodePort
            id: 471
            value: ''
            node: 38
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '0'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: testTimeLeft
            pointer: '1'
            pointerVariable: testTimeLeft
          -
            class_name: TestNodePort
            id: 472
            value: ''
            node: 38
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '0'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: items
            pointer: '1'
            pointerVariable: items
      -
        class_name: TestNode
        id: 39
        title: 'create settings'
        type: 0
        posX: 14816
        posY: 14740
        flowTest: 20
        sourceTest: 19
        sourceTestName: createList
        sourceTestDescription: 'List creation. Dynamic inputs will be used as list elements (input name as list key, input value as list value).'
        ports:
          -
            class_name: TestNodePort
            id: 473
            value: null
            node: 39
            variable: 113
            variableObject:
              class_name: TestVariable
              id: 113
              name: sourceList
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 19
              parentVariable: null
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 0
            exposed: '0'
            name: sourceList
            pointer: '0'
            pointerVariable: sourceList
          -
            class_name: TestNodePort
            id: 474
            value: null
            node: 39
            variable: 114
            variableObject:
              class_name: TestVariable
              id: 114
              name: result
              type: 1
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 19
              parentVariable: null
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 1
            exposed: '1'
            name: result
            pointer: '0'
            pointerVariable: result
          -
            class_name: TestNodePort
            id: 475
            value: '0'
            node: 39
            variable: 112
            variableObject:
              class_name: TestVariable
              id: 112
              name: out
              type: 2
              description: ''
              passableThroughUrl: '0'
              value: '0'
              test: 19
              parentVariable: null
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 2
            exposed: '1'
            name: out
            pointer: '0'
            pointerVariable: out
          -
            class_name: TestNodePort
            id: 476
            value: ''
            node: 39
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '1'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: contentBalancing
            pointer: '0'
            pointerVariable: contentBalancing
          -
            class_name: TestNodePort
            id: 477
            value: ''
            node: 39
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '1'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: itemBankItems
            pointer: '0'
            pointerVariable: itemBankItems
          -
            class_name: TestNodePort
            id: 478
            value: ''
            node: 39
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '1'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: itemBankTable
            pointer: '0'
            pointerVariable: itemBankTable
          -
            class_name: TestNodePort
            id: 479
            value: ''
            node: 39
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '1'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: itemBankType
            pointer: '0'
            pointerVariable: itemBankType
          -
            class_name: TestNodePort
            id: 480
            value: ''
            node: 39
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '1'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: itemNumLimit
            pointer: '0'
            pointerVariable: itemNumLimit
          -
            class_name: TestNodePort
            id: 481
            value: ''
            node: 39
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '1'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: itemTemplate
            pointer: '0'
            pointerVariable: itemTemplate
          -
            class_name: TestNodePort
            id: 482
            value: ''
            node: 39
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '1'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: itemTimeFullRequired
            pointer: '0'
            pointerVariable: itemTimeFullRequired
          -
            class_name: TestNodePort
            id: 483
            value: ''
            node: 39
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '1'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: itemTimeLimit
            pointer: '0'
            pointerVariable: itemTimeLimit
          -
            class_name: TestNodePort
            id: 484
            value: ''
            node: 39
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '1'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: minAccuracy
            pointer: '0'
            pointerVariable: minAccuracy
          -
            class_name: TestNodePort
            id: 485
            value: ''
            node: 39
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '1'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: nextItemCriterion
            pointer: '0'
            pointerVariable: nextItemCriterion
          -
            class_name: TestNodePort
            id: 486
            value: ''
            node: 39
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '1'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: nextItemRandomesque
            pointer: '0'
            pointerVariable: nextItemRandomesque
          -
            class_name: TestNodePort
            id: 487
            value: ''
            node: 39
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '1'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: responseBank
            pointer: '0'
            pointerVariable: responseBank
          -
            class_name: TestNodePort
            id: 488
            value: ''
            node: 39
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '1'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: scoringMethod
            pointer: '0'
            pointerVariable: scoringMethod
          -
            class_name: TestNodePort
            id: 489
            value: ''
            node: 39
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '1'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: startingTheta
            pointer: '0'
            pointerVariable: startingTheta
          -
            class_name: TestNodePort
            id: 490
            value: ''
            node: 39
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '1'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: testTimeLimit
            pointer: '0'
            pointerVariable: testTimeLimit
          -
            class_name: TestNodePort
            id: 491
            value: ''
            node: 39
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '1'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: testTimeLimitOffset
            pointer: '0'
            pointerVariable: testTimeLimitOffset
          -
            class_name: TestNodePort
            id: 492
            value: ''
            node: 39
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '1'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: responseRequired
            pointer: '0'
            pointerVariable: responseRequired
          -
            class_name: TestNodePort
            id: 493
            value: ''
            node: 39
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '1'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: responseRequiredAlert
            pointer: '0'
            pointerVariable: responseRequiredAlert
      -
        class_name: TestNode
        id: 40
        title: 'set settings'
        type: 0
        posX: 15155
        posY: 14762
        flowTest: 20
        sourceTest: 11
        sourceTestName: set
        sourceTestDescription: 'Promote variables. Use dynamic inputs to declare which variables you want to promote.'
        ports:
          -
            class_name: TestNodePort
            id: 494
            value: '0'
            node: 40
            variable: 75
            variableObject:
              class_name: TestVariable
              id: 75
              name: out
              type: 2
              description: ''
              passableThroughUrl: '0'
              value: '0'
              test: 11
              parentVariable: null
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 2
            exposed: '1'
            name: out
            pointer: '0'
            pointerVariable: out
          -
            class_name: TestNodePort
            id: 495
            value: ''
            node: 40
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '1'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: settings
            pointer: '0'
            pointerVariable: settings
    nodesConnections:
      -
        class_name: TestNodeConnection
        id: 127
        flowTest: 20
        sourceNode: 31
        sourcePort: null
        sourcePortObject: null
        destinationNode: 39
        destinationPort: null
        destinationPortObject: null
        returnFunction: ''
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 128
        flowTest: 20
        sourceNode: 31
        sourcePort: 367
        sourcePortObject:
          class_name: TestNodePort
          id: 367
          value: '[]'
          node: 31
          variable: 117
          variableObject:
            class_name: TestVariable
            id: 117
            name: itemBankItems
            type: 0
            description: ''
            passableThroughUrl: '0'
            value: '[]'
            test: 20
            parentVariable: null
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 1
          exposed: '1'
          name: itemBankItems
          pointer: '0'
          pointerVariable: ''
        destinationNode: 39
        destinationPort: 477
        destinationPortObject:
          class_name: TestNodePort
          id: 477
          value: ''
          node: 39
          variable: null
          variableObject: null
          string: '1'
          defaultValue: '1'
          dynamic: '1'
          type: 0
          exposed: '1'
          name: itemBankItems
          pointer: '0'
          pointerVariable: itemBankItems
        returnFunction: itemBankItems
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 129
        flowTest: 20
        sourceNode: 31
        sourcePort: 368
        sourcePortObject:
          class_name: TestNodePort
          id: 368
          value: null
          node: 31
          variable: 118
          variableObject:
            class_name: TestVariable
            id: 118
            name: itemBankTable
            type: 0
            description: ''
            passableThroughUrl: '0'
            value: null
            test: 20
            parentVariable: null
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 1
          exposed: '1'
          name: itemBankTable
          pointer: '0'
          pointerVariable: ''
        destinationNode: 39
        destinationPort: 478
        destinationPortObject:
          class_name: TestNodePort
          id: 478
          value: ''
          node: 39
          variable: null
          variableObject: null
          string: '1'
          defaultValue: '1'
          dynamic: '1'
          type: 0
          exposed: '1'
          name: itemBankTable
          pointer: '0'
          pointerVariable: itemBankTable
        returnFunction: itemBankTable
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 130
        flowTest: 20
        sourceNode: 31
        sourcePort: 366
        sourcePortObject:
          class_name: TestNodePort
          id: 366
          value: direct
          node: 31
          variable: 116
          variableObject:
            class_name: TestVariable
            id: 116
            name: itemBankType
            type: 0
            description: ''
            passableThroughUrl: '0'
            value: direct
            test: 20
            parentVariable: null
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 1
          exposed: '1'
          name: itemBankType
          pointer: '0'
          pointerVariable: ''
        destinationNode: 39
        destinationPort: 479
        destinationPortObject:
          class_name: TestNodePort
          id: 479
          value: ''
          node: 39
          variable: null
          variableObject: null
          string: '1'
          defaultValue: '1'
          dynamic: '1'
          type: 0
          exposed: '1'
          name: itemBankType
          pointer: '0'
          pointerVariable: itemBankType
        returnFunction: itemBankType
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 131
        flowTest: 20
        sourceNode: 31
        sourcePort: 373
        sourcePortObject:
          class_name: TestNodePort
          id: 373
          value: '[]'
          node: 31
          variable: 123
          variableObject:
            class_name: TestVariable
            id: 123
            name: contentBalancing
            type: 0
            description: ''
            passableThroughUrl: '0'
            value: '[]'
            test: 20
            parentVariable: null
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 1
          exposed: '1'
          name: contentBalancing
          pointer: '0'
          pointerVariable: ''
        destinationNode: 39
        destinationPort: 476
        destinationPortObject:
          class_name: TestNodePort
          id: 476
          value: ''
          node: 39
          variable: null
          variableObject: null
          string: '1'
          defaultValue: '1'
          dynamic: '1'
          type: 0
          exposed: '1'
          name: contentBalancing
          pointer: '0'
          pointerVariable: contentBalancing
        returnFunction: contentBalancing
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 132
        flowTest: 20
        sourceNode: 31
        sourcePort: 374
        sourcePortObject:
          class_name: TestNodePort
          id: 374
          value: '0'
          node: 31
          variable: 124
          variableObject:
            class_name: TestVariable
            id: 124
            name: startingTheta
            type: 0
            description: ''
            passableThroughUrl: '0'
            value: '0'
            test: 20
            parentVariable: null
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 1
          exposed: '1'
          name: startingTheta
          pointer: '0'
          pointerVariable: ''
        destinationNode: 39
        destinationPort: 489
        destinationPortObject:
          class_name: TestNodePort
          id: 489
          value: ''
          node: 39
          variable: null
          variableObject: null
          string: '1'
          defaultValue: '1'
          dynamic: '1'
          type: 0
          exposed: '1'
          name: startingTheta
          pointer: '0'
          pointerVariable: startingTheta
        returnFunction: startingTheta
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 133
        flowTest: 20
        sourceNode: 34
        sourcePort: 408
        sourcePortObject:
          class_name: TestNodePort
          id: 408
          value: null
          node: 34
          variable: 108
          variableObject:
            class_name: TestVariable
            id: 108
            name: outOfTime
            type: 2
            description: ''
            passableThroughUrl: '0'
            value: null
            test: 18
            parentVariable: null
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 2
          exposed: '1'
          name: outOfTime
          pointer: '0'
          pointerVariable: ''
        destinationNode: 36
        destinationPort: null
        destinationPortObject: null
        returnFunction: outOfTime
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 134
        flowTest: 20
        sourceNode: 34
        sourcePort: 402
        sourcePortObject:
          class_name: TestNodePort
          id: 402
          value: '0'
          node: 34
          variable: 102
          variableObject:
            class_name: TestVariable
            id: 102
            name: submitted
            type: 2
            description: ''
            passableThroughUrl: '0'
            value: '0'
            test: 18
            parentVariable: null
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 2
          exposed: '1'
          name: submitted
          pointer: '0'
          pointerVariable: ''
        destinationNode: 36
        destinationPort: null
        destinationPortObject: null
        returnFunction: submitted
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 135
        flowTest: 20
        sourceNode: 31
        sourcePort: 369
        sourcePortObject:
          class_name: TestNodePort
          id: 369
          value: '0'
          node: 31
          variable: 119
          variableObject:
            class_name: TestVariable
            id: 119
            name: testTimeLimit
            type: 0
            description: ''
            passableThroughUrl: '0'
            value: '0'
            test: 20
            parentVariable: null
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 1
          exposed: '1'
          name: testTimeLimit
          pointer: '0'
          pointerVariable: ''
        destinationNode: 39
        destinationPort: 490
        destinationPortObject:
          class_name: TestNodePort
          id: 490
          value: ''
          node: 39
          variable: null
          variableObject: null
          string: '1'
          defaultValue: '1'
          dynamic: '1'
          type: 0
          exposed: '1'
          name: testTimeLimit
          pointer: '0'
          pointerVariable: testTimeLimit
        returnFunction: testTimeLimit
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 136
        flowTest: 20
        sourceNode: 31
        sourcePort: 372
        sourcePortObject:
          class_name: TestNodePort
          id: 372
          value: '0'
          node: 31
          variable: 122
          variableObject:
            class_name: TestVariable
            id: 122
            name: testTimeLimitOffset
            type: 0
            description: ''
            passableThroughUrl: '0'
            value: '0'
            test: 20
            parentVariable: null
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 1
          exposed: '1'
          name: testTimeLimitOffset
          pointer: '0'
          pointerVariable: ''
        destinationNode: 39
        destinationPort: 491
        destinationPortObject:
          class_name: TestNodePort
          id: 491
          value: ''
          node: 39
          variable: null
          variableObject: null
          string: '1'
          defaultValue: '1'
          dynamic: '1'
          type: 0
          exposed: '1'
          name: testTimeLimitOffset
          pointer: '0'
          pointerVariable: testTimeLimitOffset
        returnFunction: testTimeLimitOffset
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 137
        flowTest: 20
        sourceNode: 33
        sourcePort: 391
        sourcePortObject:
          class_name: TestNodePort
          id: 391
          value: '0'
          node: 33
          variable: 91
          variableObject:
            class_name: TestVariable
            id: 91
            name: out
            type: 2
            description: ''
            passableThroughUrl: '0'
            value: '0'
            test: 17
            parentVariable: null
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 2
          exposed: '1'
          name: out
          pointer: '0'
          pointerVariable: ''
        destinationNode: 35
        destinationPort: null
        destinationPortObject: null
        returnFunction: out
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 138
        flowTest: 20
        sourceNode: 33
        sourcePort: 394
        sourcePortObject:
          class_name: TestNodePort
          id: 394
          value: null
          node: 33
          variable: 94
          variableObject:
            class_name: TestVariable
            id: 94
            name: cbControl
            type: 1
            description: ''
            passableThroughUrl: '0'
            value: null
            test: 17
            parentVariable: null
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 1
          exposed: '1'
          name: cbControl
          pointer: '0'
          pointerVariable: ''
        destinationNode: 35
        destinationPort: 416
        destinationPortObject:
          class_name: TestNodePort
          id: 416
          value: ''
          node: 35
          variable: null
          variableObject: null
          string: '1'
          defaultValue: '1'
          dynamic: '1'
          type: 0
          exposed: '1'
          name: cbControl
          pointer: '0'
          pointerVariable: ''
        returnFunction: cbControl
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 139
        flowTest: 20
        sourceNode: 33
        sourcePort: 393
        sourcePortObject:
          class_name: TestNodePort
          id: 393
          value: null
          node: 33
          variable: 93
          variableObject:
            class_name: TestVariable
            id: 93
            name: cbGroup
            type: 1
            description: ''
            passableThroughUrl: '0'
            value: null
            test: 17
            parentVariable: null
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 1
          exposed: '1'
          name: cbGroup
          pointer: '0'
          pointerVariable: ''
        destinationNode: 35
        destinationPort: 417
        destinationPortObject:
          class_name: TestNodePort
          id: 417
          value: ''
          node: 35
          variable: null
          variableObject: null
          string: '1'
          defaultValue: '1'
          dynamic: '1'
          type: 0
          exposed: '1'
          name: cbGroup
          pointer: '0'
          pointerVariable: ''
        returnFunction: cbGroup
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 140
        flowTest: 20
        sourceNode: 35
        sourcePort: 415
        sourcePortObject:
          class_name: TestNodePort
          id: 415
          value: '0'
          node: 35
          variable: 80
          variableObject:
            class_name: TestVariable
            id: 80
            name: out
            type: 2
            description: ''
            passableThroughUrl: '0'
            value: '0'
            test: 13
            parentVariable: 76
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 2
          exposed: '1'
          name: out
          pointer: '0'
          pointerVariable: ''
        destinationNode: 34
        destinationPort: null
        destinationPortObject: null
        returnFunction: out
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 141
        flowTest: 20
        sourceNode: 36
        sourcePort: 435
        sourcePortObject:
          class_name: TestNodePort
          id: 435
          value: ''
          node: 36
          variable: null
          variableObject: null
          string: '1'
          defaultValue: '1'
          dynamic: '1'
          type: 2
          exposed: '1'
          name: correct
          pointer: '0'
          pointerVariable: ''
        destinationNode: 37
        destinationPort: null
        destinationPortObject: null
        returnFunction: correct
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 142
        flowTest: 20
        sourceNode: 36
        sourcePort: 436
        sourcePortObject:
          class_name: TestNodePort
          id: 436
          value: ''
          node: 36
          variable: null
          variableObject: null
          string: '1'
          defaultValue: '1'
          dynamic: '1'
          type: 2
          exposed: '1'
          name: incorrect
          pointer: '0'
          pointerVariable: ''
        destinationNode: 37
        destinationPort: null
        destinationPortObject: null
        returnFunction: incorrect
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 143
        flowTest: 20
        sourceNode: 36
        sourcePort: 438
        sourcePortObject:
          class_name: TestNodePort
          id: 438
          value: ''
          node: 36
          variable: null
          variableObject: null
          string: '1'
          defaultValue: '1'
          dynamic: '1'
          type: 1
          exposed: '1'
          name: correct
          pointer: '0'
          pointerVariable: ''
        destinationNode: 37
        destinationPort: 449
        destinationPortObject:
          class_name: TestNodePort
          id: 449
          value: ''
          node: 37
          variable: null
          variableObject: null
          string: '1'
          defaultValue: '1'
          dynamic: '1'
          type: 0
          exposed: '1'
          name: correct
          pointer: '0'
          pointerVariable: ''
        returnFunction: correct
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 144
        flowTest: 20
        sourceNode: 37
        sourcePort: 448
        sourcePortObject:
          class_name: TestNodePort
          id: 448
          value: '0'
          node: 37
          variable: 80
          variableObject:
            class_name: TestVariable
            id: 80
            name: out
            type: 2
            description: ''
            passableThroughUrl: '0'
            value: '0'
            test: 13
            parentVariable: 76
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 2
          exposed: '1'
          name: out
          pointer: '0'
          pointerVariable: ''
        destinationNode: 38
        destinationPort: null
        destinationPortObject: null
        returnFunction: out
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 145
        flowTest: 20
        sourceNode: 38
        sourcePort: 466
        sourcePortObject:
          class_name: TestNodePort
          id: 466
          value: ''
          node: 38
          variable: null
          variableObject: null
          string: '1'
          defaultValue: '1'
          dynamic: '1'
          type: 2
          exposed: '1'
          name: continue
          pointer: '0'
          pointerVariable: ''
        destinationNode: 35
        destinationPort: null
        destinationPortObject: null
        returnFunction: continue
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 146
        flowTest: 20
        sourceNode: 38
        sourcePort: 467
        sourcePortObject:
          class_name: TestNodePort
          id: 467
          value: ''
          node: 38
          variable: null
          variableObject: null
          string: '1'
          defaultValue: '1'
          dynamic: '1'
          type: 2
          exposed: '1'
          name: stop
          pointer: '0'
          pointerVariable: ''
        destinationNode: 32
        destinationPort: null
        destinationPortObject: null
        returnFunction: stop
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 147
        flowTest: 20
        sourceNode: 31
        sourcePort: 383
        sourcePortObject:
          class_name: TestNodePort
          id: 383
          value: null
          node: 31
          variable: 133
          variableObject:
            class_name: TestVariable
            id: 133
            name: nextItemSelectorModule
            type: 0
            description: ''
            passableThroughUrl: '0'
            value: null
            test: 20
            parentVariable: null
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 1
          exposed: '0'
          name: nextItemSelectorModule
          pointer: '0'
          pointerVariable: ''
        destinationNode: 35
        destinationPort: 412
        destinationPortObject:
          class_name: TestNodePort
          id: 412
          value: ''
          node: 35
          variable: 81
          variableObject:
            class_name: TestVariable
            id: 81
            name: test
            type: 0
            description: ''
            passableThroughUrl: '0'
            value: null
            test: 13
            parentVariable: 77
          string: '1'
          defaultValue: '0'
          dynamic: '0'
          type: 0
          exposed: '1'
          name: test
          pointer: '0'
          pointerVariable: ''
        returnFunction: nextItemSelectorModule
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 148
        flowTest: 20
        sourceNode: 31
        sourcePort: 384
        sourcePortObject:
          class_name: TestNodePort
          id: 384
          value: null
          node: 31
          variable: 134
          variableObject:
            class_name: TestVariable
            id: 134
            name: scoringModule
            type: 0
            description: ''
            passableThroughUrl: '0'
            value: null
            test: 20
            parentVariable: null
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 1
          exposed: '0'
          name: scoringModule
          pointer: '0'
          pointerVariable: ''
        destinationNode: 36
        destinationPort: 426
        destinationPortObject:
          class_name: TestNodePort
          id: 426
          value: ''
          node: 36
          variable: 81
          variableObject:
            class_name: TestVariable
            id: 81
            name: test
            type: 0
            description: ''
            passableThroughUrl: '0'
            value: null
            test: 13
            parentVariable: 77
          string: '1'
          defaultValue: '0'
          dynamic: '0'
          type: 0
          exposed: '1'
          name: test
          pointer: '0'
          pointerVariable: ''
        returnFunction: scoringModule
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 149
        flowTest: 20
        sourceNode: 31
        sourcePort: 385
        sourcePortObject:
          class_name: TestNodePort
          id: 385
          value: null
          node: 31
          variable: 135
          variableObject:
            class_name: TestVariable
            id: 135
            name: responseProcessorModule
            type: 0
            description: ''
            passableThroughUrl: '0'
            value: null
            test: 20
            parentVariable: null
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 1
          exposed: '0'
          name: responseProcessorModule
          pointer: '0'
          pointerVariable: ''
        destinationNode: 37
        destinationPort: 445
        destinationPortObject:
          class_name: TestNodePort
          id: 445
          value: ''
          node: 37
          variable: 81
          variableObject:
            class_name: TestVariable
            id: 81
            name: test
            type: 0
            description: ''
            passableThroughUrl: '0'
            value: null
            test: 13
            parentVariable: 77
          string: '1'
          defaultValue: '0'
          dynamic: '0'
          type: 0
          exposed: '1'
          name: test
          pointer: '0'
          pointerVariable: ''
        returnFunction: responseProcessorModule
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 150
        flowTest: 20
        sourceNode: 31
        sourcePort: 386
        sourcePortObject:
          class_name: TestNodePort
          id: 386
          value: null
          node: 31
          variable: 136
          variableObject:
            class_name: TestVariable
            id: 136
            name: statusCheckModule
            type: 0
            description: ''
            passableThroughUrl: '0'
            value: null
            test: 20
            parentVariable: null
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 1
          exposed: '0'
          name: statusCheckModule
          pointer: '0'
          pointerVariable: ''
        destinationNode: 38
        destinationPort: 460
        destinationPortObject:
          class_name: TestNodePort
          id: 460
          value: ''
          node: 38
          variable: 81
          variableObject:
            class_name: TestVariable
            id: 81
            name: test
            type: 0
            description: ''
            passableThroughUrl: '0'
            value: null
            test: 13
            parentVariable: 77
          string: '1'
          defaultValue: '0'
          dynamic: '0'
          type: 0
          exposed: '1'
          name: test
          pointer: '0'
          pointerVariable: ''
        returnFunction: statusCheckModule
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 151
        flowTest: 20
        sourceNode: 35
        sourcePort: 424
        sourcePortObject:
          class_name: TestNodePort
          id: 424
          value: ''
          node: 35
          variable: null
          variableObject: null
          string: '1'
          defaultValue: '1'
          dynamic: '1'
          type: 1
          exposed: '1'
          name: nextItemSafe
          pointer: '0'
          pointerVariable: ''
        destinationNode: 34
        destinationPort: 410
        destinationPortObject:
          class_name: TestNodePort
          id: 410
          value: null
          node: 34
          variable: 110
          variableObject:
            class_name: TestVariable
            id: 110
            name: itemSafe
            type: 0
            description: ''
            passableThroughUrl: '0'
            value: null
            test: 18
            parentVariable: null
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 0
          exposed: '1'
          name: itemSafe
          pointer: '0'
          pointerVariable: ''
        returnFunction: nextItemSafe
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 152
        flowTest: 20
        sourceNode: 31
        sourcePort: 381
        sourcePortObject:
          class_name: TestNodePort
          id: 381
          value: '0'
          node: 31
          variable: 131
          variableObject:
            class_name: TestVariable
            id: 131
            name: itemNumLimit
            type: 0
            description: ''
            passableThroughUrl: '0'
            value: '0'
            test: 20
            parentVariable: null
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 1
          exposed: '1'
          name: itemNumLimit
          pointer: '0'
          pointerVariable: ''
        destinationNode: 39
        destinationPort: 480
        destinationPortObject:
          class_name: TestNodePort
          id: 480
          value: ''
          node: 39
          variable: null
          variableObject: null
          string: '1'
          defaultValue: '1'
          dynamic: '1'
          type: 0
          exposed: '1'
          name: itemNumLimit
          pointer: '0'
          pointerVariable: itemNumLimit
        returnFunction: itemNumLimit
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 153
        flowTest: 20
        sourceNode: 31
        sourcePort: 379
        sourcePortObject:
          class_name: TestNodePort
          id: 379
          value: null
          node: 31
          variable: 129
          variableObject:
            class_name: TestVariable
            id: 129
            name: itemTemplate
            type: 0
            description: ''
            passableThroughUrl: '0'
            value: null
            test: 20
            parentVariable: null
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 1
          exposed: '1'
          name: itemTemplate
          pointer: '0'
          pointerVariable: ''
        destinationNode: 39
        destinationPort: 481
        destinationPortObject:
          class_name: TestNodePort
          id: 481
          value: ''
          node: 39
          variable: null
          variableObject: null
          string: '1'
          defaultValue: '1'
          dynamic: '1'
          type: 0
          exposed: '1'
          name: itemTemplate
          pointer: '0'
          pointerVariable: itemTemplate
        returnFunction: itemTemplate
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 154
        flowTest: 20
        sourceNode: 31
        sourcePort: 371
        sourcePortObject:
          class_name: TestNodePort
          id: 371
          value: '0'
          node: 31
          variable: 121
          variableObject:
            class_name: TestVariable
            id: 121
            name: itemTimeFullRequired
            type: 0
            description: ''
            passableThroughUrl: '0'
            value: '0'
            test: 20
            parentVariable: null
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 1
          exposed: '1'
          name: itemTimeFullRequired
          pointer: '0'
          pointerVariable: ''
        destinationNode: 39
        destinationPort: 482
        destinationPortObject:
          class_name: TestNodePort
          id: 482
          value: ''
          node: 39
          variable: null
          variableObject: null
          string: '1'
          defaultValue: '1'
          dynamic: '1'
          type: 0
          exposed: '1'
          name: itemTimeFullRequired
          pointer: '0'
          pointerVariable: itemTimeFullRequired
        returnFunction: itemTimeFullRequired
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 155
        flowTest: 20
        sourceNode: 31
        sourcePort: 370
        sourcePortObject:
          class_name: TestNodePort
          id: 370
          value: '0'
          node: 31
          variable: 120
          variableObject:
            class_name: TestVariable
            id: 120
            name: itemTimeLimit
            type: 0
            description: ''
            passableThroughUrl: '0'
            value: '0'
            test: 20
            parentVariable: null
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 1
          exposed: '1'
          name: itemTimeLimit
          pointer: '0'
          pointerVariable: ''
        destinationNode: 39
        destinationPort: 483
        destinationPortObject:
          class_name: TestNodePort
          id: 483
          value: ''
          node: 39
          variable: null
          variableObject: null
          string: '1'
          defaultValue: '1'
          dynamic: '1'
          type: 0
          exposed: '1'
          name: itemTimeLimit
          pointer: '0'
          pointerVariable: itemTimeLimit
        returnFunction: itemTimeLimit
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 156
        flowTest: 20
        sourceNode: 31
        sourcePort: 382
        sourcePortObject:
          class_name: TestNodePort
          id: 382
          value: '1'
          node: 31
          variable: 132
          variableObject:
            class_name: TestVariable
            id: 132
            name: minAccuracy
            type: 0
            description: ''
            passableThroughUrl: '0'
            value: '1'
            test: 20
            parentVariable: null
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 1
          exposed: '1'
          name: minAccuracy
          pointer: '0'
          pointerVariable: ''
        destinationNode: 39
        destinationPort: 484
        destinationPortObject:
          class_name: TestNodePort
          id: 484
          value: ''
          node: 39
          variable: null
          variableObject: null
          string: '1'
          defaultValue: '1'
          dynamic: '1'
          type: 0
          exposed: '1'
          name: minAccuracy
          pointer: '0'
          pointerVariable: minAccuracy
        returnFunction: minAccuracy
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 157
        flowTest: 20
        sourceNode: 31
        sourcePort: 375
        sourcePortObject:
          class_name: TestNodePort
          id: 375
          value: MFI
          node: 31
          variable: 125
          variableObject:
            class_name: TestVariable
            id: 125
            name: nextItemCriterion
            type: 0
            description: ''
            passableThroughUrl: '0'
            value: MFI
            test: 20
            parentVariable: null
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 1
          exposed: '1'
          name: nextItemCriterion
          pointer: '0'
          pointerVariable: ''
        destinationNode: 39
        destinationPort: 485
        destinationPortObject:
          class_name: TestNodePort
          id: 485
          value: ''
          node: 39
          variable: null
          variableObject: null
          string: '1'
          defaultValue: '1'
          dynamic: '1'
          type: 0
          exposed: '1'
          name: nextItemCriterion
          pointer: '0'
          pointerVariable: nextItemCriterion
        returnFunction: nextItemCriterion
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 158
        flowTest: 20
        sourceNode: 31
        sourcePort: 376
        sourcePortObject:
          class_name: TestNodePort
          id: 376
          value: '1'
          node: 31
          variable: 126
          variableObject:
            class_name: TestVariable
            id: 126
            name: nextItemRandomesque
            type: 0
            description: ''
            passableThroughUrl: '0'
            value: '1'
            test: 20
            parentVariable: null
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 1
          exposed: '1'
          name: nextItemRandomesque
          pointer: '0'
          pointerVariable: ''
        destinationNode: 39
        destinationPort: 486
        destinationPortObject:
          class_name: TestNodePort
          id: 486
          value: ''
          node: 39
          variable: null
          variableObject: null
          string: '1'
          defaultValue: '1'
          dynamic: '1'
          type: 0
          exposed: '1'
          name: nextItemRandomesque
          pointer: '0'
          pointerVariable: nextItemRandomesque
        returnFunction: nextItemRandomesque
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 159
        flowTest: 20
        sourceNode: 31
        sourcePort: 378
        sourcePortObject:
          class_name: TestNodePort
          id: 378
          value: null
          node: 31
          variable: 128
          variableObject:
            class_name: TestVariable
            id: 128
            name: responseBank
            type: 0
            description: ''
            passableThroughUrl: '0'
            value: null
            test: 20
            parentVariable: null
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 1
          exposed: '1'
          name: responseBank
          pointer: '0'
          pointerVariable: ''
        destinationNode: 39
        destinationPort: 487
        destinationPortObject:
          class_name: TestNodePort
          id: 487
          value: ''
          node: 39
          variable: null
          variableObject: null
          string: '1'
          defaultValue: '1'
          dynamic: '1'
          type: 0
          exposed: '1'
          name: responseBank
          pointer: '0'
          pointerVariable: responseBank
        returnFunction: responseBank
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 160
        flowTest: 20
        sourceNode: 31
        sourcePort: 377
        sourcePortObject:
          class_name: TestNodePort
          id: 377
          value: BM
          node: 31
          variable: 127
          variableObject:
            class_name: TestVariable
            id: 127
            name: scoringMethod
            type: 0
            description: ''
            passableThroughUrl: '0'
            value: BM
            test: 20
            parentVariable: null
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 1
          exposed: '1'
          name: scoringMethod
          pointer: '0'
          pointerVariable: ''
        destinationNode: 39
        destinationPort: 488
        destinationPortObject:
          class_name: TestNodePort
          id: 488
          value: ''
          node: 39
          variable: null
          variableObject: null
          string: '1'
          defaultValue: '1'
          dynamic: '1'
          type: 0
          exposed: '1'
          name: scoringMethod
          pointer: '0'
          pointerVariable: scoringMethod
        returnFunction: scoringMethod
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 161
        flowTest: 20
        sourceNode: 39
        sourcePort: 475
        sourcePortObject:
          class_name: TestNodePort
          id: 475
          value: '0'
          node: 39
          variable: 112
          variableObject:
            class_name: TestVariable
            id: 112
            name: out
            type: 2
            description: ''
            passableThroughUrl: '0'
            value: '0'
            test: 19
            parentVariable: null
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 2
          exposed: '1'
          name: out
          pointer: '0'
          pointerVariable: out
        destinationNode: 40
        destinationPort: null
        destinationPortObject: null
        returnFunction: out
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 162
        flowTest: 20
        sourceNode: 39
        sourcePort: 474
        sourcePortObject:
          class_name: TestNodePort
          id: 474
          value: null
          node: 39
          variable: 114
          variableObject:
            class_name: TestVariable
            id: 114
            name: result
            type: 1
            description: ''
            passableThroughUrl: '0'
            value: null
            test: 19
            parentVariable: null
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 1
          exposed: '1'
          name: result
          pointer: '0'
          pointerVariable: result
        destinationNode: 40
        destinationPort: 495
        destinationPortObject:
          class_name: TestNodePort
          id: 495
          value: ''
          node: 40
          variable: null
          variableObject: null
          string: '1'
          defaultValue: '1'
          dynamic: '1'
          type: 0
          exposed: '1'
          name: settings
          pointer: '0'
          pointerVariable: settings
        returnFunction: result
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 163
        flowTest: 20
        sourceNode: 40
        sourcePort: 494
        sourcePortObject:
          class_name: TestNodePort
          id: 494
          value: '0'
          node: 40
          variable: 75
          variableObject:
            class_name: TestVariable
            id: 75
            name: out
            type: 2
            description: ''
            passableThroughUrl: '0'
            value: '0'
            test: 11
            parentVariable: null
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 2
          exposed: '1'
          name: out
          pointer: '0'
          pointerVariable: out
        destinationNode: 33
        destinationPort: null
        destinationPortObject: null
        returnFunction: out
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 164
        flowTest: 20
        sourceNode: 31
        sourcePort: 387
        sourcePortObject:
          class_name: TestNodePort
          id: 387
          value: null
          node: 31
          variable: 137
          variableObject:
            class_name: TestVariable
            id: 137
            name: responseRequired
            type: 0
            description: ''
            passableThroughUrl: '0'
            value: null
            test: 20
            parentVariable: null
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 1
          exposed: '0'
          name: responseRequired
          pointer: '0'
          pointerVariable: responseRequired
        destinationNode: 39
        destinationPort: 492
        destinationPortObject:
          class_name: TestNodePort
          id: 492
          value: ''
          node: 39
          variable: null
          variableObject: null
          string: '1'
          defaultValue: '1'
          dynamic: '1'
          type: 0
          exposed: '1'
          name: responseRequired
          pointer: '0'
          pointerVariable: responseRequired
        returnFunction: responseRequired
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 165
        flowTest: 20
        sourceNode: 31
        sourcePort: 388
        sourcePortObject:
          class_name: TestNodePort
          id: 388
          value: null
          node: 31
          variable: 138
          variableObject:
            class_name: TestVariable
            id: 138
            name: responseRequiredAlert
            type: 0
            description: ''
            passableThroughUrl: '0'
            value: null
            test: 20
            parentVariable: null
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 1
          exposed: '0'
          name: responseRequiredAlert
          pointer: '0'
          pointerVariable: responseRequiredAlert
        destinationNode: 39
        destinationPort: 493
        destinationPortObject:
          class_name: TestNodePort
          id: 493
          value: ''
          node: 39
          variable: null
          variableObject: null
          string: '1'
          defaultValue: '1'
          dynamic: '1'
          type: 0
          exposed: '1'
          name: responseRequiredAlert
          pointer: '0'
          pointerVariable: responseRequiredAlert
        returnFunction: responseRequiredAlert
        automatic: '0'
        defaultReturnFunction: '1'
    tags: ''
    groups: ''
    starterContent: true
    hash: 488f9de26852572d39dfc12eb77900306957e929
  -
    class_name: Test
    id: 21
    name: _CATNextItemSelectorModule
    accessibility: 0
    archived: '0'
    visibility: 2
    type: 0
    code: |
      library(catR)
      
      getSafeItem = function(item) {
        item = as.list(item)
        item$correct = NULL
        
        if(is.character(item$responseOptions)) { item$responseOptions = fromJSON(item$responseOptions) }
        responseOptionsRandomOrder = item$responseOptions$optionsRandomOrder == "1"
        orderedOptions = c()
      
        if(length(item$responseOptions$options) > 0) {
          if(responseOptionsRandomOrder) {
            orderedOptions = item$responseOptions$options[sample(1:length(item$responseOptions$options))]
          } else {
            orderedOptions = item$responseOptions$options
          }
        }
        item$responseOptions$options = orderedOptions
        return(item)
      }
      
      currentIndex = length(itemsAdministered) + 1
      itemsNum = dim(items)[1]
      nextItemIndex = 0
      if(itemsNum > 0) {
        for(i in 1:itemsNum) {
          fixedIndex = items[i,"fixedIndex"]
          if(!is.na(fixedIndex) && !is.null(fixedIndex) && fixedIndex != "" && fixedIndex != 0){
            concerto.log(fixedIndex, "fixedIndex")
            if(fixedIndex == currentIndex) {
              nextItemIndex = i
            } else {
              itemsAdministered = unique(c(itemsAdministered, i))
            }
          }
        }
      }
      
      if(nextItemIndex == 0) {
        concerto.log(itemsAdministered, "out")
        result = nextItem(paramBank, theta=theta, out=itemsAdministered, criterion=settings$nextItemCriterion, method=settings$scoringMethod, randomesque=settings$nextItemRandomesque, cbGroup=cbGroup, cbControl=cbControl)
        nextItemIndex = result$item
      }
      concerto.log(nextItemIndex, "next item index")
      nextItem = items[nextItemIndex,]
      nextItemSafe = getSafeItem(nextItem)
      
    description: ''
    variables:
      -
        class_name: TestVariable
        id: 141
        name: out
        type: 2
        description: ''
        passableThroughUrl: '0'
        value: '0'
        test: 21
        parentVariable: null
      -
        class_name: TestVariable
        id: 142
        name: paramBank
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 21
        parentVariable: null
      -
        class_name: TestVariable
        id: 143
        name: theta
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 21
        parentVariable: null
      -
        class_name: TestVariable
        id: 144
        name: itemsAdministered
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 21
        parentVariable: null
      -
        class_name: TestVariable
        id: 145
        name: cbGroup
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 21
        parentVariable: null
      -
        class_name: TestVariable
        id: 146
        name: cbControl
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 21
        parentVariable: null
      -
        class_name: TestVariable
        id: 147
        name: items
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 21
        parentVariable: null
      -
        class_name: TestVariable
        id: 148
        name: nextItemIndex
        type: 1
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 21
        parentVariable: null
      -
        class_name: TestVariable
        id: 149
        name: nextItem
        type: 1
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 21
        parentVariable: null
      -
        class_name: TestVariable
        id: 150
        name: nextItemSafe
        type: 1
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 21
        parentVariable: null
      -
        class_name: TestVariable
        id: 151
        name: settings
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 21
        parentVariable: null
    sourceWizard: null
    sourceWizardTest: null
    nodes: {  }
    nodesConnections: {  }
    tags: ''
    groups: ''
    starterContent: true
    hash: 049b8923a96d15e84004e2c74ada7e22b94a0cb1
  -
    class_name: Test
    id: 22
    name: _CATResponseProcessorModule
    accessibility: 0
    archived: '0'
    visibility: 2
    type: 0
    code: |
      getSessionId = function(session) {
        id = 0
        if(!is.null(session) && is.list(session)) {
          id = session$id
        } else {
          id = paste0("i",concerto$session$id)
        }
        return(id)
      }
      
      saveResponse = function(responseBank, session, response, item, correct, theta, sem) {
        responseBank = fromJSON(responseBank)
        if(is.null(responseBank$table)) {
          concerto.log("no response bank defined, skipping response saving")
          return(NULL)
        }
      
        sql = "
      INSERT INTO {{table}} 
      ({{itemIdColumn}}, {{responseColumn}}, {{timeTakenColumn}}, {{sessionIdColumn}}, {{correctColumn}}, {{thetaColumn}}, {{semColumn}}) 
      VALUES ({{itemId}}, '{{response}}', {{timeTaken}}, '{{sessionId}}', {{correct}}, {{theta}}, {{sem}})
      "
        concerto.table.query(sql, list(
          table=responseBank$table,
          sessionIdColumn=responseBank$columns$session_id,
          sessionId=getSessionId(session),
          itemIdColumn=responseBank$columns$item_id,
          itemId=item$id,
          responseColumn=responseBank$columns$response,
          response=response$response,
          timeTakenColumn=responseBank$columns$timeTaken,
          timeTaken=response$timeTaken, #could use time difference
          correctColumn=responseBank$columns$correct,
          correct=correct,
          thetaColumn=responseBank$columns$theta,
          theta=theta,
          semColumn=responseBank$columns$sem,
          sem=sem
        ))
        return(concerto.table.lastInsertId())
      }
      
      itemsAdministered = unique(c(itemsAdministered, itemIndex))
      responseId = saveResponse(settings$responseBank, session, response, item, correct, theta, sem)
      
    description: ''
    variables:
      -
        class_name: TestVariable
        id: 152
        name: out
        type: 2
        description: ''
        passableThroughUrl: '0'
        value: '0'
        test: 22
        parentVariable: null
      -
        class_name: TestVariable
        id: 153
        name: response
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 22
        parentVariable: null
      -
        class_name: TestVariable
        id: 154
        name: session
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 22
        parentVariable: null
      -
        class_name: TestVariable
        id: 155
        name: item
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 22
        parentVariable: null
      -
        class_name: TestVariable
        id: 156
        name: correct
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 22
        parentVariable: null
      -
        class_name: TestVariable
        id: 157
        name: theta
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 22
        parentVariable: null
      -
        class_name: TestVariable
        id: 158
        name: responseId
        type: 1
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 22
        parentVariable: null
      -
        class_name: TestVariable
        id: 159
        name: sem
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 22
        parentVariable: null
      -
        class_name: TestVariable
        id: 160
        name: itemsAdministered
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 22
        parentVariable: null
      -
        class_name: TestVariable
        id: 161
        name: itemsAdministered
        type: 1
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 22
        parentVariable: null
      -
        class_name: TestVariable
        id: 162
        name: settings
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 22
        parentVariable: null
      -
        class_name: TestVariable
        id: 163
        name: itemIndex
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 22
        parentVariable: null
    sourceWizard: null
    sourceWizardTest: null
    nodes: {  }
    nodesConnections: {  }
    tags: ''
    groups: ''
    starterContent: true
    hash: 720c34eb0f2862c88a4a85e979eb1fcd45296801
  -
    class_name: Test
    id: 23
    name: _CATStatusCheckModule
    accessibility: 0
    archived: '0'
    visibility: 2
    type: 0
    code: |
      isOutOfTime = function(testTimeLimit, testTimeStarted, itemTimeLimit, itemTimeFullRequired) {
        startedAgo = as.numeric(Sys.time()) - testTimeStarted
        testTimeLeft = testTimeLimit - startedAgo
        if(testTimeLimit > 0) {
          if(testTimeLeft <= 0) { return(T) }
          if(testTimeLeft < itemTimeLimit && itemTimeFullRequired) { return(T) }
        }
        return(F)
      }
      
      getBranch = function(testTimeLimit, testTimeStarted, itemTimeLimit, itemTimeFullRequired, itemNumLimit, minAccuracy, itemsAdministered, itemsNum, sem) {
        if(isOutOfTime(testTimeLimit, testTimeStarted, itemTimeLimit, itemTimeFullRequired)) {
          concerto.log("time out", "test status")
          return("stop")
        }
      
        if(itemNumLimit > 0 && length(itemsAdministered) >= itemNumLimit || length(itemsAdministered) >= itemsNum) {
          concerto.log("maximum items reached", "test status")
          return("stop")
        }
      
        if(minAccuracy != 0 && minAccuracy >= sem) {
          concerto.log("minimum accuracy", "test status")
          return("stop")
        }
        concerto.log("continue", "test status")
        return("continue")
      }
      
      .branch = getBranch(
        as.numeric(settings$testTimeLimit), 
        testTimeStarted, 
        as.numeric(settings$itemTimeLimit), 
        settings$itemTimeFullRequired == "1", 
        as.numeric(settings$itemNumLimit), 
        as.numeric(settings$minAccuracy), 
        itemsAdministered, 
        dim(items)[1], 
        sem
      )
      
    description: ''
    variables:
      -
        class_name: TestVariable
        id: 164
        name: continue
        type: 2
        description: ''
        passableThroughUrl: '0'
        value: '0'
        test: 23
        parentVariable: null
      -
        class_name: TestVariable
        id: 165
        name: testTimeLeft
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 23
        parentVariable: null
      -
        class_name: TestVariable
        id: 166
        name: testTimeStarted
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 23
        parentVariable: null
      -
        class_name: TestVariable
        id: 167
        name: itemsAdministered
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 23
        parentVariable: null
      -
        class_name: TestVariable
        id: 168
        name: sem
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 23
        parentVariable: null
      -
        class_name: TestVariable
        id: 169
        name: .branch
        type: 1
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 23
        parentVariable: null
      -
        class_name: TestVariable
        id: 170
        name: stop
        type: 2
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 23
        parentVariable: null
      -
        class_name: TestVariable
        id: 171
        name: settings
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 23
        parentVariable: null
      -
        class_name: TestVariable
        id: 172
        name: items
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 23
        parentVariable: null
    sourceWizard: null
    sourceWizardTest: null
    nodes: {  }
    nodesConnections: {  }
    tags: ''
    groups: ''
    starterContent: true
    hash: 645a21d3ad99a75951375ac744ab12a2ed5d7b42
  -
    class_name: Test
    id: 24
    name: _CATScoringModule
    accessibility: 0
    archived: '0'
    visibility: 2
    type: 0
    code: |
      library(catR)
      
      correct = 0
      if(!is.null(response$response) && response$response == item$correct) { correct = 1 }
      correctness = c(correctness, correct)
      itemsAdministered = unique(c(itemsAdministered, itemIndex))
      paramBankAdministered = paramBank
      if(dim(items)[1] > 1) {
        paramBankAdministered = paramBank[itemsAdministered,]
      }
      concerto.log(itemsAdministered, "itemsAdministered")
      concerto.log(correctness, "correctness")
      theta <- thetaEst(matrix(paramBankAdministered, ncol=4, byrow=F), correctness, method=settings$scoringMethod)
      concerto.log(theta, "theta")
      sem <- semTheta(theta, matrix(paramBankAdministered, ncol=4, byrow=F), correctness)
      concerto.log(sem, "SEM")
      if(correct == 1) {
        .branch = "correct"
      } else {
        .branch = "incorrect"
      }
      
    description: ''
    variables:
      -
        class_name: TestVariable
        id: 173
        name: correct
        type: 2
        description: ''
        passableThroughUrl: '0'
        value: '0'
        test: 24
        parentVariable: null
      -
        class_name: TestVariable
        id: 174
        name: response
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 24
        parentVariable: null
      -
        class_name: TestVariable
        id: 175
        name: item
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 24
        parentVariable: null
      -
        class_name: TestVariable
        id: 176
        name: itemsAdministered
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 24
        parentVariable: null
      -
        class_name: TestVariable
        id: 177
        name: correctness
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 24
        parentVariable: null
      -
        class_name: TestVariable
        id: 178
        name: paramBank
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 24
        parentVariable: null
      -
        class_name: TestVariable
        id: 179
        name: theta
        type: 1
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 24
        parentVariable: null
      -
        class_name: TestVariable
        id: 180
        name: sem
        type: 1
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 24
        parentVariable: null
      -
        class_name: TestVariable
        id: 181
        name: correctness
        type: 1
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 24
        parentVariable: null
      -
        class_name: TestVariable
        id: 182
        name: correct
        type: 1
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 24
        parentVariable: null
      -
        class_name: TestVariable
        id: 183
        name: itemIndex
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 24
        parentVariable: null
      -
        class_name: TestVariable
        id: 184
        name: incorrect
        type: 2
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 24
        parentVariable: null
      -
        class_name: TestVariable
        id: 185
        name: .branch
        type: 1
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 24
        parentVariable: null
      -
        class_name: TestVariable
        id: 186
        name: settings
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 24
        parentVariable: null
      -
        class_name: TestVariable
        id: 187
        name: items
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 24
        parentVariable: null
    sourceWizard: null
    sourceWizardTest: null
    nodes: {  }
    nodesConnections: {  }
    tags: ''
    groups: ''
    starterContent: true
    hash: b8f75b207770306c2d6d28786054e90643f85e47
  -
    class_name: TestWizard
    id: 7
    name: CAT
    description: ''
    accessibility: 0
    archived: '0'
    steps:
      -
        class_name: TestWizardStep
        id: 7
        title: Items
        description: 'Test items collection'
        orderNum: 0
        colsNum: 0
        wizard: 7
        params:
          -
            class_name: TestWizardParam
            id: 15
            label: Type
            description: |
              <p>Item bank type. One of the following:</p>
              
              <ul>
              	<li><strong>Direct&nbsp;</strong>- item bank will be declared at the node level</li>
              	<li><strong>Table&nbsp;</strong>- item bank will be stored in data table</li>
              </ul>
              
            hideCondition: ''
            type: 3
            passableThroughUrl: '0'
            value: direct
            testVariable: 116
            name: itemBankType
            wizardStep: 7
            stepTitle: Items
            order: 0
            wizard: 7
            definition:
              placeholder: 0
              defvalue: direct
              options:
                -
                  value: direct
                  label: Direct
                  order: ''
                -
                  value: table
                  label: Table
                  order: ''
          -
            class_name: TestWizardParam
            id: 16
            label: Items
            description: 'Direct item bank'
            hideCondition: 'values.itemBankType != "direct"'
            type: 10
            passableThroughUrl: '0'
            value: '[{"id":1,"question":"10 + 10","responseOptions":{"0":{"value":"20","label":"20"},"1":{"value":"40","label":"40"},"type":null,"optionsRandomOrder":null,"options":null},"a":1.7,"b":"-2","c":0,"d":1,"correct":20,"cbGroup":"mathematics","fixedIndex":""},{"id":2,"question":"100 + 100","responseOptions":{"0":{"value":"200","label":"200"},"1":{"value":"400","label":"400"},"type":null,"optionsRandomOrder":null,"options":null},"a":1.7,"b":0,"c":0,"d":1,"correct":200,"cbGroup":"mathematics","fixedIndex":""},{"id":3,"question":"1000 + 1000","responseOptions":{"0":{"value":"2000","label":"2000"},"1":{"value":"4000","label":"4000"},"type":null,"optionsRandomOrder":null,"options":null},"a":1.7,"b":2,"c":0,"d":1,"correct":2000,"cbGroup":"mathematics","fixedIndex":""}]'
            testVariable: 117
            name: itemBankItems
            wizardStep: 7
            stepTitle: Items
            order: 0
            wizard: 7
            definition:
              element:
                type: 9
                definition:
                  placeholder: 0
                  fields:
                    -
                      type: 0
                      name: id
                      label: Id
                      definition:
                        placeholder: 0
                    -
                      type: 2
                      name: question
                      label: Question
                      definition:
                        placeholder: 0
                    -
                      type: 9
                      name: responseOptions
                      label: 'Response Options'
                      definition:
                        placeholder: 0
                        fields:
                          -
                            type: 3
                            name: type
                            label: Type
                            definition:
                              placeholder: 0
                              options:
                                -
                                  value: open
                                  label: Open
                                -
                                  value: options
                                  label: Options
                              defvalue: options
                          -
                            type: 4
                            name: optionsRandomOrder
                            label: 'Options Random Order'
                            definition:
                              placeholder: 0
                              defvalue: '1'
                            hideCondition: 'parent.type != "options"'
                          -
                            type: 10
                            name: options
                            label: Options
                            definition:
                              placeholder: 0
                              element:
                                type: 9
                                definition:
                                  placeholder: 0
                                  fields:
                                    -
                                      type: 0
                                      name: value
                                      label: Value
                                      definition:
                                        placeholder: 0
                                    -
                                      type: 2
                                      name: label
                                      label: Label
                                      definition:
                                        placeholder: 0
                            hideCondition: 'parent.type != "options"'
                        element:
                          type: 9
                          definition:
                            placeholder: 0
                            fields:
                              -
                                type: 0
                                name: value
                                label: Value
                                definition:
                                  placeholder: 0
                              -
                                type: 2
                                name: label
                                label: Label
                                definition:
                                  placeholder: 0
                    -
                      type: 0
                      name: a
                      label: A
                      definition:
                        placeholder: 0
                        defvalue: '0'
                    -
                      type: 0
                      name: b
                      label: B
                      definition:
                        placeholder: 0
                        defvalue: '0'
                    -
                      type: 0
                      name: c
                      label: C
                      definition:
                        placeholder: 0
                        defvalue: '0'
                    -
                      type: 0
                      name: d
                      label: D
                      definition:
                        placeholder: 0
                        defvalue: '0'
                    -
                      type: 0
                      name: correct
                      label: Correct
                      definition:
                        placeholder: 0
                    -
                      type: 0
                      name: cbGroup
                      label: 'Content Balancing Group'
                      definition:
                        placeholder: 0
                    -
                      type: 0
                      name: fixedIndex
                      label: 'Fixed Index'
                      definition:
                        placeholder: 0
                        defvalue: ''
          -
            class_name: TestWizardParam
            id: 17
            label: Table
            description: 'Column mapping for item bank data table'
            hideCondition: 'values.itemBankType != "table"'
            type: 12
            passableThroughUrl: '0'
            value: '{"table":"catItems","columns":{"id":"id","question":"question","responseOptions":"responseOptions","a":"a","b":"b","c":"c","d":"d","correct":"correct","cbGroup":"cbGroup","fixedIndex":"fixedIndex"}}'
            testVariable: 118
            name: itemBankTable
            wizardStep: 7
            stepTitle: Items
            order: 0
            wizard: 7
            definition:
              placeholder: 0
              cols:
                -
                  name: id
                  label: Id
                  tooltip: ''
                -
                  name: question
                  label: Question
                  tooltip: ''
                -
                  name: responseOptions
                  label: 'Response Options'
                  tooltip: ''
                -
                  name: a
                  label: A
                  tooltip: ''
                -
                  name: b
                  label: B
                  tooltip: ''
                -
                  name: c
                  label: C
                  tooltip: ''
                -
                  name: d
                  label: D
                  tooltip: ''
                -
                  name: correct
                  label: Correct
                  tooltip: ''
                -
                  name: cbGroup
                  label: 'Content Balancing Group'
                  tooltip: ''
                -
                  name: fixedIndex
                  label: 'Fixed Index'
                  tooltip: ''
          -
            class_name: TestWizardParam
            id: 18
            label: 'Item Template'
            description: 'View template to use for CAT item page'
            hideCondition: ''
            type: 5
            passableThroughUrl: '0'
            value: CAT
            testVariable: 129
            name: itemTemplate
            wizardStep: 7
            stepTitle: Items
            order: 0
            wizard: 7
            definition:
              placeholder: 0
              defvalue: CAT
      -
        class_name: TestWizardStep
        id: 8
        title: 'Stopping Rules'
        description: ''
        orderNum: 0
        colsNum: 0
        wizard: 7
        params:
          -
            class_name: TestWizardParam
            id: 19
            label: 'Test Time Limit'
            description: 'Total test time limit in seconds. 0 for no limit.'
            hideCondition: ''
            type: 0
            passableThroughUrl: '0'
            value: '0'
            testVariable: 119
            name: testTimeLimit
            wizardStep: 8
            stepTitle: 'Stopping Rules'
            order: 0
            wizard: 7
            definition:
              placeholder: 0
              defvalue: '0'
          -
            class_name: TestWizardParam
            id: 20
            label: 'Item Time Limit'
            description: 'Time limit for each item, in seconds. 0 for no limit.'
            hideCondition: ''
            type: 0
            passableThroughUrl: '0'
            value: '0'
            testVariable: 120
            name: itemTimeLimit
            wizardStep: 8
            stepTitle: 'Stopping Rules'
            order: 0
            wizard: 7
            definition:
              placeholder: 0
              defvalue: '0'
          -
            class_name: TestWizardParam
            id: 21
            label: 'Sufficient Item Time Required'
            description: 'Check if you want test to not show more items if total test time left is less than item time limit.'
            hideCondition: 'values.testTimeLimit == 0 || values.itemTimeLimit == 0'
            type: 4
            passableThroughUrl: '0'
            value: '0'
            testVariable: 121
            name: itemTimeFullRequired
            wizardStep: 8
            stepTitle: 'Stopping Rules'
            order: 0
            wizard: 7
            definition:
              placeholder: 0
              defvalue: '0'
          -
            class_name: TestWizardParam
            id: 22
            label: 'Item Number Limit'
            description: 'Maximum number of items to show. 0 for no limit.'
            hideCondition: ''
            type: 0
            passableThroughUrl: '0'
            value: '0'
            testVariable: 131
            name: itemNumLimit
            wizardStep: 8
            stepTitle: 'Stopping Rules'
            order: 0
            wizard: 7
            definition:
              placeholder: 0
              defvalue: '0'
          -
            class_name: TestWizardParam
            id: 23
            label: 'Minimum Accuracy'
            description: 'Minimum accuracy value required to finish the test. 0 for no limit.'
            hideCondition: ''
            type: 0
            passableThroughUrl: '0'
            value: '0'
            testVariable: 132
            name: minAccuracy
            wizardStep: 8
            stepTitle: 'Stopping Rules'
            order: 0
            wizard: 7
            definition:
              placeholder: 0
              defvalue: '0'
      -
        class_name: TestWizardStep
        id: 9
        title: 'CAT Options'
        description: ''
        orderNum: 0
        colsNum: 0
        wizard: 7
        params:
          -
            class_name: TestWizardParam
            id: 24
            label: 'Content Balancing'
            description: |
              <p>Content balancing settings.<br />
              Set of weights for any number of item&#39;s content balancing groups. Each entry consist of two fields:</p>
              
              <ul>
              	<li><strong>Name</strong> - corresponds to content balancing group column in item bank</li>
              	<li><strong>Weight</strong>&nbsp;- numerical value</li>
              </ul>
              
              <p><strong>There must be required number of items based on relative weights present in item bank. Error will be generated otherwise.</strong></p>
              
            hideCondition: ''
            type: 10
            passableThroughUrl: '0'
            value: '[]'
            testVariable: 123
            name: contentBalancing
            wizardStep: 9
            stepTitle: 'CAT Options'
            order: 0
            wizard: 7
            definition:
              element:
                type: 9
                definition:
                  placeholder: 0
                  fields:
                    -
                      type: 0
                      name: name
                      label: 'Group Name'
                      definition:
                        placeholder: 0
                    -
                      type: 0
                      name: proportion
                      label: 'Group Proportion'
                      definition:
                        placeholder: 0
                        defvalue: '0'
      -
        class_name: TestWizardStep
        id: 10
        title: Responses
        description: ''
        orderNum: 0
        colsNum: 0
        wizard: 7
        params:
          -
            class_name: TestWizardParam
            id: 25
            label: 'Response Bank'
            description: 'Response bank table mapping. Can be left empty for no response storing.'
            hideCondition: ''
            type: 12
            passableThroughUrl: '0'
            value: '{"table":"CATResponses","columns":{"id":"id","item_id":"item_id","response":"response","timeTaken":"timeTaken","session_id":"session_id","correct":"correct","theta":"theta","sem":"sem"}}'
            testVariable: 128
            name: responseBank
            wizardStep: 10
            stepTitle: Responses
            order: 0
            wizard: 7
            definition:
              placeholder: 0
              cols:
                -
                  name: id
                  label: Id
                  tooltip: ''
                -
                  name: item_id
                  label: 'Item Id'
                  tooltip: ''
                -
                  name: response
                  label: Response
                  tooltip: ''
                -
                  name: timeTaken
                  label: 'Time Taken'
                  tooltip: ''
                -
                  name: session_id
                  label: 'Session Id'
                  tooltip: ''
                -
                  name: correct
                  label: Correct
                  tooltip: ''
                -
                  name: theta
                  label: Theta
                  tooltip: ''
                -
                  name: sem
                  label: SEM
                  tooltip: ''
          -
            class_name: TestWizardParam
            id: 26
            label: 'Response required'
            description: 'Check if user is required to give answer to item before proceeding.'
            hideCondition: ''
            type: 4
            passableThroughUrl: '0'
            value: '0'
            testVariable: 137
            name: responseRequired
            wizardStep: 10
            stepTitle: Responses
            order: 0
            wizard: 7
            definition:
              placeholder: 0
              defvalue: '0'
          -
            class_name: TestWizardParam
            id: 27
            label: 'Response required alert'
            description: 'Alert message to show to users when no answer is given.'
            hideCondition: 'values.responseRequired == 0'
            type: 0
            passableThroughUrl: '0'
            value: 'Response required!'
            testVariable: 138
            name: responseRequiredAlert
            wizardStep: 10
            stepTitle: Responses
            order: 0
            wizard: 7
            definition:
              placeholder: 0
              defvalue: 'Response required!'
      -
        class_name: TestWizardStep
        id: 11
        title: Modules
        description: 'Test modules. Each module is a separate test that can use specific input variables and must return specific return variables.'
        orderNum: 0
        colsNum: 0
        wizard: 7
        params:
          -
            class_name: TestWizardParam
            id: 28
            label: 'Next Item Selector Module'
            description: |
              Next item selection module. Needs to return:
              <ul>
              	<li><strong>nextItem&nbsp;</strong>- list representing next item record</li>
              	<li><strong>nextItemIndex&nbsp;</strong>- index of next item in&nbsp;<strong>items</strong>&nbsp;collection</li>
              	<li><strong>nextItemSafe</strong>&nbsp;- list representing next item record that can be passed to client side (should be stripped of any sensitive data as it can be visible by user)</li>
              </ul>
              
            hideCondition: ''
            type: 8
            passableThroughUrl: '0'
            value: _CATNextItemSelectorModule
            testVariable: 133
            name: nextItemSelectorModule
            wizardStep: 11
            stepTitle: Modules
            order: 0
            wizard: 7
            definition:
              placeholder: 0
              defvalue: _CATNextItemSelectorModule
          -
            class_name: TestWizardParam
            id: 29
            label: 'Scoring Module'
            description: |
              <p>Scoring module. Needs to return:</p>
              
              <ul>
              	<li><strong>.branch</strong>&nbsp;- should be string with either&nbsp;<strong>correct&nbsp;</strong>or&nbsp;<strong>incorrect</strong> value</li>
              	<li><strong>correct</strong>&nbsp;- numerical, should be <strong>1</strong> if correct answer was given,&nbsp;<strong>0&nbsp;</strong>otherwise</li>
              	<li><strong>correctness</strong>&nbsp;- vector containing values of&nbsp;<strong>correct&nbsp;</strong>values above for all responses</li>
              	<li><strong>sem</strong>&nbsp;- standard error of the mean</li>
              	<li><strong>theta</strong></li>
              </ul>
              
            hideCondition: ''
            type: 8
            passableThroughUrl: '0'
            value: _CATScoringModule
            testVariable: 134
            name: scoringModule
            wizardStep: 11
            stepTitle: Modules
            order: 0
            wizard: 7
            definition:
              placeholder: 0
              defvalue: _CATScoringModule
          -
            class_name: TestWizardParam
            id: 30
            label: 'Response Processor Module'
            description: |
              <p>Response processing module. Usually used for saving responses. Needs to return:</p>
              
              <ul>
              	<li><strong>itemsAdministered</strong>&nbsp;- vector of administered item&#39;s indices</li>
              	<li><strong>responseId</strong>&nbsp;- numerical, id of inserted response record</li>
              </ul>
              
            hideCondition: ''
            type: 8
            passableThroughUrl: '0'
            value: _CATResponseProcessorModule
            testVariable: 135
            name: responseProcessorModule
            wizardStep: 11
            stepTitle: Modules
            order: 0
            wizard: 7
            definition:
              placeholder: 0
              defvalue: _CATResponseProcessorModule
          -
            class_name: TestWizardParam
            id: 31
            label: 'Status Check Module'
            description: |
              <p>Status check module. Checks if test should be continued or should be stopped. Needs to return:</p>
              
              <ul>
              	<li><strong>.branch</strong>&nbsp;- should be string with either&nbsp;<strong>continue</strong>&nbsp;or <b>stop</b>&nbsp;as a value</li>
              </ul>
              
            hideCondition: ''
            type: 8
            passableThroughUrl: '0'
            value: _CATStatusCheckModule
            testVariable: 136
            name: statusCheckModule
            wizardStep: 11
            stepTitle: Modules
            order: 0
            wizard: 7
            definition:
              placeholder: 0
              defvalue: _CATStatusCheckModule
    test: 20
    groups: ''
    starterContent: true
    hash: 56b4b07b92ff3e90f31ddb0f66f2abc247a52955
  -
    class_name: Test
    id: 25
    name: CAT
    accessibility: 0
    archived: '0'
    visibility: 2
    type: 1
    code: null
    description: 'Computer Adaptive Test'
    variables:
      -
        class_name: TestVariable
        id: 188
        name: out
        type: 2
        description: ''
        passableThroughUrl: '0'
        value: '0'
        test: 25
        parentVariable: 115
      -
        class_name: TestVariable
        id: 189
        name: itemBankType
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: direct
        test: 25
        parentVariable: 116
      -
        class_name: TestVariable
        id: 190
        name: itemBankItems
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: '[{"id":1,"question":"10 + 10","responseOptions":{"type":"options","optionsRandomOrder":"1","options":[{"value":"20","label":"20"},{"value":"200","label":"200"},{"value":"2000","label":"2000"}]},"a":1.7,"b":"-2","c":0,"d":1,"correct":20,"cbGroup":"mathematics","fixedIndex":""},{"id":2,"question":"100 + 100","responseOptions":{"type":"options","optionsRandomOrder":"1","options":[{"value":"20","label":"20"},{"value":"200","label":"200"},{"value":"2000","label":"2000"}]},"a":1.7,"b":0,"c":0,"d":1,"correct":200,"cbGroup":"mathematics","fixedIndex":""},{"id":3,"question":"1000 + 1000","responseOptions":{"type":"options","optionsRandomOrder":"1","options":[{"value":"20","label":"20"},{"value":"200","label":"200"},{"value":"2000","label":"2000"}]},"a":1.7,"b":2,"c":0,"d":1,"correct":2000,"cbGroup":"mathematics","fixedIndex":""}]'
        test: 25
        parentVariable: 117
      -
        class_name: TestVariable
        id: 191
        name: itemBankTable
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: '{"table":"catItems","columns":{"id":"id","question":"question","responseOptions":"responseOptions","a":"a","b":"b","c":"c","d":"d","correct":"correct","cbGroup":"cbGroup","fixedIndex":"fixedIndex"}}'
        test: 25
        parentVariable: 118
      -
        class_name: TestVariable
        id: 192
        name: testTimeLimit
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: '0'
        test: 25
        parentVariable: 119
      -
        class_name: TestVariable
        id: 193
        name: itemTimeLimit
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: '0'
        test: 25
        parentVariable: 120
      -
        class_name: TestVariable
        id: 194
        name: itemTimeFullRequired
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: '0'
        test: 25
        parentVariable: 121
      -
        class_name: TestVariable
        id: 195
        name: testTimeLimitOffset
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: '0'
        test: 25
        parentVariable: 122
      -
        class_name: TestVariable
        id: 196
        name: contentBalancing
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: '[]'
        test: 25
        parentVariable: 123
      -
        class_name: TestVariable
        id: 197
        name: startingTheta
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: '0'
        test: 25
        parentVariable: 124
      -
        class_name: TestVariable
        id: 198
        name: nextItemCriterion
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: MFI
        test: 25
        parentVariable: 125
      -
        class_name: TestVariable
        id: 199
        name: nextItemRandomesque
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: '1'
        test: 25
        parentVariable: 126
      -
        class_name: TestVariable
        id: 200
        name: scoringMethod
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: BM
        test: 25
        parentVariable: 127
      -
        class_name: TestVariable
        id: 201
        name: responseBank
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: '{"table":"CATResponses","columns":{"id":"id","item_id":"item_id","response":"response","timeTaken":"timeTaken","session_id":"session_id","correct":"correct","theta":"theta","sem":"sem"}}'
        test: 25
        parentVariable: 128
      -
        class_name: TestVariable
        id: 202
        name: itemTemplate
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: CAT
        test: 25
        parentVariable: 129
      -
        class_name: TestVariable
        id: 203
        name: session
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 25
        parentVariable: 130
      -
        class_name: TestVariable
        id: 204
        name: itemNumLimit
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: '0'
        test: 25
        parentVariable: 131
      -
        class_name: TestVariable
        id: 205
        name: minAccuracy
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: '0'
        test: 25
        parentVariable: 132
      -
        class_name: TestVariable
        id: 206
        name: nextItemSelectorModule
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: _CATNextItemSelectorModule
        test: 25
        parentVariable: 133
      -
        class_name: TestVariable
        id: 207
        name: scoringModule
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: _CATScoringModule
        test: 25
        parentVariable: 134
      -
        class_name: TestVariable
        id: 208
        name: responseProcessorModule
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: _CATResponseProcessorModule
        test: 25
        parentVariable: 135
      -
        class_name: TestVariable
        id: 209
        name: statusCheckModule
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: _CATStatusCheckModule
        test: 25
        parentVariable: 136
      -
        class_name: TestVariable
        id: 210
        name: responseRequired
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: '0'
        test: 25
        parentVariable: 137
      -
        class_name: TestVariable
        id: 211
        name: responseRequiredAlert
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: 'Response required!'
        test: 25
        parentVariable: 138
      -
        class_name: TestVariable
        id: 212
        name: sem
        type: 1
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 25
        parentVariable: 139
      -
        class_name: TestVariable
        id: 213
        name: theta
        type: 1
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 25
        parentVariable: 140
    sourceWizard: 7
    sourceWizardTest: 20
    nodes: {  }
    nodesConnections: {  }
    tags: _concerto_core
    groups: ''
    starterContent: true
    hash: fc500ebc0b86728a787c7de85820eaf263af71e2
  -
    class_name: Test
    id: 26
    name: _nestedPageHtml
    accessibility: 0
    archived: '0'
    visibility: 2
    type: 0
    code: |
      if(!is.list(params)) {
        params = list()
      }
      for(.name in .dynamicInputs) {
        params[[.name]] = get(.name)
      }
      
      html = concerto.template.join(templateId=layout)
      content = fromJSON(content)
      if(length(content) > 0) {
        for(i in 1:length(content)) {
          pageParam = list()
          pageParam[[content[[i]]$name]] = concerto.template.join(templateId=content[[i]]$template)
          html = concerto.template.insertParams(html, pageParam, removeMissing=F)
        }
      }
      
      html = concerto.template.insertParams(html, params, removeMissing=F)
      
    description: ''
    variables:
      -
        class_name: TestVariable
        id: 214
        name: out
        type: 2
        description: ''
        passableThroughUrl: '0'
        value: '0'
        test: 26
        parentVariable: null
      -
        class_name: TestVariable
        id: 215
        name: layout
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 26
        parentVariable: null
      -
        class_name: TestVariable
        id: 216
        name: content
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 26
        parentVariable: null
      -
        class_name: TestVariable
        id: 217
        name: params
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 26
        parentVariable: null
      -
        class_name: TestVariable
        id: 218
        name: html
        type: 1
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 26
        parentVariable: null
    sourceWizard: null
    sourceWizardTest: null
    nodes: {  }
    nodesConnections: {  }
    tags: ''
    groups: ''
    starterContent: true
    hash: e68daf4e081601205c7cdbf4e686a73960ddc25d
  -
    class_name: TestWizard
    id: 8
    name: nestedPageHtml
    description: ''
    accessibility: 0
    archived: '0'
    steps:
      -
        class_name: TestWizardStep
        id: 12
        title: Templates
        description: ''
        orderNum: 0
        colsNum: 0
        wizard: 8
        params:
          -
            class_name: TestWizardParam
            id: 32
            label: 'Layout Template'
            description: 'Main layout template'
            hideCondition: ''
            type: 5
            passableThroughUrl: '0'
            value: ''
            testVariable: 215
            name: layout
            wizardStep: 12
            stepTitle: Templates
            order: 0
            wizard: 8
            definition:
              placeholder: 0
              defvalue: ''
          -
            class_name: TestWizardParam
            id: 33
            label: 'Content Templates'
            description: 'Templates that should be included in main layout template. Where&nbsp;<strong>Name</strong>&nbsp;is name of inserted variable on layout template and&nbsp;<strong>Template&nbsp;</strong>is template content that should be inserted in place of this variable.'
            hideCondition: ''
            type: 10
            passableThroughUrl: '0'
            value: '[]'
            testVariable: 216
            name: content
            wizardStep: 12
            stepTitle: Templates
            order: 0
            wizard: 8
            definition:
              element:
                type: 9
                definition:
                  placeholder: 0
                  fields:
                    -
                      type: 0
                      name: name
                      label: Name
                      definition:
                        placeholder: 0
                    -
                      type: 5
                      name: template
                      label: Template
                      definition:
                        placeholder: 0
    test: 26
    groups: ''
    starterContent: true
    hash: 3989538a2265fa71a44af95629be220678aa94cb
  -
    class_name: Test
    id: 27
    name: nestedPageHtml
    accessibility: 0
    archived: '0'
    visibility: 2
    type: 1
    code: null
    description: 'Nested page. Creates HTML that is constructed from one main layout template that can contain multiple nested templates inside.'
    variables:
      -
        class_name: TestVariable
        id: 219
        name: out
        type: 2
        description: ''
        passableThroughUrl: '0'
        value: '0'
        test: 27
        parentVariable: 214
      -
        class_name: TestVariable
        id: 220
        name: layout
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 27
        parentVariable: 215
      -
        class_name: TestVariable
        id: 221
        name: content
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: '[]'
        test: 27
        parentVariable: 216
      -
        class_name: TestVariable
        id: 222
        name: params
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 27
        parentVariable: 217
      -
        class_name: TestVariable
        id: 223
        name: html
        type: 1
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 27
        parentVariable: 218
    sourceWizard: 8
    sourceWizardTest: 26
    nodes: {  }
    nodesConnections: {  }
    tags: _concerto_core
    groups: ''
    starterContent: true
    hash: 3fbec6708e4731680d5d942f26aa9ca7f32a79a4
  -
    class_name: Test
    id: 28
    name: _linearTestInitialization
    accessibility: 0
    archived: '0'
    visibility: 2
    type: 0
    code: |
      getItems = function(itemBankType, itemBankItems, itemBankTable, order){
        items = NULL
        if(itemBankType == "table") {
          tableMap = fromJSON(itemBankTable)
          table = tableMap$table
          questionColumn = tableMap$columns$question
          responseOptionsColumn = tableMap$columns$responseOptions
          orderIndexColumn = tableMap$columns$orderIndex
          traitColumn = tableMap$columns$trait
          correctColumn = tableMap$columns$correct
          items = concerto.table.query(
            "
      SELECT 
      id, 
      {{questionColumn}} AS question, 
      {{responseOptionsColumn}} AS responseOptions,
      {{orderIndexColumn}} AS orderIndex,
      {{traitColumn}} AS trait,
      {{correctColumn}} AS correct
      FROM {{table}} 
      ORDER BY {{orderIndexColumn}}
      ", 
            list(
              questionColumn=questionColumn,
              responseOptionsColumn=responseOptionsColumn,
              orderIndexColumn=orderIndexColumn,
              traitColumn=traitColumn,
              correctColumn=correctColumn,
              table=table
            ))
        }
        if(itemBankType == "direct") {
          itemBankItems = fromJSON(itemBankItems)
          if(length(itemBankItems) > 0) {
            for(i in 1:length(itemBankItems)) {
              itemBankItems[[i]]$responseOptions = as.character(toJSON(itemBankItems[[i]]$responseOptions)) #response options don't fit into flat table, so turn them back to JSON.
              items = rbind(items, data.frame(itemBankItems[[i]], stringsAsFactors=F))
            }
          }
        } 
        
        if(dim(items)[1] == 0) { stop("Item bank must not be empty!") }
        if(order == "random") {
          items = items[sample(1:dim(items)[1]),]
        }
        return(items)
      }
      
      items = getItems(settings$itemBankType, settings$itemBankItems, settings$itemBankTable, settings$order)
      
      itemsAdministered = NULL
      scores = NULL
      traitScores = list()
      
      testTimeStarted = as.numeric(Sys.time())
      testTimeLeft = as.numeric(settings$testTimeLimit) + as.numeric(settings$testTimeLimitOffset)
      
    description: ''
    variables:
      -
        class_name: TestVariable
        id: 224
        name: out
        type: 2
        description: ''
        passableThroughUrl: '0'
        value: '0'
        test: 28
        parentVariable: null
      -
        class_name: TestVariable
        id: 225
        name: items
        type: 1
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 28
        parentVariable: null
      -
        class_name: TestVariable
        id: 226
        name: testTimeStarted
        type: 1
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 28
        parentVariable: null
      -
        class_name: TestVariable
        id: 227
        name: testTimeLeft
        type: 1
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 28
        parentVariable: null
      -
        class_name: TestVariable
        id: 228
        name: itemsAdministered
        type: 1
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 28
        parentVariable: null
      -
        class_name: TestVariable
        id: 229
        name: scores
        type: 1
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 28
        parentVariable: null
      -
        class_name: TestVariable
        id: 230
        name: settings
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 28
        parentVariable: null
      -
        class_name: TestVariable
        id: 231
        name: traitScores
        type: 1
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 28
        parentVariable: null
    sourceWizard: null
    sourceWizardTest: null
    nodes: {  }
    nodesConnections: {  }
    tags: ''
    groups: ''
    starterContent: true
    hash: b8a3bc51d08c0e5ca50f028fb9442c828597e48b
  -
    class_name: Test
    id: 29
    name: _linearTestShowItem
    accessibility: 0
    archived: '0'
    visibility: 2
    type: 0
    code: |
      getData = function(itemSafe, responseSafe, canGoBack, templateParams, responseRequired, responseRequiredAlert) {
        templateParams$item = itemSafe
        templateParams$canGoBack = canGoBack
        templateParams$response = responseSafe
        templateParams$responseRequired = responseRequired
        templateParams$responseRequiredAlert = responseRequiredAlert
      
        return(templateParams)
      }
      
      getTimeLimit = function(testTimeStarted, testTimeLimit, itemTimeLimit) {
        limit = 0
        startedAgo = as.numeric(Sys.time()) - testTimeStarted
        testTimeLeft = 0
        if(testTimeLimit > 0) {
          testTimeLeft = max(testTimeLimit - startedAgo, 1)
          limit = testTimeLeft
        }
        if(itemTimeLimit > 0) {
          if(limit > 0) {
            limit = min(limit, itemTimeLimit)
          } else {
            limit = itemTimeLimit
          }
        }
        return(limit)
      }
      
      canGoBack = if(settings$canGoBack == "1" && itemIndex > 1) { 1 } else { 0 }
      response = concerto.template.show(
        settings$itemTemplate, 
        params=getData(itemSafe, responseSafe, canGoBack, templateParams, settings$responseRequired, settings$responseRequiredAlert), 
        timeLimit=getTimeLimit(
          testTimeStarted, 
          as.numeric(settings$testTimeLimit), 
          as.numeric(settings$itemTimeLimit)
        )
      )
      
      .branch = "submitted"
      if(response$isTimeout == 1) { .branch = "outOfTime" }
      
    description: ''
    variables:
      -
        class_name: TestVariable
        id: 232
        name: submitted
        type: 2
        description: ''
        passableThroughUrl: '0'
        value: '0'
        test: 29
        parentVariable: null
      -
        class_name: TestVariable
        id: 233
        name: item
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 29
        parentVariable: null
      -
        class_name: TestVariable
        id: 234
        name: templateParams
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 29
        parentVariable: null
      -
        class_name: TestVariable
        id: 235
        name: testTimeStarted
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 29
        parentVariable: null
      -
        class_name: TestVariable
        id: 236
        name: testTimeLeft
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 29
        parentVariable: null
      -
        class_name: TestVariable
        id: 237
        name: response
        type: 1
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 29
        parentVariable: null
      -
        class_name: TestVariable
        id: 238
        name: outOfTime
        type: 2
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 29
        parentVariable: null
      -
        class_name: TestVariable
        id: 239
        name: .branch
        type: 1
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 29
        parentVariable: null
      -
        class_name: TestVariable
        id: 240
        name: itemSafe
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 29
        parentVariable: null
      -
        class_name: TestVariable
        id: 241
        name: itemIndex
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 29
        parentVariable: null
      -
        class_name: TestVariable
        id: 242
        name: responseSafe
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 29
        parentVariable: null
      -
        class_name: TestVariable
        id: 243
        name: settings
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 29
        parentVariable: null
    sourceWizard: null
    sourceWizardTest: null
    nodes: {  }
    nodesConnections: {  }
    tags: ''
    groups: ''
    starterContent: true
    hash: e83bbc18f040ab70e9b88e14f4b8160851c6274d
  -
    class_name: Test
    id: 30
    name: _linearTest
    accessibility: 0
    archived: '0'
    visibility: 2
    type: 2
    code: null
    description: ''
    variables:
      -
        class_name: TestVariable
        id: 244
        name: out
        type: 2
        description: ''
        passableThroughUrl: '0'
        value: '0'
        test: 30
        parentVariable: null
      -
        class_name: TestVariable
        id: 245
        name: itemBankItems
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 30
        parentVariable: null
      -
        class_name: TestVariable
        id: 246
        name: itemBankTable
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 30
        parentVariable: null
      -
        class_name: TestVariable
        id: 247
        name: itemBankType
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 30
        parentVariable: null
      -
        class_name: TestVariable
        id: 248
        name: testTimeLimit
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: '0'
        test: 30
        parentVariable: null
      -
        class_name: TestVariable
        id: 249
        name: testTimeLimitOffset
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: '0'
        test: 30
        parentVariable: null
      -
        class_name: TestVariable
        id: 250
        name: order
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 30
        parentVariable: null
      -
        class_name: TestVariable
        id: 251
        name: nextItemSelectorModule
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 30
        parentVariable: null
      -
        class_name: TestVariable
        id: 252
        name: itemTimeLimit
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: '0'
        test: 30
        parentVariable: null
      -
        class_name: TestVariable
        id: 253
        name: itemTemplate
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 30
        parentVariable: null
      -
        class_name: TestVariable
        id: 254
        name: scoringModule
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 30
        parentVariable: null
      -
        class_name: TestVariable
        id: 255
        name: responseBank
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 30
        parentVariable: null
      -
        class_name: TestVariable
        id: 256
        name: session
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 30
        parentVariable: null
      -
        class_name: TestVariable
        id: 257
        name: responseProcessorModule
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 30
        parentVariable: null
      -
        class_name: TestVariable
        id: 258
        name: itemNumLimit
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 30
        parentVariable: null
      -
        class_name: TestVariable
        id: 259
        name: itemTimeFullRequired
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 30
        parentVariable: null
      -
        class_name: TestVariable
        id: 260
        name: statusCheckModule
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 30
        parentVariable: null
      -
        class_name: TestVariable
        id: 261
        name: canGoBack
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: '0'
        test: 30
        parentVariable: null
      -
        class_name: TestVariable
        id: 262
        name: responseRequired
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 30
        parentVariable: null
      -
        class_name: TestVariable
        id: 263
        name: responseRequiredAlert
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 30
        parentVariable: null
      -
        class_name: TestVariable
        id: 264
        name: scores
        type: 1
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 30
        parentVariable: null
    sourceWizard: null
    sourceWizardTest: null
    nodes:
      -
        class_name: TestNode
        id: 41
        title: ''
        type: 1
        posX: 14782
        posY: 14945
        flowTest: 30
        sourceTest: 30
        sourceTestName: _linearTest
        sourceTestDescription: ''
        ports:
          -
            class_name: TestNodePort
            id: 496
            value: null
            node: 41
            variable: 245
            variableObject:
              class_name: TestVariable
              id: 245
              name: itemBankItems
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 30
              parentVariable: null
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 1
            exposed: '0'
            name: itemBankItems
            pointer: '0'
            pointerVariable: ''
          -
            class_name: TestNodePort
            id: 497
            value: null
            node: 41
            variable: 246
            variableObject:
              class_name: TestVariable
              id: 246
              name: itemBankTable
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 30
              parentVariable: null
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 1
            exposed: '0'
            name: itemBankTable
            pointer: '0'
            pointerVariable: ''
          -
            class_name: TestNodePort
            id: 498
            value: null
            node: 41
            variable: 247
            variableObject:
              class_name: TestVariable
              id: 247
              name: itemBankType
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 30
              parentVariable: null
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 1
            exposed: '0'
            name: itemBankType
            pointer: '0'
            pointerVariable: ''
          -
            class_name: TestNodePort
            id: 499
            value: '0'
            node: 41
            variable: 248
            variableObject:
              class_name: TestVariable
              id: 248
              name: testTimeLimit
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: '0'
              test: 30
              parentVariable: null
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 1
            exposed: '0'
            name: testTimeLimit
            pointer: '0'
            pointerVariable: ''
          -
            class_name: TestNodePort
            id: 500
            value: '0'
            node: 41
            variable: 249
            variableObject:
              class_name: TestVariable
              id: 249
              name: testTimeLimitOffset
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: '0'
              test: 30
              parentVariable: null
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 1
            exposed: '0'
            name: testTimeLimitOffset
            pointer: '0'
            pointerVariable: ''
          -
            class_name: TestNodePort
            id: 501
            value: null
            node: 41
            variable: 250
            variableObject:
              class_name: TestVariable
              id: 250
              name: order
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 30
              parentVariable: null
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 1
            exposed: '0'
            name: order
            pointer: '0'
            pointerVariable: ''
          -
            class_name: TestNodePort
            id: 502
            value: null
            node: 41
            variable: 251
            variableObject:
              class_name: TestVariable
              id: 251
              name: nextItemSelectorModule
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 30
              parentVariable: null
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 1
            exposed: '0'
            name: nextItemSelectorModule
            pointer: '0'
            pointerVariable: ''
          -
            class_name: TestNodePort
            id: 503
            value: '0'
            node: 41
            variable: 252
            variableObject:
              class_name: TestVariable
              id: 252
              name: itemTimeLimit
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: '0'
              test: 30
              parentVariable: null
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 1
            exposed: '0'
            name: itemTimeLimit
            pointer: '0'
            pointerVariable: ''
          -
            class_name: TestNodePort
            id: 504
            value: null
            node: 41
            variable: 253
            variableObject:
              class_name: TestVariable
              id: 253
              name: itemTemplate
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 30
              parentVariable: null
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 1
            exposed: '0'
            name: itemTemplate
            pointer: '0'
            pointerVariable: ''
          -
            class_name: TestNodePort
            id: 505
            value: null
            node: 41
            variable: 254
            variableObject:
              class_name: TestVariable
              id: 254
              name: scoringModule
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 30
              parentVariable: null
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 1
            exposed: '0'
            name: scoringModule
            pointer: '0'
            pointerVariable: ''
          -
            class_name: TestNodePort
            id: 506
            value: null
            node: 41
            variable: 255
            variableObject:
              class_name: TestVariable
              id: 255
              name: responseBank
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 30
              parentVariable: null
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 1
            exposed: '0'
            name: responseBank
            pointer: '0'
            pointerVariable: ''
          -
            class_name: TestNodePort
            id: 507
            value: null
            node: 41
            variable: 256
            variableObject:
              class_name: TestVariable
              id: 256
              name: session
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 30
              parentVariable: null
            string: '1'
            defaultValue: '0'
            dynamic: '0'
            type: 1
            exposed: '0'
            name: session
            pointer: '1'
            pointerVariable: session
          -
            class_name: TestNodePort
            id: 508
            value: null
            node: 41
            variable: 257
            variableObject:
              class_name: TestVariable
              id: 257
              name: responseProcessorModule
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 30
              parentVariable: null
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 1
            exposed: '0'
            name: responseProcessorModule
            pointer: '0'
            pointerVariable: ''
          -
            class_name: TestNodePort
            id: 509
            value: null
            node: 41
            variable: 258
            variableObject:
              class_name: TestVariable
              id: 258
              name: itemNumLimit
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 30
              parentVariable: null
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 1
            exposed: '0'
            name: itemNumLimit
            pointer: '0'
            pointerVariable: ''
          -
            class_name: TestNodePort
            id: 510
            value: null
            node: 41
            variable: 259
            variableObject:
              class_name: TestVariable
              id: 259
              name: itemTimeFullRequired
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 30
              parentVariable: null
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 1
            exposed: '0'
            name: itemTimeFullRequired
            pointer: '0'
            pointerVariable: ''
          -
            class_name: TestNodePort
            id: 511
            value: null
            node: 41
            variable: 260
            variableObject:
              class_name: TestVariable
              id: 260
              name: statusCheckModule
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 30
              parentVariable: null
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 1
            exposed: '0'
            name: statusCheckModule
            pointer: '0'
            pointerVariable: ''
          -
            class_name: TestNodePort
            id: 512
            value: '0'
            node: 41
            variable: 261
            variableObject:
              class_name: TestVariable
              id: 261
              name: canGoBack
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: '0'
              test: 30
              parentVariable: null
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 1
            exposed: '0'
            name: canGoBack
            pointer: '0'
            pointerVariable: ''
          -
            class_name: TestNodePort
            id: 513
            value: null
            node: 41
            variable: 262
            variableObject:
              class_name: TestVariable
              id: 262
              name: responseRequired
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 30
              parentVariable: null
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 1
            exposed: '0'
            name: responseRequired
            pointer: '0'
            pointerVariable: responseRequired
          -
            class_name: TestNodePort
            id: 514
            value: null
            node: 41
            variable: 263
            variableObject:
              class_name: TestVariable
              id: 263
              name: responseRequiredAlert
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 30
              parentVariable: null
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 1
            exposed: '0'
            name: responseRequiredAlert
            pointer: '0'
            pointerVariable: responseRequiredAlert
      -
        class_name: TestNode
        id: 42
        title: ''
        type: 2
        posX: 17000
        posY: 15568
        flowTest: 30
        sourceTest: 30
        sourceTestName: _linearTest
        sourceTestDescription: ''
        ports:
          -
            class_name: TestNodePort
            id: 515
            value: ''
            node: 42
            variable: 264
            variableObject:
              class_name: TestVariable
              id: 264
              name: scores
              type: 1
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 30
              parentVariable: null
            string: '0'
            defaultValue: '0'
            dynamic: '0'
            type: 0
            exposed: '0'
            name: scores
            pointer: '1'
            pointerVariable: traitScores
      -
        class_name: TestNode
        id: 43
        title: ''
        type: 0
        posX: 15617
        posY: 15142
        flowTest: 30
        sourceTest: 28
        sourceTestName: _linearTestInitialization
        sourceTestDescription: ''
        ports:
          -
            class_name: TestNodePort
            id: 516
            value: '0'
            node: 43
            variable: 224
            variableObject:
              class_name: TestVariable
              id: 224
              name: out
              type: 2
              description: ''
              passableThroughUrl: '0'
              value: '0'
              test: 28
              parentVariable: null
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 2
            exposed: '1'
            name: out
            pointer: '0'
            pointerVariable: ''
          -
            class_name: TestNodePort
            id: 517
            value: null
            node: 43
            variable: 225
            variableObject:
              class_name: TestVariable
              id: 225
              name: items
              type: 1
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 28
              parentVariable: null
            string: '1'
            defaultValue: '0'
            dynamic: '0'
            type: 1
            exposed: '1'
            name: items
            pointer: '1'
            pointerVariable: items
          -
            class_name: TestNodePort
            id: 518
            value: null
            node: 43
            variable: 226
            variableObject:
              class_name: TestVariable
              id: 226
              name: testTimeStarted
              type: 1
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 28
              parentVariable: null
            string: '1'
            defaultValue: '0'
            dynamic: '0'
            type: 1
            exposed: '1'
            name: testTimeStarted
            pointer: '1'
            pointerVariable: testTimeStarted
          -
            class_name: TestNodePort
            id: 519
            value: null
            node: 43
            variable: 227
            variableObject:
              class_name: TestVariable
              id: 227
              name: testTimeLeft
              type: 1
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 28
              parentVariable: null
            string: '1'
            defaultValue: '0'
            dynamic: '0'
            type: 1
            exposed: '1'
            name: testTimeLeft
            pointer: '1'
            pointerVariable: testTimeLeft
          -
            class_name: TestNodePort
            id: 520
            value: 'NULL'
            node: 43
            variable: 228
            variableObject:
              class_name: TestVariable
              id: 228
              name: itemsAdministered
              type: 1
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 28
              parentVariable: null
            string: '0'
            defaultValue: '0'
            dynamic: '0'
            type: 1
            exposed: '1'
            name: itemsAdministered
            pointer: '1'
            pointerVariable: itemsAdministered
          -
            class_name: TestNodePort
            id: 521
            value: 'NULL'
            node: 43
            variable: 229
            variableObject:
              class_name: TestVariable
              id: 229
              name: scores
              type: 1
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 28
              parentVariable: null
            string: '0'
            defaultValue: '0'
            dynamic: '0'
            type: 1
            exposed: '1'
            name: scores
            pointer: '1'
            pointerVariable: scores
          -
            class_name: TestNodePort
            id: 522
            value: null
            node: 43
            variable: 230
            variableObject:
              class_name: TestVariable
              id: 230
              name: settings
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 28
              parentVariable: null
            string: '1'
            defaultValue: '0'
            dynamic: '0'
            type: 0
            exposed: '1'
            name: settings
            pointer: '1'
            pointerVariable: settings
          -
            class_name: TestNodePort
            id: 523
            value: null
            node: 43
            variable: 231
            variableObject:
              class_name: TestVariable
              id: 231
              name: traitScores
              type: 1
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 28
              parentVariable: null
            string: '1'
            defaultValue: '0'
            dynamic: '0'
            type: 1
            exposed: '1'
            name: traitScores
            pointer: '1'
            pointerVariable: traitScores
      -
        class_name: TestNode
        id: 44
        title: 'next item selector module'
        type: 0
        posX: 15977
        posY: 15132
        flowTest: 30
        sourceTest: 13
        sourceTestName: runTest
        sourceTestDescription: 'Run other test.'
        ports:
          -
            class_name: TestNodePort
            id: 524
            value: _linearTestNextItemSelectorModule
            node: 44
            variable: 81
            variableObject:
              class_name: TestVariable
              id: 81
              name: test
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 13
              parentVariable: 77
            string: '1'
            defaultValue: '0'
            dynamic: '0'
            type: 0
            exposed: '1'
            name: test
            pointer: '0'
            pointerVariable: ''
          -
            class_name: TestNodePort
            id: 525
            value: null
            node: 44
            variable: 82
            variableObject:
              class_name: TestVariable
              id: 82
              name: params
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 13
              parentVariable: 78
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 0
            exposed: '0'
            name: params
            pointer: '0'
            pointerVariable: ''
          -
            class_name: TestNodePort
            id: 526
            value: null
            node: 44
            variable: 83
            variableObject:
              class_name: TestVariable
              id: 83
              name: results
              type: 1
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 13
              parentVariable: 79
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 1
            exposed: '0'
            name: results
            pointer: '0'
            pointerVariable: ''
          -
            class_name: TestNodePort
            id: 527
            value: '0'
            node: 44
            variable: 80
            variableObject:
              class_name: TestVariable
              id: 80
              name: out
              type: 2
              description: ''
              passableThroughUrl: '0'
              value: '0'
              test: 13
              parentVariable: 76
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 2
            exposed: '1'
            name: out
            pointer: '0'
            pointerVariable: ''
          -
            class_name: TestNodePort
            id: 528
            value: ''
            node: 44
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '0'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: items
            pointer: '1'
            pointerVariable: items
          -
            class_name: TestNodePort
            id: 529
            value: ''
            node: 44
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '0'
            dynamic: '1'
            type: 1
            exposed: '1'
            name: nextItem
            pointer: '1'
            pointerVariable: item
          -
            class_name: TestNodePort
            id: 530
            value: ''
            node: 44
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '0'
            dynamic: '1'
            type: 1
            exposed: '1'
            name: nextItemIndex
            pointer: '1'
            pointerVariable: itemIndex
          -
            class_name: TestNodePort
            id: 531
            value: 'NULL'
            node: 44
            variable: null
            variableObject: null
            string: '0'
            defaultValue: '0'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: itemsAdministered
            pointer: '1'
            pointerVariable: itemsAdministered
          -
            class_name: TestNodePort
            id: 532
            value: '1'
            node: 44
            variable: null
            variableObject: null
            string: '0'
            defaultValue: '0'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: direction
            pointer: '1'
            pointerVariable: direction
          -
            class_name: TestNodePort
            id: 533
            value: ''
            node: 44
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '0'
            dynamic: '1'
            type: 1
            exposed: '1'
            name: nextItemSafe
            pointer: '0'
            pointerVariable: itemSafe
          -
            class_name: TestNodePort
            id: 534
            value: '0'
            node: 44
            variable: null
            variableObject: null
            string: '0'
            defaultValue: '0'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: prevItemIndex
            pointer: '1'
            pointerVariable: itemIndex
          -
            class_name: TestNodePort
            id: 535
            value: ''
            node: 44
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '0'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: session
            pointer: '1'
            pointerVariable: session
          -
            class_name: TestNodePort
            id: 536
            value: ''
            node: 44
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '1'
            dynamic: '1'
            type: 1
            exposed: '1'
            name: pastResponseSafe
            pointer: '0'
            pointerVariable: ''
          -
            class_name: TestNodePort
            id: 537
            value: ''
            node: 44
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '0'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: settings
            pointer: '1'
            pointerVariable: settings
      -
        class_name: TestNode
        id: 45
        title: ''
        type: 0
        posX: 16374
        posY: 15122
        flowTest: 30
        sourceTest: 29
        sourceTestName: _linearTestShowItem
        sourceTestDescription: ''
        ports:
          -
            class_name: TestNodePort
            id: 538
            value: null
            node: 45
            variable: 233
            variableObject:
              class_name: TestVariable
              id: 233
              name: item
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 29
              parentVariable: null
            string: '1'
            defaultValue: '0'
            dynamic: '0'
            type: 0
            exposed: '1'
            name: item
            pointer: '1'
            pointerVariable: item
          -
            class_name: TestNodePort
            id: 539
            value: c.getDynamicInputs()
            node: 45
            variable: 234
            variableObject:
              class_name: TestVariable
              id: 234
              name: templateParams
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 29
              parentVariable: null
            string: '0'
            defaultValue: '0'
            dynamic: '0'
            type: 0
            exposed: '1'
            name: templateParams
            pointer: '0'
            pointerVariable: ''
          -
            class_name: TestNodePort
            id: 540
            value: null
            node: 45
            variable: 235
            variableObject:
              class_name: TestVariable
              id: 235
              name: testTimeStarted
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 29
              parentVariable: null
            string: '1'
            defaultValue: '0'
            dynamic: '0'
            type: 0
            exposed: '1'
            name: testTimeStarted
            pointer: '1'
            pointerVariable: testTimeStarted
          -
            class_name: TestNodePort
            id: 541
            value: null
            node: 45
            variable: 236
            variableObject:
              class_name: TestVariable
              id: 236
              name: testTimeLeft
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 29
              parentVariable: null
            string: '1'
            defaultValue: '0'
            dynamic: '0'
            type: 0
            exposed: '1'
            name: testTimeLeft
            pointer: '1'
            pointerVariable: testTimeLeft
          -
            class_name: TestNodePort
            id: 542
            value: null
            node: 45
            variable: 237
            variableObject:
              class_name: TestVariable
              id: 237
              name: response
              type: 1
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 29
              parentVariable: null
            string: '1'
            defaultValue: '0'
            dynamic: '0'
            type: 1
            exposed: '1'
            name: response
            pointer: '1'
            pointerVariable: response
          -
            class_name: TestNodePort
            id: 543
            value: null
            node: 45
            variable: 239
            variableObject:
              class_name: TestVariable
              id: 239
              name: .branch
              type: 1
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 29
              parentVariable: null
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 1
            exposed: '1'
            name: .branch
            pointer: '0'
            pointerVariable: ''
          -
            class_name: TestNodePort
            id: 544
            value: '0'
            node: 45
            variable: 232
            variableObject:
              class_name: TestVariable
              id: 232
              name: submitted
              type: 2
              description: ''
              passableThroughUrl: '0'
              value: '0'
              test: 29
              parentVariable: null
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 2
            exposed: '1'
            name: submitted
            pointer: '0'
            pointerVariable: ''
          -
            class_name: TestNodePort
            id: 545
            value: null
            node: 45
            variable: 238
            variableObject:
              class_name: TestVariable
              id: 238
              name: outOfTime
              type: 2
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 29
              parentVariable: null
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 2
            exposed: '1'
            name: outOfTime
            pointer: '0'
            pointerVariable: ''
          -
            class_name: TestNodePort
            id: 546
            value: null
            node: 45
            variable: 240
            variableObject:
              class_name: TestVariable
              id: 240
              name: itemSafe
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 29
              parentVariable: null
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 0
            exposed: '1'
            name: itemSafe
            pointer: '0'
            pointerVariable: itemSafe
          -
            class_name: TestNodePort
            id: 547
            value: null
            node: 45
            variable: 241
            variableObject:
              class_name: TestVariable
              id: 241
              name: itemIndex
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 29
              parentVariable: null
            string: '1'
            defaultValue: '0'
            dynamic: '0'
            type: 0
            exposed: '1'
            name: itemIndex
            pointer: '1'
            pointerVariable: itemIndex
          -
            class_name: TestNodePort
            id: 548
            value: null
            node: 45
            variable: 242
            variableObject:
              class_name: TestVariable
              id: 242
              name: responseSafe
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 29
              parentVariable: null
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 0
            exposed: '1'
            name: responseSafe
            pointer: '0'
            pointerVariable: ''
          -
            class_name: TestNodePort
            id: 549
            value: null
            node: 45
            variable: 243
            variableObject:
              class_name: TestVariable
              id: 243
              name: settings
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 29
              parentVariable: null
            string: '1'
            defaultValue: '0'
            dynamic: '0'
            type: 0
            exposed: '1'
            name: settings
            pointer: '1'
            pointerVariable: settings
      -
        class_name: TestNode
        id: 46
        title: 'scoring module'
        type: 0
        posX: 16782
        posY: 15127
        flowTest: 30
        sourceTest: 13
        sourceTestName: runTest
        sourceTestDescription: 'Run other test.'
        ports:
          -
            class_name: TestNodePort
            id: 550
            value: _linearTestScoringModule
            node: 46
            variable: 81
            variableObject:
              class_name: TestVariable
              id: 81
              name: test
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 13
              parentVariable: 77
            string: '1'
            defaultValue: '0'
            dynamic: '0'
            type: 0
            exposed: '1'
            name: test
            pointer: '0'
            pointerVariable: ''
          -
            class_name: TestNodePort
            id: 551
            value: null
            node: 46
            variable: 82
            variableObject:
              class_name: TestVariable
              id: 82
              name: params
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 13
              parentVariable: 78
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 0
            exposed: '0'
            name: params
            pointer: '0'
            pointerVariable: ''
          -
            class_name: TestNodePort
            id: 552
            value: null
            node: 46
            variable: 83
            variableObject:
              class_name: TestVariable
              id: 83
              name: results
              type: 1
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 13
              parentVariable: 79
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 1
            exposed: '0'
            name: results
            pointer: '0'
            pointerVariable: ''
          -
            class_name: TestNodePort
            id: 553
            value: '0'
            node: 46
            variable: 80
            variableObject:
              class_name: TestVariable
              id: 80
              name: out
              type: 2
              description: ''
              passableThroughUrl: '0'
              value: '0'
              test: 13
              parentVariable: 76
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 2
            exposed: '1'
            name: out
            pointer: '0'
            pointerVariable: ''
          -
            class_name: TestNodePort
            id: 554
            value: 'NULL'
            node: 46
            variable: null
            variableObject: null
            string: '0'
            defaultValue: '0'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: scores
            pointer: '1'
            pointerVariable: scores
          -
            class_name: TestNodePort
            id: 555
            value: ''
            node: 46
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '0'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: item
            pointer: '1'
            pointerVariable: item
          -
            class_name: TestNodePort
            id: 556
            value: ''
            node: 46
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '0'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: itemIndex
            pointer: '1'
            pointerVariable: itemIndex
          -
            class_name: TestNodePort
            id: 557
            value: 'NULL'
            node: 46
            variable: null
            variableObject: null
            string: '0'
            defaultValue: '0'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: itemsAdministered
            pointer: '1'
            pointerVariable: itemsAdministered
          -
            class_name: TestNodePort
            id: 558
            value: ''
            node: 46
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '0'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: response
            pointer: '1'
            pointerVariable: response
          -
            class_name: TestNodePort
            id: 559
            value: ''
            node: 46
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '0'
            dynamic: '1'
            type: 1
            exposed: '1'
            name: score
            pointer: '1'
            pointerVariable: score
          -
            class_name: TestNodePort
            id: 560
            value: 'NULL'
            node: 46
            variable: null
            variableObject: null
            string: '0'
            defaultValue: '0'
            dynamic: '1'
            type: 1
            exposed: '1'
            name: scores
            pointer: '1'
            pointerVariable: scores
          -
            class_name: TestNodePort
            id: 561
            value: ''
            node: 46
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '0'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: settings
            pointer: '1'
            pointerVariable: settings
          -
            class_name: TestNodePort
            id: 562
            value: ''
            node: 46
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '0'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: items
            pointer: '1'
            pointerVariable: items
          -
            class_name: TestNodePort
            id: 563
            value: ''
            node: 46
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '0'
            dynamic: '1'
            type: 1
            exposed: '1'
            name: traitScores
            pointer: '1'
            pointerVariable: traitScores
      -
        class_name: TestNode
        id: 47
        title: 'response processor module'
        type: 0
        posX: 17167
        posY: 15123
        flowTest: 30
        sourceTest: 13
        sourceTestName: runTest
        sourceTestDescription: 'Run other test.'
        ports:
          -
            class_name: TestNodePort
            id: 564
            value: _linearTestResponseProcessorModule
            node: 47
            variable: 81
            variableObject:
              class_name: TestVariable
              id: 81
              name: test
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 13
              parentVariable: 77
            string: '1'
            defaultValue: '0'
            dynamic: '0'
            type: 0
            exposed: '1'
            name: test
            pointer: '0'
            pointerVariable: ''
          -
            class_name: TestNodePort
            id: 565
            value: null
            node: 47
            variable: 82
            variableObject:
              class_name: TestVariable
              id: 82
              name: params
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 13
              parentVariable: 78
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 0
            exposed: '0'
            name: params
            pointer: '0'
            pointerVariable: ''
          -
            class_name: TestNodePort
            id: 566
            value: null
            node: 47
            variable: 83
            variableObject:
              class_name: TestVariable
              id: 83
              name: results
              type: 1
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 13
              parentVariable: 79
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 1
            exposed: '0'
            name: results
            pointer: '0'
            pointerVariable: ''
          -
            class_name: TestNodePort
            id: 567
            value: '0'
            node: 47
            variable: 80
            variableObject:
              class_name: TestVariable
              id: 80
              name: out
              type: 2
              description: ''
              passableThroughUrl: '0'
              value: '0'
              test: 13
              parentVariable: 76
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 2
            exposed: '1'
            name: out
            pointer: '0'
            pointerVariable: ''
          -
            class_name: TestNodePort
            id: 568
            value: ''
            node: 47
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '0'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: item
            pointer: '1'
            pointerVariable: item
          -
            class_name: TestNodePort
            id: 569
            value: ''
            node: 47
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '0'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: response
            pointer: '1'
            pointerVariable: response
          -
            class_name: TestNodePort
            id: 570
            value: ''
            node: 47
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '0'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: score
            pointer: '1'
            pointerVariable: score
          -
            class_name: TestNodePort
            id: 571
            value: ''
            node: 47
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '0'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: session
            pointer: '1'
            pointerVariable: session
          -
            class_name: TestNodePort
            id: 572
            value: ''
            node: 47
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '1'
            dynamic: '1'
            type: 1
            exposed: '1'
            name: responseId
            pointer: '0'
            pointerVariable: ''
          -
            class_name: TestNodePort
            id: 573
            value: ''
            node: 47
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '0'
            dynamic: '1'
            type: 1
            exposed: '1'
            name: direction
            pointer: '1'
            pointerVariable: direction
          -
            class_name: TestNodePort
            id: 574
            value: ''
            node: 47
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '0'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: itemIndex
            pointer: '1'
            pointerVariable: itemIndex
          -
            class_name: TestNodePort
            id: 575
            value: 'NULL'
            node: 47
            variable: null
            variableObject: null
            string: '0'
            defaultValue: '0'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: itemsAdministered
            pointer: '1'
            pointerVariable: itemsAdministered
          -
            class_name: TestNodePort
            id: 576
            value: 'NULL'
            node: 47
            variable: null
            variableObject: null
            string: '0'
            defaultValue: '0'
            dynamic: '1'
            type: 1
            exposed: '1'
            name: itemsAdministered
            pointer: '1'
            pointerVariable: itemsAdministered
          -
            class_name: TestNodePort
            id: 577
            value: ''
            node: 47
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '0'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: settings
            pointer: '1'
            pointerVariable: settings
      -
        class_name: TestNode
        id: 48
        title: 'status check module'
        type: 0
        posX: 16610
        posY: 15513
        flowTest: 30
        sourceTest: 13
        sourceTestName: runTest
        sourceTestDescription: 'Run other test.'
        ports:
          -
            class_name: TestNodePort
            id: 578
            value: _linearTestStatusCheckModule
            node: 48
            variable: 81
            variableObject:
              class_name: TestVariable
              id: 81
              name: test
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 13
              parentVariable: 77
            string: '1'
            defaultValue: '0'
            dynamic: '0'
            type: 0
            exposed: '1'
            name: test
            pointer: '0'
            pointerVariable: ''
          -
            class_name: TestNodePort
            id: 579
            value: null
            node: 48
            variable: 82
            variableObject:
              class_name: TestVariable
              id: 82
              name: params
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 13
              parentVariable: 78
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 0
            exposed: '0'
            name: params
            pointer: '0'
            pointerVariable: ''
          -
            class_name: TestNodePort
            id: 580
            value: null
            node: 48
            variable: 83
            variableObject:
              class_name: TestVariable
              id: 83
              name: results
              type: 1
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 13
              parentVariable: 79
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 1
            exposed: '0'
            name: results
            pointer: '0'
            pointerVariable: ''
          -
            class_name: TestNodePort
            id: 581
            value: '0'
            node: 48
            variable: 80
            variableObject:
              class_name: TestVariable
              id: 80
              name: out
              type: 2
              description: ''
              passableThroughUrl: '0'
              value: '0'
              test: 13
              parentVariable: 76
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 2
            exposed: '0'
            name: out
            pointer: '0'
            pointerVariable: ''
          -
            class_name: TestNodePort
            id: 582
            value: 'NULL'
            node: 48
            variable: null
            variableObject: null
            string: '0'
            defaultValue: '0'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: itemsAdministered
            pointer: '1'
            pointerVariable: itemsAdministered
          -
            class_name: TestNodePort
            id: 583
            value: ''
            node: 48
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '0'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: testTimeStarted
            pointer: '1'
            pointerVariable: testTimeStarted
          -
            class_name: TestNodePort
            id: 584
            value: ''
            node: 48
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '1'
            dynamic: '1'
            type: 2
            exposed: '1'
            name: continue
            pointer: '0'
            pointerVariable: ''
          -
            class_name: TestNodePort
            id: 585
            value: ''
            node: 48
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '1'
            dynamic: '1'
            type: 2
            exposed: '1'
            name: stop
            pointer: '0'
            pointerVariable: ''
          -
            class_name: TestNodePort
            id: 586
            value: ''
            node: 48
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '1'
            dynamic: '1'
            type: 1
            exposed: '1'
            name: .branch
            pointer: '0'
            pointerVariable: ''
          -
            class_name: TestNodePort
            id: 587
            value: ''
            node: 48
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '0'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: direction
            pointer: '1'
            pointerVariable: direction
          -
            class_name: TestNodePort
            id: 588
            value: ''
            node: 48
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '0'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: itemIndex
            pointer: '1'
            pointerVariable: itemIndex
          -
            class_name: TestNodePort
            id: 589
            value: ''
            node: 48
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '0'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: testTimeLeft
            pointer: '1'
            pointerVariable: testTimeLeft
          -
            class_name: TestNodePort
            id: 590
            value: ''
            node: 48
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '0'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: settings
            pointer: '1'
            pointerVariable: settings
          -
            class_name: TestNodePort
            id: 591
            value: ''
            node: 48
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '0'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: items
            pointer: '1'
            pointerVariable: items
      -
        class_name: TestNode
        id: 49
        title: 'create settings'
        type: 0
        posX: 15223
        posY: 14939
        flowTest: 30
        sourceTest: 19
        sourceTestName: createList
        sourceTestDescription: 'List creation. Dynamic inputs will be used as list elements (input name as list key, input value as list value).'
        ports:
          -
            class_name: TestNodePort
            id: 592
            value: null
            node: 49
            variable: 113
            variableObject:
              class_name: TestVariable
              id: 113
              name: sourceList
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 19
              parentVariable: null
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 0
            exposed: '0'
            name: sourceList
            pointer: '0'
            pointerVariable: sourceList
          -
            class_name: TestNodePort
            id: 593
            value: null
            node: 49
            variable: 114
            variableObject:
              class_name: TestVariable
              id: 114
              name: result
              type: 1
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 19
              parentVariable: null
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 1
            exposed: '1'
            name: result
            pointer: '0'
            pointerVariable: result
          -
            class_name: TestNodePort
            id: 594
            value: '0'
            node: 49
            variable: 112
            variableObject:
              class_name: TestVariable
              id: 112
              name: out
              type: 2
              description: ''
              passableThroughUrl: '0'
              value: '0'
              test: 19
              parentVariable: null
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 2
            exposed: '1'
            name: out
            pointer: '0'
            pointerVariable: out
          -
            class_name: TestNodePort
            id: 595
            value: ''
            node: 49
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '1'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: canGoBack
            pointer: '0'
            pointerVariable: canGoBack
          -
            class_name: TestNodePort
            id: 596
            value: ''
            node: 49
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '1'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: itemBankItems
            pointer: '0'
            pointerVariable: itemBankItems
          -
            class_name: TestNodePort
            id: 597
            value: ''
            node: 49
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '1'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: itemBankTable
            pointer: '0'
            pointerVariable: itemBankTable
          -
            class_name: TestNodePort
            id: 598
            value: ''
            node: 49
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '1'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: itemBankType
            pointer: '0'
            pointerVariable: itemBankType
          -
            class_name: TestNodePort
            id: 599
            value: ''
            node: 49
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '1'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: itemNumLimit
            pointer: '0'
            pointerVariable: itemNumLimit
          -
            class_name: TestNodePort
            id: 600
            value: ''
            node: 49
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '1'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: itemTemplate
            pointer: '0'
            pointerVariable: itemTemplate
          -
            class_name: TestNodePort
            id: 601
            value: ''
            node: 49
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '1'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: itemTimeFullRequired
            pointer: '0'
            pointerVariable: itemTimeFullRequired
          -
            class_name: TestNodePort
            id: 602
            value: ''
            node: 49
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '1'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: itemTimeLimit
            pointer: '0'
            pointerVariable: itemTimeLimit
          -
            class_name: TestNodePort
            id: 603
            value: ''
            node: 49
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '1'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: order
            pointer: '0'
            pointerVariable: order
          -
            class_name: TestNodePort
            id: 604
            value: ''
            node: 49
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '1'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: responseBank
            pointer: '0'
            pointerVariable: responseBank
          -
            class_name: TestNodePort
            id: 605
            value: ''
            node: 49
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '1'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: testTimeLimit
            pointer: '0'
            pointerVariable: testTimeLimit
          -
            class_name: TestNodePort
            id: 606
            value: ''
            node: 49
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '1'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: testTimeLimitOffset
            pointer: '0'
            pointerVariable: testTimeLimitOffset
          -
            class_name: TestNodePort
            id: 607
            value: ''
            node: 49
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '1'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: responseRequired
            pointer: '0'
            pointerVariable: responseRequired
          -
            class_name: TestNodePort
            id: 608
            value: ''
            node: 49
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '1'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: responseRequiedAlert
            pointer: '0'
            pointerVariable: responseRequiedAlert
      -
        class_name: TestNode
        id: 50
        title: 'set settings'
        type: 0
        posX: 15570
        posY: 14971
        flowTest: 30
        sourceTest: 11
        sourceTestName: set
        sourceTestDescription: 'Promote variables. Use dynamic inputs to declare which variables you want to promote.'
        ports:
          -
            class_name: TestNodePort
            id: 609
            value: '0'
            node: 50
            variable: 75
            variableObject:
              class_name: TestVariable
              id: 75
              name: out
              type: 2
              description: ''
              passableThroughUrl: '0'
              value: '0'
              test: 11
              parentVariable: null
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 2
            exposed: '1'
            name: out
            pointer: '0'
            pointerVariable: out
          -
            class_name: TestNodePort
            id: 610
            value: ''
            node: 50
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '1'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: settings
            pointer: '0'
            pointerVariable: settings
    nodesConnections:
      -
        class_name: TestNodeConnection
        id: 166
        flowTest: 30
        sourceNode: 41
        sourcePort: null
        sourcePortObject: null
        destinationNode: 49
        destinationPort: null
        destinationPortObject: null
        returnFunction: ''
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 167
        flowTest: 30
        sourceNode: 43
        sourcePort: 516
        sourcePortObject:
          class_name: TestNodePort
          id: 516
          value: '0'
          node: 43
          variable: 224
          variableObject:
            class_name: TestVariable
            id: 224
            name: out
            type: 2
            description: ''
            passableThroughUrl: '0'
            value: '0'
            test: 28
            parentVariable: null
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 2
          exposed: '1'
          name: out
          pointer: '0'
          pointerVariable: ''
        destinationNode: 44
        destinationPort: null
        destinationPortObject: null
        returnFunction: out
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 168
        flowTest: 30
        sourceNode: 41
        sourcePort: 502
        sourcePortObject:
          class_name: TestNodePort
          id: 502
          value: null
          node: 41
          variable: 251
          variableObject:
            class_name: TestVariable
            id: 251
            name: nextItemSelectorModule
            type: 0
            description: ''
            passableThroughUrl: '0'
            value: null
            test: 30
            parentVariable: null
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 1
          exposed: '0'
          name: nextItemSelectorModule
          pointer: '0'
          pointerVariable: ''
        destinationNode: 44
        destinationPort: 524
        destinationPortObject:
          class_name: TestNodePort
          id: 524
          value: _linearTestNextItemSelectorModule
          node: 44
          variable: 81
          variableObject:
            class_name: TestVariable
            id: 81
            name: test
            type: 0
            description: ''
            passableThroughUrl: '0'
            value: null
            test: 13
            parentVariable: 77
          string: '1'
          defaultValue: '0'
          dynamic: '0'
          type: 0
          exposed: '1'
          name: test
          pointer: '0'
          pointerVariable: ''
        returnFunction: nextItemSelectorModule
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 169
        flowTest: 30
        sourceNode: 44
        sourcePort: 527
        sourcePortObject:
          class_name: TestNodePort
          id: 527
          value: '0'
          node: 44
          variable: 80
          variableObject:
            class_name: TestVariable
            id: 80
            name: out
            type: 2
            description: ''
            passableThroughUrl: '0'
            value: '0'
            test: 13
            parentVariable: 76
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 2
          exposed: '1'
          name: out
          pointer: '0'
          pointerVariable: ''
        destinationNode: 45
        destinationPort: null
        destinationPortObject: null
        returnFunction: out
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 170
        flowTest: 30
        sourceNode: 45
        sourcePort: 545
        sourcePortObject:
          class_name: TestNodePort
          id: 545
          value: null
          node: 45
          variable: 238
          variableObject:
            class_name: TestVariable
            id: 238
            name: outOfTime
            type: 2
            description: ''
            passableThroughUrl: '0'
            value: null
            test: 29
            parentVariable: null
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 2
          exposed: '1'
          name: outOfTime
          pointer: '0'
          pointerVariable: ''
        destinationNode: 46
        destinationPort: null
        destinationPortObject: null
        returnFunction: outOfTime
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 171
        flowTest: 30
        sourceNode: 45
        sourcePort: 544
        sourcePortObject:
          class_name: TestNodePort
          id: 544
          value: '0'
          node: 45
          variable: 232
          variableObject:
            class_name: TestVariable
            id: 232
            name: submitted
            type: 2
            description: ''
            passableThroughUrl: '0'
            value: '0'
            test: 29
            parentVariable: null
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 2
          exposed: '1'
          name: submitted
          pointer: '0'
          pointerVariable: ''
        destinationNode: 46
        destinationPort: null
        destinationPortObject: null
        returnFunction: submitted
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 172
        flowTest: 30
        sourceNode: 41
        sourcePort: 505
        sourcePortObject:
          class_name: TestNodePort
          id: 505
          value: null
          node: 41
          variable: 254
          variableObject:
            class_name: TestVariable
            id: 254
            name: scoringModule
            type: 0
            description: ''
            passableThroughUrl: '0'
            value: null
            test: 30
            parentVariable: null
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 1
          exposed: '0'
          name: scoringModule
          pointer: '0'
          pointerVariable: ''
        destinationNode: 46
        destinationPort: 550
        destinationPortObject:
          class_name: TestNodePort
          id: 550
          value: _linearTestScoringModule
          node: 46
          variable: 81
          variableObject:
            class_name: TestVariable
            id: 81
            name: test
            type: 0
            description: ''
            passableThroughUrl: '0'
            value: null
            test: 13
            parentVariable: 77
          string: '1'
          defaultValue: '0'
          dynamic: '0'
          type: 0
          exposed: '1'
          name: test
          pointer: '0'
          pointerVariable: ''
        returnFunction: scoringModule
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 173
        flowTest: 30
        sourceNode: 46
        sourcePort: 553
        sourcePortObject:
          class_name: TestNodePort
          id: 553
          value: '0'
          node: 46
          variable: 80
          variableObject:
            class_name: TestVariable
            id: 80
            name: out
            type: 2
            description: ''
            passableThroughUrl: '0'
            value: '0'
            test: 13
            parentVariable: 76
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 2
          exposed: '1'
          name: out
          pointer: '0'
          pointerVariable: ''
        destinationNode: 47
        destinationPort: null
        destinationPortObject: null
        returnFunction: out
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 174
        flowTest: 30
        sourceNode: 41
        sourcePort: 508
        sourcePortObject:
          class_name: TestNodePort
          id: 508
          value: null
          node: 41
          variable: 257
          variableObject:
            class_name: TestVariable
            id: 257
            name: responseProcessorModule
            type: 0
            description: ''
            passableThroughUrl: '0'
            value: null
            test: 30
            parentVariable: null
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 1
          exposed: '0'
          name: responseProcessorModule
          pointer: '0'
          pointerVariable: ''
        destinationNode: 47
        destinationPort: 564
        destinationPortObject:
          class_name: TestNodePort
          id: 564
          value: _linearTestResponseProcessorModule
          node: 47
          variable: 81
          variableObject:
            class_name: TestVariable
            id: 81
            name: test
            type: 0
            description: ''
            passableThroughUrl: '0'
            value: null
            test: 13
            parentVariable: 77
          string: '1'
          defaultValue: '0'
          dynamic: '0'
          type: 0
          exposed: '1'
          name: test
          pointer: '0'
          pointerVariable: ''
        returnFunction: responseProcessorModule
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 175
        flowTest: 30
        sourceNode: 47
        sourcePort: 567
        sourcePortObject:
          class_name: TestNodePort
          id: 567
          value: '0'
          node: 47
          variable: 80
          variableObject:
            class_name: TestVariable
            id: 80
            name: out
            type: 2
            description: ''
            passableThroughUrl: '0'
            value: '0'
            test: 13
            parentVariable: 76
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 2
          exposed: '1'
          name: out
          pointer: '0'
          pointerVariable: ''
        destinationNode: 48
        destinationPort: null
        destinationPortObject: null
        returnFunction: out
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 176
        flowTest: 30
        sourceNode: 48
        sourcePort: 585
        sourcePortObject:
          class_name: TestNodePort
          id: 585
          value: ''
          node: 48
          variable: null
          variableObject: null
          string: '1'
          defaultValue: '1'
          dynamic: '1'
          type: 2
          exposed: '1'
          name: stop
          pointer: '0'
          pointerVariable: ''
        destinationNode: 42
        destinationPort: null
        destinationPortObject: null
        returnFunction: stop
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 177
        flowTest: 30
        sourceNode: 48
        sourcePort: 584
        sourcePortObject:
          class_name: TestNodePort
          id: 584
          value: ''
          node: 48
          variable: null
          variableObject: null
          string: '1'
          defaultValue: '1'
          dynamic: '1'
          type: 2
          exposed: '1'
          name: continue
          pointer: '0'
          pointerVariable: ''
        destinationNode: 44
        destinationPort: null
        destinationPortObject: null
        returnFunction: continue
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 178
        flowTest: 30
        sourceNode: 41
        sourcePort: 511
        sourcePortObject:
          class_name: TestNodePort
          id: 511
          value: null
          node: 41
          variable: 260
          variableObject:
            class_name: TestVariable
            id: 260
            name: statusCheckModule
            type: 0
            description: ''
            passableThroughUrl: '0'
            value: null
            test: 30
            parentVariable: null
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 1
          exposed: '0'
          name: statusCheckModule
          pointer: '0'
          pointerVariable: ''
        destinationNode: 48
        destinationPort: 578
        destinationPortObject:
          class_name: TestNodePort
          id: 578
          value: _linearTestStatusCheckModule
          node: 48
          variable: 81
          variableObject:
            class_name: TestVariable
            id: 81
            name: test
            type: 0
            description: ''
            passableThroughUrl: '0'
            value: null
            test: 13
            parentVariable: 77
          string: '1'
          defaultValue: '0'
          dynamic: '0'
          type: 0
          exposed: '1'
          name: test
          pointer: '0'
          pointerVariable: ''
        returnFunction: statusCheckModule
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 179
        flowTest: 30
        sourceNode: 44
        sourcePort: 536
        sourcePortObject:
          class_name: TestNodePort
          id: 536
          value: ''
          node: 44
          variable: null
          variableObject: null
          string: '1'
          defaultValue: '1'
          dynamic: '1'
          type: 1
          exposed: '1'
          name: pastResponseSafe
          pointer: '0'
          pointerVariable: ''
        destinationNode: 45
        destinationPort: 548
        destinationPortObject:
          class_name: TestNodePort
          id: 548
          value: null
          node: 45
          variable: 242
          variableObject:
            class_name: TestVariable
            id: 242
            name: responseSafe
            type: 0
            description: ''
            passableThroughUrl: '0'
            value: null
            test: 29
            parentVariable: null
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 0
          exposed: '1'
          name: responseSafe
          pointer: '0'
          pointerVariable: ''
        returnFunction: pastResponseSafe
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 180
        flowTest: 30
        sourceNode: 49
        sourcePort: 594
        sourcePortObject:
          class_name: TestNodePort
          id: 594
          value: '0'
          node: 49
          variable: 112
          variableObject:
            class_name: TestVariable
            id: 112
            name: out
            type: 2
            description: ''
            passableThroughUrl: '0'
            value: '0'
            test: 19
            parentVariable: null
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 2
          exposed: '1'
          name: out
          pointer: '0'
          pointerVariable: out
        destinationNode: 50
        destinationPort: null
        destinationPortObject: null
        returnFunction: out
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 181
        flowTest: 30
        sourceNode: 50
        sourcePort: 609
        sourcePortObject:
          class_name: TestNodePort
          id: 609
          value: '0'
          node: 50
          variable: 75
          variableObject:
            class_name: TestVariable
            id: 75
            name: out
            type: 2
            description: ''
            passableThroughUrl: '0'
            value: '0'
            test: 11
            parentVariable: null
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 2
          exposed: '1'
          name: out
          pointer: '0'
          pointerVariable: out
        destinationNode: 43
        destinationPort: null
        destinationPortObject: null
        returnFunction: out
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 182
        flowTest: 30
        sourceNode: 41
        sourcePort: 512
        sourcePortObject:
          class_name: TestNodePort
          id: 512
          value: '0'
          node: 41
          variable: 261
          variableObject:
            class_name: TestVariable
            id: 261
            name: canGoBack
            type: 0
            description: ''
            passableThroughUrl: '0'
            value: '0'
            test: 30
            parentVariable: null
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 1
          exposed: '0'
          name: canGoBack
          pointer: '0'
          pointerVariable: ''
        destinationNode: 49
        destinationPort: 595
        destinationPortObject:
          class_name: TestNodePort
          id: 595
          value: ''
          node: 49
          variable: null
          variableObject: null
          string: '1'
          defaultValue: '1'
          dynamic: '1'
          type: 0
          exposed: '1'
          name: canGoBack
          pointer: '0'
          pointerVariable: canGoBack
        returnFunction: canGoBack
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 183
        flowTest: 30
        sourceNode: 41
        sourcePort: 496
        sourcePortObject:
          class_name: TestNodePort
          id: 496
          value: null
          node: 41
          variable: 245
          variableObject:
            class_name: TestVariable
            id: 245
            name: itemBankItems
            type: 0
            description: ''
            passableThroughUrl: '0'
            value: null
            test: 30
            parentVariable: null
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 1
          exposed: '0'
          name: itemBankItems
          pointer: '0'
          pointerVariable: ''
        destinationNode: 49
        destinationPort: 596
        destinationPortObject:
          class_name: TestNodePort
          id: 596
          value: ''
          node: 49
          variable: null
          variableObject: null
          string: '1'
          defaultValue: '1'
          dynamic: '1'
          type: 0
          exposed: '1'
          name: itemBankItems
          pointer: '0'
          pointerVariable: itemBankItems
        returnFunction: itemBankItems
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 184
        flowTest: 30
        sourceNode: 41
        sourcePort: 497
        sourcePortObject:
          class_name: TestNodePort
          id: 497
          value: null
          node: 41
          variable: 246
          variableObject:
            class_name: TestVariable
            id: 246
            name: itemBankTable
            type: 0
            description: ''
            passableThroughUrl: '0'
            value: null
            test: 30
            parentVariable: null
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 1
          exposed: '0'
          name: itemBankTable
          pointer: '0'
          pointerVariable: ''
        destinationNode: 49
        destinationPort: 597
        destinationPortObject:
          class_name: TestNodePort
          id: 597
          value: ''
          node: 49
          variable: null
          variableObject: null
          string: '1'
          defaultValue: '1'
          dynamic: '1'
          type: 0
          exposed: '1'
          name: itemBankTable
          pointer: '0'
          pointerVariable: itemBankTable
        returnFunction: itemBankTable
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 185
        flowTest: 30
        sourceNode: 41
        sourcePort: 498
        sourcePortObject:
          class_name: TestNodePort
          id: 498
          value: null
          node: 41
          variable: 247
          variableObject:
            class_name: TestVariable
            id: 247
            name: itemBankType
            type: 0
            description: ''
            passableThroughUrl: '0'
            value: null
            test: 30
            parentVariable: null
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 1
          exposed: '0'
          name: itemBankType
          pointer: '0'
          pointerVariable: ''
        destinationNode: 49
        destinationPort: 598
        destinationPortObject:
          class_name: TestNodePort
          id: 598
          value: ''
          node: 49
          variable: null
          variableObject: null
          string: '1'
          defaultValue: '1'
          dynamic: '1'
          type: 0
          exposed: '1'
          name: itemBankType
          pointer: '0'
          pointerVariable: itemBankType
        returnFunction: itemBankType
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 186
        flowTest: 30
        sourceNode: 41
        sourcePort: 509
        sourcePortObject:
          class_name: TestNodePort
          id: 509
          value: null
          node: 41
          variable: 258
          variableObject:
            class_name: TestVariable
            id: 258
            name: itemNumLimit
            type: 0
            description: ''
            passableThroughUrl: '0'
            value: null
            test: 30
            parentVariable: null
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 1
          exposed: '0'
          name: itemNumLimit
          pointer: '0'
          pointerVariable: ''
        destinationNode: 49
        destinationPort: 599
        destinationPortObject:
          class_name: TestNodePort
          id: 599
          value: ''
          node: 49
          variable: null
          variableObject: null
          string: '1'
          defaultValue: '1'
          dynamic: '1'
          type: 0
          exposed: '1'
          name: itemNumLimit
          pointer: '0'
          pointerVariable: itemNumLimit
        returnFunction: itemNumLimit
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 187
        flowTest: 30
        sourceNode: 41
        sourcePort: 504
        sourcePortObject:
          class_name: TestNodePort
          id: 504
          value: null
          node: 41
          variable: 253
          variableObject:
            class_name: TestVariable
            id: 253
            name: itemTemplate
            type: 0
            description: ''
            passableThroughUrl: '0'
            value: null
            test: 30
            parentVariable: null
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 1
          exposed: '0'
          name: itemTemplate
          pointer: '0'
          pointerVariable: ''
        destinationNode: 49
        destinationPort: 600
        destinationPortObject:
          class_name: TestNodePort
          id: 600
          value: ''
          node: 49
          variable: null
          variableObject: null
          string: '1'
          defaultValue: '1'
          dynamic: '1'
          type: 0
          exposed: '1'
          name: itemTemplate
          pointer: '0'
          pointerVariable: itemTemplate
        returnFunction: itemTemplate
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 188
        flowTest: 30
        sourceNode: 41
        sourcePort: 510
        sourcePortObject:
          class_name: TestNodePort
          id: 510
          value: null
          node: 41
          variable: 259
          variableObject:
            class_name: TestVariable
            id: 259
            name: itemTimeFullRequired
            type: 0
            description: ''
            passableThroughUrl: '0'
            value: null
            test: 30
            parentVariable: null
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 1
          exposed: '0'
          name: itemTimeFullRequired
          pointer: '0'
          pointerVariable: ''
        destinationNode: 49
        destinationPort: 601
        destinationPortObject:
          class_name: TestNodePort
          id: 601
          value: ''
          node: 49
          variable: null
          variableObject: null
          string: '1'
          defaultValue: '1'
          dynamic: '1'
          type: 0
          exposed: '1'
          name: itemTimeFullRequired
          pointer: '0'
          pointerVariable: itemTimeFullRequired
        returnFunction: itemTimeFullRequired
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 189
        flowTest: 30
        sourceNode: 41
        sourcePort: 503
        sourcePortObject:
          class_name: TestNodePort
          id: 503
          value: '0'
          node: 41
          variable: 252
          variableObject:
            class_name: TestVariable
            id: 252
            name: itemTimeLimit
            type: 0
            description: ''
            passableThroughUrl: '0'
            value: '0'
            test: 30
            parentVariable: null
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 1
          exposed: '0'
          name: itemTimeLimit
          pointer: '0'
          pointerVariable: ''
        destinationNode: 49
        destinationPort: 602
        destinationPortObject:
          class_name: TestNodePort
          id: 602
          value: ''
          node: 49
          variable: null
          variableObject: null
          string: '1'
          defaultValue: '1'
          dynamic: '1'
          type: 0
          exposed: '1'
          name: itemTimeLimit
          pointer: '0'
          pointerVariable: itemTimeLimit
        returnFunction: itemTimeLimit
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 190
        flowTest: 30
        sourceNode: 41
        sourcePort: 501
        sourcePortObject:
          class_name: TestNodePort
          id: 501
          value: null
          node: 41
          variable: 250
          variableObject:
            class_name: TestVariable
            id: 250
            name: order
            type: 0
            description: ''
            passableThroughUrl: '0'
            value: null
            test: 30
            parentVariable: null
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 1
          exposed: '0'
          name: order
          pointer: '0'
          pointerVariable: ''
        destinationNode: 49
        destinationPort: 603
        destinationPortObject:
          class_name: TestNodePort
          id: 603
          value: ''
          node: 49
          variable: null
          variableObject: null
          string: '1'
          defaultValue: '1'
          dynamic: '1'
          type: 0
          exposed: '1'
          name: order
          pointer: '0'
          pointerVariable: order
        returnFunction: order
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 191
        flowTest: 30
        sourceNode: 41
        sourcePort: 506
        sourcePortObject:
          class_name: TestNodePort
          id: 506
          value: null
          node: 41
          variable: 255
          variableObject:
            class_name: TestVariable
            id: 255
            name: responseBank
            type: 0
            description: ''
            passableThroughUrl: '0'
            value: null
            test: 30
            parentVariable: null
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 1
          exposed: '0'
          name: responseBank
          pointer: '0'
          pointerVariable: ''
        destinationNode: 49
        destinationPort: 604
        destinationPortObject:
          class_name: TestNodePort
          id: 604
          value: ''
          node: 49
          variable: null
          variableObject: null
          string: '1'
          defaultValue: '1'
          dynamic: '1'
          type: 0
          exposed: '1'
          name: responseBank
          pointer: '0'
          pointerVariable: responseBank
        returnFunction: responseBank
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 192
        flowTest: 30
        sourceNode: 41
        sourcePort: 499
        sourcePortObject:
          class_name: TestNodePort
          id: 499
          value: '0'
          node: 41
          variable: 248
          variableObject:
            class_name: TestVariable
            id: 248
            name: testTimeLimit
            type: 0
            description: ''
            passableThroughUrl: '0'
            value: '0'
            test: 30
            parentVariable: null
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 1
          exposed: '0'
          name: testTimeLimit
          pointer: '0'
          pointerVariable: ''
        destinationNode: 49
        destinationPort: 605
        destinationPortObject:
          class_name: TestNodePort
          id: 605
          value: ''
          node: 49
          variable: null
          variableObject: null
          string: '1'
          defaultValue: '1'
          dynamic: '1'
          type: 0
          exposed: '1'
          name: testTimeLimit
          pointer: '0'
          pointerVariable: testTimeLimit
        returnFunction: testTimeLimit
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 193
        flowTest: 30
        sourceNode: 41
        sourcePort: 500
        sourcePortObject:
          class_name: TestNodePort
          id: 500
          value: '0'
          node: 41
          variable: 249
          variableObject:
            class_name: TestVariable
            id: 249
            name: testTimeLimitOffset
            type: 0
            description: ''
            passableThroughUrl: '0'
            value: '0'
            test: 30
            parentVariable: null
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 1
          exposed: '0'
          name: testTimeLimitOffset
          pointer: '0'
          pointerVariable: ''
        destinationNode: 49
        destinationPort: 606
        destinationPortObject:
          class_name: TestNodePort
          id: 606
          value: ''
          node: 49
          variable: null
          variableObject: null
          string: '1'
          defaultValue: '1'
          dynamic: '1'
          type: 0
          exposed: '1'
          name: testTimeLimitOffset
          pointer: '0'
          pointerVariable: testTimeLimitOffset
        returnFunction: testTimeLimitOffset
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 194
        flowTest: 30
        sourceNode: 44
        sourcePort: 533
        sourcePortObject:
          class_name: TestNodePort
          id: 533
          value: ''
          node: 44
          variable: null
          variableObject: null
          string: '1'
          defaultValue: '0'
          dynamic: '1'
          type: 1
          exposed: '1'
          name: nextItemSafe
          pointer: '0'
          pointerVariable: itemSafe
        destinationNode: 45
        destinationPort: 546
        destinationPortObject:
          class_name: TestNodePort
          id: 546
          value: null
          node: 45
          variable: 240
          variableObject:
            class_name: TestVariable
            id: 240
            name: itemSafe
            type: 0
            description: ''
            passableThroughUrl: '0'
            value: null
            test: 29
            parentVariable: null
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 0
          exposed: '1'
          name: itemSafe
          pointer: '0'
          pointerVariable: itemSafe
        returnFunction: nextItemSafe
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 195
        flowTest: 30
        sourceNode: 49
        sourcePort: 593
        sourcePortObject:
          class_name: TestNodePort
          id: 593
          value: null
          node: 49
          variable: 114
          variableObject:
            class_name: TestVariable
            id: 114
            name: result
            type: 1
            description: ''
            passableThroughUrl: '0'
            value: null
            test: 19
            parentVariable: null
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 1
          exposed: '1'
          name: result
          pointer: '0'
          pointerVariable: result
        destinationNode: 50
        destinationPort: 610
        destinationPortObject:
          class_name: TestNodePort
          id: 610
          value: ''
          node: 50
          variable: null
          variableObject: null
          string: '1'
          defaultValue: '1'
          dynamic: '1'
          type: 0
          exposed: '1'
          name: settings
          pointer: '0'
          pointerVariable: settings
        returnFunction: result
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 196
        flowTest: 30
        sourceNode: 41
        sourcePort: 513
        sourcePortObject:
          class_name: TestNodePort
          id: 513
          value: null
          node: 41
          variable: 262
          variableObject:
            class_name: TestVariable
            id: 262
            name: responseRequired
            type: 0
            description: ''
            passableThroughUrl: '0'
            value: null
            test: 30
            parentVariable: null
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 1
          exposed: '0'
          name: responseRequired
          pointer: '0'
          pointerVariable: responseRequired
        destinationNode: 49
        destinationPort: 607
        destinationPortObject:
          class_name: TestNodePort
          id: 607
          value: ''
          node: 49
          variable: null
          variableObject: null
          string: '1'
          defaultValue: '1'
          dynamic: '1'
          type: 0
          exposed: '1'
          name: responseRequired
          pointer: '0'
          pointerVariable: responseRequired
        returnFunction: responseRequired
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 197
        flowTest: 30
        sourceNode: 41
        sourcePort: 514
        sourcePortObject:
          class_name: TestNodePort
          id: 514
          value: null
          node: 41
          variable: 263
          variableObject:
            class_name: TestVariable
            id: 263
            name: responseRequiredAlert
            type: 0
            description: ''
            passableThroughUrl: '0'
            value: null
            test: 30
            parentVariable: null
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 1
          exposed: '0'
          name: responseRequiredAlert
          pointer: '0'
          pointerVariable: responseRequiredAlert
        destinationNode: 49
        destinationPort: 608
        destinationPortObject:
          class_name: TestNodePort
          id: 608
          value: ''
          node: 49
          variable: null
          variableObject: null
          string: '1'
          defaultValue: '1'
          dynamic: '1'
          type: 0
          exposed: '1'
          name: responseRequiedAlert
          pointer: '0'
          pointerVariable: responseRequiedAlert
        returnFunction: responseRequiredAlert
        automatic: '0'
        defaultReturnFunction: '1'
    tags: ''
    groups: ''
    starterContent: true
    hash: ddf492e7a72c18df30c27fc337f2619589baa794
  -
    class_name: Test
    id: 31
    name: _linearTestNextItemSelectorModule
    accessibility: 0
    archived: '0'
    visibility: 2
    type: 0
    code: |
      getSessionId = function(session) {
        id = 0
        if(!is.null(session) && is.list(session)) {
          id = session$id
        } else {
          id = paste0("i",concerto$session$id)
        }
        return(id)
      }
      
      getSafeItem = function(item) {
        item = as.list(item)
        
        if(is.character(item$responseOptions)) { item$responseOptions = fromJSON(item$responseOptions) }
        responseOptionsRandomOrder = item$responseOptions$optionsRandomOrder == "1"
        orderedOptions = c()
      
        if(length(item$responseOptions$options) > 0) {
          if(responseOptionsRandomOrder) {
            orderedOptions = item$responseOptions$options[sample(1:length(item$responseOptions$options))]
          } else {
            orderedOptions = item$responseOptions$options
          }
        }
        orderedOptions = lapply(orderedOptions, function(elem) {
          elem$score = NULL
          return(elem)
        })
        
        item$responseOptions$options = orderedOptions
        item$responseOptions$openScore = NULL
        item$responseOptions$openCorrect = NULL
        return(item)
      }
      
      getSafePastResponse = function(item, session, responseBank) {
        responseBank = fromJSON(responseBank)
        if(is.null(responseBank$table)) {
          concerto.log("no response bank defined")
          return(NULL)
        }
        
        sql = "
      SELECT * FROM {{table}}
      WHERE 
      {{sessionIdColumn}}='{{sessionId}}' AND
      {{itemIdColumn}}={{itemId}}
      "
        response = concerto.table.query(sql, list(
          table=responseBank$table,
          sessionIdColumn=responseBank$columns$session_id,
          sessionId=getSessionId(session),
          itemIdColumn=responseBank$columns$item_id,
          itemId=item$id
        ))
        if(dim(response)[1] > 0) {
          response = as.list(response)
          response$score = NULL
          return(response)
        }
        return(NULL)
      }
      
      concerto.log(prevItemIndex, "prevItemIndex")
      concerto.log(direction, "direction")
      nextItemIndex = as.numeric(prevItemIndex) + as.numeric(direction)
      concerto.log(nextItemIndex, "next item index")
      nextItem = items[nextItemIndex,]
      nextItemSafe = getSafeItem(nextItem)
      pastResponseSafe = getSafePastResponse(nextItem, session, settings$responseBank)
      
    description: ''
    variables:
      -
        class_name: TestVariable
        id: 265
        name: out
        type: 2
        description: ''
        passableThroughUrl: '0'
        value: '0'
        test: 31
        parentVariable: null
      -
        class_name: TestVariable
        id: 266
        name: items
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 31
        parentVariable: null
      -
        class_name: TestVariable
        id: 267
        name: nextItemIndex
        type: 1
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 31
        parentVariable: null
      -
        class_name: TestVariable
        id: 268
        name: nextItem
        type: 1
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 31
        parentVariable: null
      -
        class_name: TestVariable
        id: 269
        name: itemsAdministrered
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 31
        parentVariable: null
      -
        class_name: TestVariable
        id: 270
        name: direction
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: '1'
        test: 31
        parentVariable: null
      -
        class_name: TestVariable
        id: 271
        name: nextItemSafe
        type: 1
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 31
        parentVariable: null
      -
        class_name: TestVariable
        id: 272
        name: prevItemIndex
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: '0'
        test: 31
        parentVariable: null
      -
        class_name: TestVariable
        id: 273
        name: session
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 31
        parentVariable: null
      -
        class_name: TestVariable
        id: 274
        name: pastResponseSafe
        type: 1
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 31
        parentVariable: null
      -
        class_name: TestVariable
        id: 275
        name: responseBank
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 31
        parentVariable: null
      -
        class_name: TestVariable
        id: 276
        name: settings
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 31
        parentVariable: null
    sourceWizard: null
    sourceWizardTest: null
    nodes: {  }
    nodesConnections: {  }
    tags: ''
    groups: ''
    starterContent: true
    hash: 9a4cfebe47b32ca70ecef26e3ea5756ad9bc7b5e
  -
    class_name: Test
    id: 32
    name: _linearTestScoringModule
    accessibility: 0
    archived: '0'
    visibility: 2
    type: 0
    code: |
      updateScores = function(response, item, scores) {
        score = 0
      
        if(!is.null(response$response)) {
          responseOptions = fromJSON(item$responseOptions)
          if(responseOptions$type == "open") {
            if(response$response == responseOptions$openCorrect) {
              score = responseOptions$openScore
            }
          } else {
            for(i in 1:length(responseOptions$options)) {
              option = responseOptions$options[[i]]
              if(option$value == response$response) {
                score = option$score
                break
              }
            }
          }
        }
      
        scores[itemIndex] = score
        return(scores)
      }
      
      updateTraitScores = function(scores, items) {
        traitScores = list()
        for(i in 1:length(scores)) {
          score = as.numeric(scores[[i]])
          if(is.null(score)) { score = 0 }
          item = as.list(items[i,])
          if(is.null(traitScores[[item$trait]])) {
            traitScores[[item$trait]] = 0
          }
          traitScores[[item$trait]] = traitScores[[item$trait]] + score
        }
        return(traitScores)
      }
      
      scores = updateScores(response, item, scores)
      traitScores = updateTraitScores(scores, items)
      
      concerto.log(scores, "scores")
      concerto.log(traitScores, "traitScores")
      if(scores[itemIndex] > 0) {
        .branch = "correct"
      } else {
        .branch = "incorrect"
      }
      
    description: ''
    variables:
      -
        class_name: TestVariable
        id: 277
        name: correct
        type: 2
        description: ''
        passableThroughUrl: '0'
        value: '0'
        test: 32
        parentVariable: null
      -
        class_name: TestVariable
        id: 278
        name: response
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 32
        parentVariable: null
      -
        class_name: TestVariable
        id: 279
        name: item
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 32
        parentVariable: null
      -
        class_name: TestVariable
        id: 280
        name: itemsAdministered
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 32
        parentVariable: null
      -
        class_name: TestVariable
        id: 281
        name: scores
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 32
        parentVariable: null
      -
        class_name: TestVariable
        id: 282
        name: scores
        type: 1
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 32
        parentVariable: null
      -
        class_name: TestVariable
        id: 283
        name: score
        type: 1
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 32
        parentVariable: null
      -
        class_name: TestVariable
        id: 284
        name: itemIndex
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 32
        parentVariable: null
      -
        class_name: TestVariable
        id: 285
        name: incorrect
        type: 2
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 32
        parentVariable: null
      -
        class_name: TestVariable
        id: 286
        name: .branch
        type: 1
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 32
        parentVariable: null
      -
        class_name: TestVariable
        id: 287
        name: settings
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 32
        parentVariable: null
      -
        class_name: TestVariable
        id: 288
        name: items
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 32
        parentVariable: null
      -
        class_name: TestVariable
        id: 289
        name: traitScores
        type: 1
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 32
        parentVariable: null
    sourceWizard: null
    sourceWizardTest: null
    nodes: {  }
    nodesConnections: {  }
    tags: ''
    groups: ''
    starterContent: true
    hash: 68275d84aea7c0e698682795d99522f4bc614e7c
  -
    class_name: Test
    id: 33
    name: _linearTestResponseProcessorModule
    accessibility: 0
    archived: '0'
    visibility: 2
    type: 0
    code: |
      getSessionId = function(session) {
        id = 0
        if(!is.null(session) && is.list(session)) {
          id = session$id
        } else {
          id = paste0("i",concerto$session$id)
        }
        return(id)
      }
      
      saveResponse = function(responseBank, session, response, item, score) {
        responseBank = fromJSON(responseBank)
        if(is.null(responseBank$table)) {
          concerto.log("no response bank defined, skipping response saving")
          return(NULL)
        }
        
        sql = "SELECT COUNT(*) FROM {{table}} WHERE {{itemIdColumn}}={{itemId}} AND {{sessionIdColumn}}='{{sessionId}}'"
        exist = concerto.table.query(sql, params=list(
          table=responseBank$table,
          itemIdColumn=responseBank$columns$item_id,
          itemId=item$id,
          sessionIdColumn=responseBank$columns$session_id,
          sessionId=getSessionId(session)
        )) > 0
      
        sql = "
      INSERT INTO {{table}} 
      ({{itemIdColumn}}, {{responseColumn}}, {{timeTakenColumn}}, {{sessionIdColumn}}, {{scoreColumn}}, {{traitColumn}})
      VALUES ({{itemId}}, '{{response}}', {{timeTaken}}, '{{sessionId}}', {{score}}, '{{trait}}')
      "
        if(exist) {
          sql = "
      UPDATE {{table}} 
      SET 
      {{itemIdColumn}}={{itemId}}, 
      {{responseColumn}}='{{response}}', 
      {{timeTakenColumn}}={{timeTaken}}, 
      {{sessionIdColumn}}='{{sessionId}}', 
      {{scoreColumn}}={{score}}, 
      {{traitColumn}}='{{trait}}'
      WHERE {{itemIdColumn}}={{itemId}} AND {{sessionIdColumn}}='{{sessionId}}'
      "
        }
        concerto.table.query(sql, list(
          table=responseBank$table,
          sessionIdColumn=responseBank$columns$session_id,
          sessionId=getSessionId(session),
          itemIdColumn=responseBank$columns$item_id,
          itemId=item$id,
          responseColumn=responseBank$columns$response,
          response=response$response,
          timeTakenColumn=responseBank$columns$timeTaken,
          timeTaken=response$timeTaken, #could use time difference
          scoreColumn=responseBank$columns$score,
          score=score,
          traitColumn=responseBank$columns$trait,
          trait=item$trait
        ))
        return(concerto.table.lastInsertId())
      }
      
      responseId = saveResponse(settings$responseBank, session, response, item, score)
      
      direction = 1
      itemsAdministered = unique(c(itemsAdministered, itemIndex)) 
      if(settings$canGoBack == "1" && itemIndex > 1 && response$buttonPressed == "back") {
        direction = -1
      }
      concerto.log(itemsAdministered, "itemsAdministered")
      concerto.log(direction, "direction")
      
    description: ''
    variables:
      -
        class_name: TestVariable
        id: 290
        name: out
        type: 2
        description: ''
        passableThroughUrl: '0'
        value: '0'
        test: 33
        parentVariable: null
      -
        class_name: TestVariable
        id: 291
        name: response
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 33
        parentVariable: null
      -
        class_name: TestVariable
        id: 292
        name: session
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 33
        parentVariable: null
      -
        class_name: TestVariable
        id: 293
        name: item
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 33
        parentVariable: null
      -
        class_name: TestVariable
        id: 294
        name: score
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 33
        parentVariable: null
      -
        class_name: TestVariable
        id: 295
        name: responseId
        type: 1
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 33
        parentVariable: null
      -
        class_name: TestVariable
        id: 296
        name: direction
        type: 1
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 33
        parentVariable: null
      -
        class_name: TestVariable
        id: 297
        name: itemIndex
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 33
        parentVariable: null
      -
        class_name: TestVariable
        id: 298
        name: itemsAdministered
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 33
        parentVariable: null
      -
        class_name: TestVariable
        id: 299
        name: itemsAdministered
        type: 1
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 33
        parentVariable: null
      -
        class_name: TestVariable
        id: 300
        name: settings
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 33
        parentVariable: null
    sourceWizard: null
    sourceWizardTest: null
    nodes: {  }
    nodesConnections: {  }
    tags: ''
    groups: ''
    starterContent: true
    hash: 2788d089856ab0174805936f11edd8325fd06e5c
  -
    class_name: Test
    id: 34
    name: _linearTestStatusCheckModule
    accessibility: 0
    archived: '0'
    visibility: 2
    type: 0
    code: |
      isOutOfTime = function(testTimeLimit, testTimeStarted, itemTimeLimit, itemTimeFullRequired) {
        startedAgo = as.numeric(Sys.time()) - testTimeStarted
        testTimeLeft = testTimeLimit - startedAgo
        if(testTimeLimit > 0) {
          if(testTimeLeft <= 0) { return(T) }
          if(testTimeLeft < itemTimeLimit && itemTimeFullRequired) { return(T) }
        }
        return(F)
      }
      
      getBranch = function(testTimeLimit, testTimeStarted, itemTimeLimit, itemTimeFullRequired, itemNumLimit, itemIndex, itemsNum) {
        if(isOutOfTime(testTimeLimit, testTimeStarted, itemTimeLimit, itemTimeFullRequired)) {
          concerto.log("time out", "test status")
          return("stop")
        }
        
        if(itemNumLimit > 0 && itemIndex >= itemNumLimit || itemIndex >= itemsNum) {
          if(as.numeric(direction) > 0) {
            concerto.log("maximum items reached", "test status")
            return("stop")
          }
        }
        
        concerto.log("continue", "test status")
        return("continue")
      }
      
      .branch = getBranch(
        as.numeric(settings$testTimeLimit), 
        testTimeStarted, 
        as.numeric(settings$itemTimeLimit), 
        settings$itemTimeFullRequired == "1", 
        as.numeric(settings$itemNumLimit), 
        itemIndex, 
        dim(items)[1]
      )
      
    description: ''
    variables:
      -
        class_name: TestVariable
        id: 301
        name: continue
        type: 2
        description: ''
        passableThroughUrl: '0'
        value: '0'
        test: 34
        parentVariable: null
      -
        class_name: TestVariable
        id: 302
        name: testTimeLeft
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 34
        parentVariable: null
      -
        class_name: TestVariable
        id: 303
        name: testTimeStarted
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 34
        parentVariable: null
      -
        class_name: TestVariable
        id: 304
        name: itemsAdministered
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 34
        parentVariable: null
      -
        class_name: TestVariable
        id: 305
        name: .branch
        type: 1
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 34
        parentVariable: null
      -
        class_name: TestVariable
        id: 306
        name: stop
        type: 2
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 34
        parentVariable: null
      -
        class_name: TestVariable
        id: 307
        name: direction
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 34
        parentVariable: null
      -
        class_name: TestVariable
        id: 308
        name: itemIndex
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 34
        parentVariable: null
      -
        class_name: TestVariable
        id: 309
        name: settings
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 34
        parentVariable: null
      -
        class_name: TestVariable
        id: 310
        name: items
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 34
        parentVariable: null
    sourceWizard: null
    sourceWizardTest: null
    nodes: {  }
    nodesConnections: {  }
    tags: ''
    groups: ''
    starterContent: true
    hash: 18d3ed01d964d466e8aeb7257f255b814efa750f
  -
    class_name: TestWizard
    id: 9
    name: linearTest
    description: ''
    accessibility: 0
    archived: '0'
    steps:
      -
        class_name: TestWizardStep
        id: 13
        title: Items
        description: ''
        orderNum: 0
        colsNum: 0
        wizard: 9
        params:
          -
            class_name: TestWizardParam
            id: 34
            label: Type
            description: |
              <p>Type of item bank. One of the following:</p>
              
              <ul>
              	<li><strong>Direct</strong>&nbsp;- items are declared directly on node</li>
              	<li><strong>Table</strong> - items are read from data table</li>
              </ul>
              
            hideCondition: ''
            type: 3
            passableThroughUrl: '0'
            value: direct
            testVariable: 247
            name: itemBankType
            wizardStep: 13
            stepTitle: Items
            order: 0
            wizard: 9
            definition:
              placeholder: 0
              options:
                -
                  value: direct
                  label: Direct
                -
                  value: table
                  label: Table
              defvalue: direct
          -
            class_name: TestWizardParam
            id: 35
            label: Items
            description: 'Items collection for test.'
            hideCondition: 'values.itemBankType != "direct"'
            type: 10
            passableThroughUrl: '0'
            value: '[{"id":"1","question":"10 + 10","orderIndex":"1","trait":"math","responseOptions":{"type":"options","openCorrect":"","openScore":"1","options":[{"value":"20","label":"20","score":"1"},{"value":"200","label":"200","score":"0"},{"value":"2000","label":"2000","score":"0"}],"optionsRandomOrder":"1"}},{"id":"2","question":"100 + 100","orderIndex":"2","trait":"math","responseOptions":{"type":"options","openCorrect":"","openScore":"1","options":[{"value":"20","label":"20","score":"0"},{"value":"200","label":"200","score":"1"},{"value":"2000","label":"2000","score":"0"}],"optionsRandomOrder":"1"}},{"id":"3","question":"1000 + 1000","orderIndex":"3","trait":"math","responseOptions":{"type":"options","openCorrect":"","openScore":"1","options":[{"value":"20","label":"20","score":"0"},{"value":"200","label":"200","score":"0"},{"value":"2000","label":"2000","score":"1"}],"optionsRandomOrder":"1"}}]'
            testVariable: 245
            name: itemBankItems
            wizardStep: 13
            stepTitle: Items
            order: 0
            wizard: 9
            definition:
              element:
                type: 9
                definition:
                  placeholder: 0
                  fields:
                    -
                      type: 0
                      name: id
                      label: Id
                      definition:
                        placeholder: 0
                    -
                      type: 2
                      name: question
                      label: Question
                      definition:
                        placeholder: 0
                    -
                      type: 9
                      name: responseOptions
                      label: 'Response Options'
                      definition:
                        placeholder: 0
                        fields:
                          -
                            type: 3
                            name: type
                            label: Type
                            definition:
                              placeholder: 0
                              options:
                                -
                                  value: options
                                  label: Options
                                  order: 1
                                -
                                  value: open
                                  label: Open
                                  order: 0
                              defvalue: options
                          -
                            type: 0
                            name: openCorrect
                            label: 'Correct (Open)'
                            definition:
                              placeholder: 0
                              defvalue: ''
                            hideCondition: 'parent.type != "open"'
                          -
                            type: 0
                            name: openScore
                            label: 'Score (Open)'
                            definition:
                              placeholder: 0
                              defvalue: '1'
                            hideCondition: 'parent.type != "open"'
                          -
                            type: 10
                            name: options
                            label: Options
                            definition:
                              placeholder: 0
                              element:
                                type: 9
                                definition:
                                  placeholder: 0
                                  fields:
                                    -
                                      type: 0
                                      name: value
                                      label: Value
                                      definition:
                                        placeholder: 0
                                    -
                                      type: 2
                                      name: label
                                      label: Label
                                      definition:
                                        placeholder: 0
                                    -
                                      type: 0
                                      name: score
                                      label: Score
                                      definition:
                                        placeholder: 0
                                        defvalue: '0'
                            hideCondition: 'parent.type != "options"'
                          -
                            type: 4
                            name: optionsRandomOrder
                            label: 'Random Order (Options)'
                            definition:
                              placeholder: 0
                              defvalue: '1'
                            hideCondition: 'parent.type != "options"'
                    -
                      type: 0
                      name: orderIndex
                      label: 'Order Index'
                      definition:
                        placeholder: 0
                    -
                      type: 0
                      name: trait
                      label: Trait
                      definition:
                        placeholder: 0
          -
            class_name: TestWizardParam
            id: 36
            label: Table
            description: 'Column mapping for item bank.'
            hideCondition: 'values.itemBankType != "table"'
            type: 12
            passableThroughUrl: '0'
            value: '[]'
            testVariable: 246
            name: itemBankTable
            wizardStep: 13
            stepTitle: Items
            order: 0
            wizard: 9
            definition:
              placeholder: 0
              cols:
                -
                  name: id
                  label: Id
                  tooltip: ''
                -
                  name: question
                  label: Question
                  tooltip: ''
                -
                  name: responseOptions
                  label: 'Response Options'
                  tooltip: ''
                -
                  name: orderIndex
                  label: 'Order Index'
                  tooltip: ''
                -
                  name: trait
                  label: Trait
                  tooltip: ''
          -
            class_name: TestWizardParam
            id: 37
            label: 'Item Template'
            description: 'Layout template for item page.'
            hideCondition: ''
            type: 5
            passableThroughUrl: '0'
            value: linearTest
            testVariable: 253
            name: itemTemplate
            wizardStep: 13
            stepTitle: Items
            order: 0
            wizard: 9
            definition:
              placeholder: 0
              defvalue: linearTest
          -
            class_name: TestWizardParam
            id: 38
            label: Order
            description: |
              <p>Order of items. One of the following:</p>
              
              <ul>
              	<li><strong>Manual</strong>&nbsp;- will use sorted&nbsp;<strong>orderIndex&nbsp;</strong>column for order</li>
              	<li><strong>Random&nbsp;</strong>- item order will be randomized</li>
              </ul>
              
            hideCondition: ''
            type: 3
            passableThroughUrl: '0'
            value: random
            testVariable: 250
            name: order
            wizardStep: 13
            stepTitle: Items
            order: 0
            wizard: 9
            definition:
              placeholder: 0
              options:
                -
                  value: manual
                  label: Manual
                -
                  value: random
                  label: Random
              defvalue: random
          -
            class_name: TestWizardParam
            id: 39
            label: 'Can Go Back?'
            description: 'Should it be possible to go back to already answered items and change your response?'
            hideCondition: ''
            type: 4
            passableThroughUrl: '0'
            value: '0'
            testVariable: 261
            name: canGoBack
            wizardStep: 13
            stepTitle: Items
            order: 0
            wizard: 9
            definition:
              placeholder: 0
              defvalue: '0'
      -
        class_name: TestWizardStep
        id: 14
        title: 'Stopping Rules'
        description: ''
        orderNum: 0
        colsNum: 0
        wizard: 9
        params:
          -
            class_name: TestWizardParam
            id: 40
            label: 'Test Time Limit'
            description: 'Total test time limit in seconds. <strong>0</strong> for no limit.'
            hideCondition: ''
            type: 0
            passableThroughUrl: '0'
            value: '0'
            testVariable: 248
            name: testTimeLimit
            wizardStep: 14
            stepTitle: 'Stopping Rules'
            order: 0
            wizard: 9
            definition:
              placeholder: 0
              defvalue: '0'
          -
            class_name: TestWizardParam
            id: 41
            label: 'Item Time Limit'
            description: 'Time limit, in seconds, for each item.&nbsp;<strong>0</strong> for none.'
            hideCondition: ''
            type: 0
            passableThroughUrl: '0'
            value: '0'
            testVariable: 252
            name: itemTimeLimit
            wizardStep: 14
            stepTitle: 'Stopping Rules'
            order: 0
            wizard: 9
            definition:
              placeholder: 0
              defvalue: '0'
          -
            class_name: TestWizardParam
            id: 42
            label: 'Sufficient Item Time Required'
            description: 'If checked your total test time left must be greater or equal to item time limit. Otherwise no further questions will be shown.'
            hideCondition: 'values.testTimeLimit == 0 || values.itemTimeLimit == 0'
            type: 4
            passableThroughUrl: '0'
            value: '0'
            testVariable: 259
            name: itemTimeFullRequired
            wizardStep: 14
            stepTitle: 'Stopping Rules'
            order: 0
            wizard: 9
            definition:
              placeholder: 0
              defvalue: '0'
          -
            class_name: TestWizardParam
            id: 43
            label: 'Item Number Limit'
            description: 'Maximum number of items.&nbsp;<strong>0&nbsp;</strong>for no limit.'
            hideCondition: ''
            type: 0
            passableThroughUrl: '0'
            value: '0'
            testVariable: 258
            name: itemNumLimit
            wizardStep: 14
            stepTitle: 'Stopping Rules'
            order: 0
            wizard: 9
            definition:
              placeholder: 0
              defvalue: '0'
      -
        class_name: TestWizardStep
        id: 15
        title: Responses
        description: ''
        orderNum: 0
        colsNum: 0
        wizard: 9
        params:
          -
            class_name: TestWizardParam
            id: 44
            label: 'Response Bank'
            description: 'Response column mapping. Don&#39;t select any table if you do not wish to store responses in your data tables.'
            hideCondition: ''
            type: 12
            passableThroughUrl: '0'
            value: '[]'
            testVariable: 255
            name: responseBank
            wizardStep: 15
            stepTitle: Responses
            order: 0
            wizard: 9
            definition:
              placeholder: 0
              cols:
                -
                  name: id
                  label: Id
                  tooltip: ''
                -
                  name: item_id
                  label: 'Item Id'
                  tooltip: ''
                -
                  name: response
                  label: Response
                  tooltip: ''
                -
                  name: timeTaken
                  label: 'Time Taken'
                  tooltip: ''
                -
                  name: session_id
                  label: 'Session Id'
                  tooltip: ''
                -
                  name: score
                  label: Score
                  tooltip: ''
                -
                  name: trait
                  label: Trait
                  tooltip: ''
          -
            class_name: TestWizardParam
            id: 45
            label: 'Response required'
            description: 'Are responses required?'
            hideCondition: ''
            type: 4
            passableThroughUrl: '0'
            value: '0'
            testVariable: 262
            name: responseRequired
            wizardStep: 15
            stepTitle: Responses
            order: 0
            wizard: 9
            definition:
              placeholder: 0
              defvalue: '0'
          -
            class_name: TestWizardParam
            id: 46
            label: 'Response required alert'
            description: 'Alert when no response is given.'
            hideCondition: 'values.responseRequired == 0'
            type: 0
            passableThroughUrl: '0'
            value: 'Response required!'
            testVariable: 263
            name: responseRequiredAlert
            wizardStep: 15
            stepTitle: Responses
            order: 0
            wizard: 9
            definition:
              placeholder: 0
              defvalue: 'Response required!'
      -
        class_name: TestWizardStep
        id: 16
        title: Modules
        description: 'Test modules. Each module is a separate test that can use specific input variables and must return specific return variables.'
        orderNum: 0
        colsNum: 0
        wizard: 9
        params:
          -
            class_name: TestWizardParam
            id: 47
            label: 'Next Item Selector Module'
            description: |
              <p>Next item selector module. Needs to return:</p>
              
              <ul>
              	<li><strong>nextItem</strong>&nbsp;- list, next item to show</li>
              	<li><strong>nextItemIndex</strong>&nbsp;- numerical, index of next item to show</li>
              	<li><strong>nextItemSafe</strong>&nbsp;- list, next item to show with all sensitive data fields removed</li>
              	<li><strong>pastResponseSafe&nbsp;</strong>- list, past response for next item with all sensitive data fields removed</li>
              </ul>
              
            hideCondition: ''
            type: 8
            passableThroughUrl: '0'
            value: _linearTestNextItemSelectorModule
            testVariable: 251
            name: nextItemSelectorModule
            wizardStep: 16
            stepTitle: Modules
            order: 0
            wizard: 9
            definition:
              placeholder: 0
              defvalue: _linearTestNextItemSelectorModule
          -
            class_name: TestWizardParam
            id: 48
            label: 'Scoring Module'
            description: |
              <p>Scoring module. Needs to return:</p>
              
              <ul>
              	<li><strong>score&nbsp;</strong>- numerical, score for last response given</li>
              	<li><strong>scores</strong>&nbsp;- vector, scores for all past responses</li>
              	<li><strong>traitScores</strong>&nbsp;- list, keys are trait names and values are total scores for given trait</li>
              </ul>
              
            hideCondition: ''
            type: 8
            passableThroughUrl: '0'
            value: _linearTestScoringModule
            testVariable: 254
            name: scoringModule
            wizardStep: 16
            stepTitle: Modules
            order: 0
            wizard: 9
            definition:
              placeholder: 0
              defvalue: _linearTestScoringModule
          -
            class_name: TestWizardParam
            id: 49
            label: 'Response Processor Module'
            description: |
              <p>Response processor module. Must return:</p>
              
              <ul>
              	<li><strong>direction</strong>&nbsp;- numerical, positive for next item, negative for previous item</li>
              	<li><strong>itemsAdministered</strong>&nbsp;- vector, contains all indices of already administered items</li>
              	<li><strong>responseId</strong>&nbsp;- id of inserted response record to database</li>
              </ul>
              
            hideCondition: ''
            type: 8
            passableThroughUrl: '0'
            value: _linearTestResponseProcessorModule
            testVariable: 257
            name: responseProcessorModule
            wizardStep: 16
            stepTitle: Modules
            order: 0
            wizard: 9
            definition:
              placeholder: 0
              defvalue: _linearTestResponseProcessorModule
          -
            class_name: TestWizardParam
            id: 50
            label: 'Status Check Module'
            description: |
              <p>Status check module. Checks whether test should continue or end. Must return:</p>
              
              <ul>
              	<li><strong>.branch&nbsp;</strong>- string, shoul be&nbsp;<strong>continue </strong>if test should continue or&nbsp;<strong>stop&nbsp;</strong>if it should be stopped</li>
              </ul>
              
            hideCondition: ''
            type: 8
            passableThroughUrl: '0'
            value: _linearTestStatusCheckModule
            testVariable: 260
            name: statusCheckModule
            wizardStep: 16
            stepTitle: Modules
            order: 0
            wizard: 9
            definition:
              placeholder: 0
              defvalue: _linearTestStatusCheckModule
    test: 30
    groups: ''
    starterContent: true
    hash: b6cce42f3a30909a498e2e82ca387773a93dbead
  -
    class_name: Test
    id: 35
    name: linearTest
    accessibility: 0
    archived: '0'
    visibility: 2
    type: 1
    code: null
    description: 'Linear test.'
    variables:
      -
        class_name: TestVariable
        id: 311
        name: out
        type: 2
        description: ''
        passableThroughUrl: '0'
        value: '0'
        test: 35
        parentVariable: 244
      -
        class_name: TestVariable
        id: 312
        name: itemBankItems
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: '[{"id":"1","question":"10 + 10","orderIndex":"1","trait":"math","responseOptions":{"type":"options","openCorrect":"","openScore":"1","options":[{"value":"20","label":"20","score":"1"},{"value":"200","label":"200","score":"0"},{"value":"2000","label":"2000","score":"0"}],"optionsRandomOrder":"1"}},{"id":"2","question":"100 + 100","orderIndex":"2","trait":"math","responseOptions":{"type":"options","openCorrect":"","openScore":"1","options":[{"value":"20","label":"20","score":"0"},{"value":"200","label":"200","score":"1"},{"value":"2000","label":"2000","score":"0"}],"optionsRandomOrder":"1"}},{"id":"3","question":"1000 + 1000","orderIndex":"3","trait":"math","responseOptions":{"type":"options","openCorrect":"","openScore":"1","options":[{"value":"20","label":"20","score":"0"},{"value":"200","label":"200","score":"0"},{"value":"2000","label":"2000","score":"1"}],"optionsRandomOrder":"1"}}]'
        test: 35
        parentVariable: 245
      -
        class_name: TestVariable
        id: 313
        name: itemBankTable
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: '[]'
        test: 35
        parentVariable: 246
      -
        class_name: TestVariable
        id: 314
        name: itemBankType
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: direct
        test: 35
        parentVariable: 247
      -
        class_name: TestVariable
        id: 315
        name: testTimeLimit
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: '0'
        test: 35
        parentVariable: 248
      -
        class_name: TestVariable
        id: 316
        name: testTimeLimitOffset
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: '0'
        test: 35
        parentVariable: 249
      -
        class_name: TestVariable
        id: 317
        name: order
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: random
        test: 35
        parentVariable: 250
      -
        class_name: TestVariable
        id: 318
        name: nextItemSelectorModule
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: _linearTestNextItemSelectorModule
        test: 35
        parentVariable: 251
      -
        class_name: TestVariable
        id: 319
        name: itemTimeLimit
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: '0'
        test: 35
        parentVariable: 252
      -
        class_name: TestVariable
        id: 320
        name: itemTemplate
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: linearTest
        test: 35
        parentVariable: 253
      -
        class_name: TestVariable
        id: 321
        name: scoringModule
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: _linearTestScoringModule
        test: 35
        parentVariable: 254
      -
        class_name: TestVariable
        id: 322
        name: responseBank
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: '[]'
        test: 35
        parentVariable: 255
      -
        class_name: TestVariable
        id: 323
        name: session
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 35
        parentVariable: 256
      -
        class_name: TestVariable
        id: 324
        name: responseProcessorModule
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: _linearTestResponseProcessorModule
        test: 35
        parentVariable: 257
      -
        class_name: TestVariable
        id: 325
        name: itemNumLimit
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: '0'
        test: 35
        parentVariable: 258
      -
        class_name: TestVariable
        id: 326
        name: itemTimeFullRequired
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: '0'
        test: 35
        parentVariable: 259
      -
        class_name: TestVariable
        id: 327
        name: statusCheckModule
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: _linearTestStatusCheckModule
        test: 35
        parentVariable: 260
      -
        class_name: TestVariable
        id: 328
        name: canGoBack
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: '0'
        test: 35
        parentVariable: 261
      -
        class_name: TestVariable
        id: 329
        name: responseRequired
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: '0'
        test: 35
        parentVariable: 262
      -
        class_name: TestVariable
        id: 330
        name: responseRequiredAlert
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: 'Response required!'
        test: 35
        parentVariable: 263
      -
        class_name: TestVariable
        id: 331
        name: scores
        type: 1
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 35
        parentVariable: 264
    sourceWizard: 9
    sourceWizardTest: 30
    nodes: {  }
    nodesConnections: {  }
    tags: _concerto_core
    groups: ''
    starterContent: true
    hash: 824df99c81870f3e333885658b0ac185d63b38e6
  -
    class_name: Test
    id: 36
    name: _form
    accessibility: 0
    archived: '0'
    visibility: 2
    type: 0
    code: |
      getTemplateParams = function(templateParams, fields, initialValues) {
        if(!is.list(templateParams)) {
          templateParams = list()
        }
        for(name in .dynamicInputs) {
          templateParams[[name]] = get(name)
        }
        templateParams$fields = fields
        templateParams$initialValues = initialValues
        return(templateParams)
      }
      
      response = concerto5:::concerto.template.show(
        template,
        params=getTemplateParams(templateParams, fields, initialValues)
      )
      
      for(.name in .dynamicReturns) {
        assign(.name, response[[.name]])
      }
      if(".branch" %in% .dynamicReturns) {
        .branch = response$buttonPressed
        if(!(.branch %in% .dynamicBranches)) { .branch = "out" }
      }
      
    description: ''
    variables:
      -
        class_name: TestVariable
        id: 332
        name: out
        type: 2
        description: ''
        passableThroughUrl: '0'
        value: '0'
        test: 36
        parentVariable: null
      -
        class_name: TestVariable
        id: 333
        name: fields
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 36
        parentVariable: null
      -
        class_name: TestVariable
        id: 334
        name: templateParams
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 36
        parentVariable: null
      -
        class_name: TestVariable
        id: 335
        name: response
        type: 1
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 36
        parentVariable: null
      -
        class_name: TestVariable
        id: 336
        name: template
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 36
        parentVariable: null
      -
        class_name: TestVariable
        id: 337
        name: initialValues
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: '{}'
        test: 36
        parentVariable: null
    sourceWizard: null
    sourceWizardTest: null
    nodes: {  }
    nodesConnections: {  }
    tags: ''
    groups: ''
    starterContent: true
    hash: bb09fa732c92ffea91531b78882526256bfd2cf5
  -
    class_name: TestWizard
    id: 10
    name: form
    description: ''
    accessibility: 0
    archived: '0'
    steps:
      -
        class_name: TestWizardStep
        id: 17
        title: Form
        description: ''
        orderNum: 0
        colsNum: 0
        wizard: 10
        params:
          -
            class_name: TestWizardParam
            id: 51
            label: Template
            description: 'Layout template to use for form.'
            hideCondition: ''
            type: 5
            passableThroughUrl: '0'
            value: form
            testVariable: 336
            name: template
            wizardStep: 17
            stepTitle: Form
            order: 0
            wizard: 10
            definition:
              placeholder: 0
              defvalue: form
          -
            class_name: TestWizardParam
            id: 52
            label: Fields
            description: 'List of fields for form.'
            hideCondition: ''
            type: 10
            passableThroughUrl: '0'
            value: '[]'
            testVariable: 333
            name: fields
            wizardStep: 17
            stepTitle: Form
            order: 0
            wizard: 10
            definition:
              element:
                type: 9
                definition:
                  placeholder: 0
                  fields:
                    -
                      type: 0
                      name: name
                      label: Name
                      definition:
                        placeholder: 0
                    -
                      type: 0
                      name: label
                      label: Label
                      definition:
                        placeholder: 0
                    -
                      type: 3
                      name: type
                      label: Type
                      definition:
                        placeholder: 0
                        options:
                          -
                            value: singleLine
                            label: 'Single line text'
                            order: 0
                          -
                            value: multiLine
                            label: 'Multi line text'
                            order: 2
                          -
                            value: checkbox
                            label: Checkbox
                            order: 3
                          -
                            value: password
                            label: Password
                            order: 1
                        defvalue: singleLine
                    -
                      type: 10
                      name: validation
                      label: Validation
                      definition:
                        placeholder: 0
                        element:
                          type: 9
                          definition:
                            placeholder: 0
                            fields:
                              -
                                type: 3
                                name: type
                                label: Type
                                definition:
                                  placeholder: 0
                                  options:
                                    -
                                      value: required
                                      label: Required
                                    -
                                      value: minlength
                                      label: 'Min length'
                                    -
                                      value: maxlength
                                      label: 'Max length'
                                    -
                                      value: min
                                      label: Min
                                    -
                                      value: max
                                      label: Max
                                    -
                                      value: pattern
                                      label: Pattern
                                  defvalue: required
                                hideCondition: ''
                              -
                                type: 0
                                name: value
                                label: Value
                                definition:
                                  placeholder: 0
                                hideCondition: 'parent.type != "minlength" && parent.type != "maxlength" && parent.type != "min" && parent.type != "max" && parent.type != "pattern"'
                              -
                                type: 0
                                name: alert
                                label: Alert
                                definition:
                                  placeholder: 0
                                  defvalue: 'Invalid value!'
    test: 36
    groups: ''
    starterContent: true
    hash: ae9f046fe18e16d49b5dc6f9735fd8de31381451
  -
    class_name: Test
    id: 37
    name: form
    accessibility: 0
    archived: '0'
    visibility: 2
    type: 1
    code: null
    description: 'Form page.'
    variables:
      -
        class_name: TestVariable
        id: 338
        name: out
        type: 2
        description: ''
        passableThroughUrl: '0'
        value: '0'
        test: 37
        parentVariable: 332
      -
        class_name: TestVariable
        id: 339
        name: fields
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: '[]'
        test: 37
        parentVariable: 333
      -
        class_name: TestVariable
        id: 340
        name: templateParams
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 37
        parentVariable: 334
      -
        class_name: TestVariable
        id: 341
        name: response
        type: 1
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 37
        parentVariable: 335
      -
        class_name: TestVariable
        id: 342
        name: template
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: form
        test: 37
        parentVariable: 336
      -
        class_name: TestVariable
        id: 343
        name: initialValues
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 37
        parentVariable: 337
    sourceWizard: 10
    sourceWizardTest: 36
    nodes: {  }
    nodesConnections: {  }
    tags: _concerto_core
    groups: ''
    starterContent: true
    hash: 9d7d1b5a31a55051cc50d98b1580c2a9b4efdd89
  -
    class_name: Test
    id: 38
    name: _questionnaireInitialization
    accessibility: 0
    archived: '0'
    visibility: 2
    type: 0
    code: |
      getItems = function(itemBankType, itemBankItems, itemBankTable, order){
        items = NULL
        if(itemBankType == "table") {
          tableMap = fromJSON(itemBankTable)
          table = tableMap$table
          questionColumn = tableMap$columns$question
          orderIndexColumn = tableMap$columns$orderIndex
          traitColumn = tableMap$columns$trait
          reversedScoreColumn = tableMap$columns$reversedScore
          items = concerto.table.query(
            "
      SELECT 
      id, 
      {{questionColumn}} AS question, 
      {{orderIndexColumn}} AS orderIndex,
      {{traitColumn}} AS trait,
      {{reversedScoreColumn}} AS reversedScore
      FROM {{table}} 
      ORDER BY {{orderIndexColumn}}
      ", 
            list(
              questionColumn=questionColumn,
              orderIndexColumn=orderIndexColumn,
              traitColumn=traitColumn,
              reversedScoreColumn=reversedScoreColumn,
              table=table
            ))
        }
        if(itemBankType == "direct") {
          itemBankItems = fromJSON(itemBankItems)
          if(length(itemBankItems) > 0) {
            for(i in 1:length(itemBankItems)) {
              itemBankItems[[i]]$responseOptions = as.character(toJSON(itemBankItems[[i]]$responseOptions)) #response options don't fit into flat table, so turn them back to JSON.
              items = rbind(items, data.frame(itemBankItems[[i]], stringsAsFactors=F))
            }
          }
        } 
      
        if(dim(items)[1] == 0) { stop("Item bank must not be empty!") }
        if(order == "random") {
          items = items[sample(1:dim(items)[1]),]
        }
        return(items)
      }
      
      items = getItems(settings$itemBankType, settings$itemBankItems, settings$itemBankTable, settings$order)
      
      itemsAdministered = NULL
      scores = list()
      traitScores = list()
      
      testTimeStarted = as.numeric(Sys.time())
      testTimeLeft = as.numeric(settings$testTimeLimit) + as.numeric(settings$testTimeLimitOffset)
      concerto.log(settings$testTimeLimit, "testTimeLimit")
      concerto.log(settings$testTimeLimitOffset, "testTimeLimitOffset")
      concerto.log(testTimeLeft, "testTimeLeft")
      
    description: ''
    variables:
      -
        class_name: TestVariable
        id: 344
        name: out
        type: 2
        description: ''
        passableThroughUrl: '0'
        value: '0'
        test: 38
        parentVariable: null
      -
        class_name: TestVariable
        id: 345
        name: settings
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 38
        parentVariable: null
      -
        class_name: TestVariable
        id: 346
        name: items
        type: 1
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 38
        parentVariable: null
      -
        class_name: TestVariable
        id: 347
        name: itemsAdministered
        type: 1
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 38
        parentVariable: null
      -
        class_name: TestVariable
        id: 348
        name: testTimeStarted
        type: 1
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 38
        parentVariable: null
      -
        class_name: TestVariable
        id: 349
        name: testTimeLeft
        type: 1
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 38
        parentVariable: null
      -
        class_name: TestVariable
        id: 350
        name: traitScores
        type: 1
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 38
        parentVariable: null
      -
        class_name: TestVariable
        id: 351
        name: scores
        type: 1
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 38
        parentVariable: null
    sourceWizard: null
    sourceWizardTest: null
    nodes: {  }
    nodesConnections: {  }
    tags: ''
    groups: ''
    starterContent: true
    hash: e97e569c0cbfe6d1da72a790e3c2580e4958fc6c
  -
    class_name: Test
    id: 39
    name: _questionnaireShowItem
    accessibility: 0
    archived: '0'
    visibility: 2
    type: 0
    code: |
      getData = function(itemsSafe, responsesSafe, canGoBack, templateParams, responseRequired, responseRequiredAlert, page, totalPages, responseOptions) {
        templateParams$items = itemsSafe
        templateParams$canGoBack = canGoBack
        templateParams$responses = responsesSafe
        templateParams$responseRequired = responseRequired
        templateParams$responseRequiredAlert = responseRequiredAlert
        templateParams$page = page
        templateParams$totalPages = totalPages
        templateParams$responseOptions = responseOptions
      
        return(templateParams)
      }
      
      getTimeLimit = function(testTimeStarted, testTimeLimit, itemTimeLimit) {
        limit = 0
        startedAgo = as.numeric(Sys.time()) - testTimeStarted
        testTimeLeft = 0
        if(testTimeLimit > 0) {
          testTimeLeft = max(testTimeLimit - startedAgo, 1)
          limit = testTimeLeft
        }
        if(itemTimeLimit > 0) {
          if(limit > 0) {
            limit = min(limit, itemTimeLimit)
          } else {
            limit = itemTimeLimit
          }
        }
        return(limit)
      }
      
      canGoBack = if(settings$canGoBack == "1" && itemIndex > 1) { 1 } else { 0 }
      totalPages = ceiling(dim(items)[1] / as.numeric(settings$itemsPerPage))
      response = concerto.template.show(
        settings$itemTemplate, 
        params=getData(
          itemsSafe, 
          responsesSafe, 
          canGoBack, 
          templateParams, 
          settings$responseRequired, 
          settings$responseRequiredAlert, 
          page, 
          totalPages, 
          fromJSON(settings$responseOptions)
        ), 
        timeLimit=getTimeLimit(
          testTimeStarted, 
          as.numeric(settings$testTimeLimit), 
          as.numeric(settings$itemTimeLimit)
        )
      )
      
      .branch = "submitted"
      if(response$isTimeout == 1) { .branch = "outOfTime" }
      
    description: ''
    variables:
      -
        class_name: TestVariable
        id: 352
        name: outOfTime
        type: 2
        description: ''
        passableThroughUrl: '0'
        value: '0'
        test: 39
        parentVariable: null
      -
        class_name: TestVariable
        id: 353
        name: items
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 39
        parentVariable: null
      -
        class_name: TestVariable
        id: 354
        name: currentItemsIndices
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 39
        parentVariable: null
      -
        class_name: TestVariable
        id: 355
        name: itemsSafe
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 39
        parentVariable: null
      -
        class_name: TestVariable
        id: 356
        name: responsesSafe
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 39
        parentVariable: null
      -
        class_name: TestVariable
        id: 357
        name: settings
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 39
        parentVariable: null
      -
        class_name: TestVariable
        id: 358
        name: templateParams
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 39
        parentVariable: null
      -
        class_name: TestVariable
        id: 359
        name: testTimeLeft
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 39
        parentVariable: null
      -
        class_name: TestVariable
        id: 360
        name: testTimeStarted
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 39
        parentVariable: null
      -
        class_name: TestVariable
        id: 361
        name: response
        type: 1
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 39
        parentVariable: null
      -
        class_name: TestVariable
        id: 362
        name: page
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 39
        parentVariable: null
      -
        class_name: TestVariable
        id: 363
        name: .branch
        type: 1
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 39
        parentVariable: null
      -
        class_name: TestVariable
        id: 364
        name: submitted
        type: 2
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 39
        parentVariable: null
    sourceWizard: null
    sourceWizardTest: null
    nodes: {  }
    nodesConnections: {  }
    tags: ''
    groups: ''
    starterContent: true
    hash: ad585a21df6e5a812a5e4389326f381c02459459
  -
    class_name: Test
    id: 40
    name: _questionnaire
    accessibility: 0
    archived: '0'
    visibility: 2
    type: 2
    code: null
    description: ''
    variables:
      -
        class_name: TestVariable
        id: 365
        name: out
        type: 2
        description: ''
        passableThroughUrl: '0'
        value: '0'
        test: 40
        parentVariable: null
      -
        class_name: TestVariable
        id: 366
        name: itemTemplate
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 40
        parentVariable: null
      -
        class_name: TestVariable
        id: 367
        name: order
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 40
        parentVariable: null
      -
        class_name: TestVariable
        id: 368
        name: itemBankItems
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 40
        parentVariable: null
      -
        class_name: TestVariable
        id: 369
        name: itemBankTable
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 40
        parentVariable: null
      -
        class_name: TestVariable
        id: 370
        name: itemBankType
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 40
        parentVariable: null
      -
        class_name: TestVariable
        id: 371
        name: itemsPerPage
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 40
        parentVariable: null
      -
        class_name: TestVariable
        id: 372
        name: canGoBack
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 40
        parentVariable: null
      -
        class_name: TestVariable
        id: 373
        name: responseOptions
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 40
        parentVariable: null
      -
        class_name: TestVariable
        id: 374
        name: responseRequired
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 40
        parentVariable: null
      -
        class_name: TestVariable
        id: 375
        name: responseRequiredAlert
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 40
        parentVariable: null
      -
        class_name: TestVariable
        id: 376
        name: responseBank
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 40
        parentVariable: null
      -
        class_name: TestVariable
        id: 377
        name: testTimeLimit
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 40
        parentVariable: null
      -
        class_name: TestVariable
        id: 378
        name: testTimeLimitOffset
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: '0'
        test: 40
        parentVariable: null
      -
        class_name: TestVariable
        id: 379
        name: itemTimeLimit
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 40
        parentVariable: null
      -
        class_name: TestVariable
        id: 380
        name: nextItemSelectorModule
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 40
        parentVariable: null
      -
        class_name: TestVariable
        id: 381
        name: scoringModule
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 40
        parentVariable: null
      -
        class_name: TestVariable
        id: 382
        name: session
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 40
        parentVariable: null
      -
        class_name: TestVariable
        id: 383
        name: responseProcessorModule
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 40
        parentVariable: null
      -
        class_name: TestVariable
        id: 384
        name: itemNumLimit
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 40
        parentVariable: null
      -
        class_name: TestVariable
        id: 385
        name: itemTimeFullRequired
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 40
        parentVariable: null
      -
        class_name: TestVariable
        id: 386
        name: statusCheckModule
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 40
        parentVariable: null
      -
        class_name: TestVariable
        id: 387
        name: scores
        type: 1
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 40
        parentVariable: null
    sourceWizard: null
    sourceWizardTest: null
    nodes:
      -
        class_name: TestNode
        id: 51
        title: ''
        type: 1
        posX: 15002
        posY: 15010
        flowTest: 40
        sourceTest: 40
        sourceTestName: _questionnaire
        sourceTestDescription: ''
        ports:
          -
            class_name: TestNodePort
            id: 611
            value: null
            node: 51
            variable: 366
            variableObject:
              class_name: TestVariable
              id: 366
              name: itemTemplate
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 40
              parentVariable: null
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 1
            exposed: '0'
            name: itemTemplate
            pointer: '0'
            pointerVariable: itemTemplate
          -
            class_name: TestNodePort
            id: 612
            value: null
            node: 51
            variable: 367
            variableObject:
              class_name: TestVariable
              id: 367
              name: order
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 40
              parentVariable: null
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 1
            exposed: '0'
            name: order
            pointer: '0'
            pointerVariable: order
          -
            class_name: TestNodePort
            id: 613
            value: null
            node: 51
            variable: 368
            variableObject:
              class_name: TestVariable
              id: 368
              name: itemBankItems
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 40
              parentVariable: null
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 1
            exposed: '0'
            name: itemBankItems
            pointer: '0'
            pointerVariable: itemBankItems
          -
            class_name: TestNodePort
            id: 614
            value: null
            node: 51
            variable: 369
            variableObject:
              class_name: TestVariable
              id: 369
              name: itemBankTable
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 40
              parentVariable: null
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 1
            exposed: '0'
            name: itemBankTable
            pointer: '0'
            pointerVariable: itemBankTable
          -
            class_name: TestNodePort
            id: 615
            value: null
            node: 51
            variable: 370
            variableObject:
              class_name: TestVariable
              id: 370
              name: itemBankType
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 40
              parentVariable: null
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 1
            exposed: '0'
            name: itemBankType
            pointer: '0'
            pointerVariable: itemBankType
          -
            class_name: TestNodePort
            id: 616
            value: null
            node: 51
            variable: 371
            variableObject:
              class_name: TestVariable
              id: 371
              name: itemsPerPage
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 40
              parentVariable: null
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 1
            exposed: '0'
            name: itemsPerPage
            pointer: '0'
            pointerVariable: itemsPerPage
          -
            class_name: TestNodePort
            id: 617
            value: null
            node: 51
            variable: 372
            variableObject:
              class_name: TestVariable
              id: 372
              name: canGoBack
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 40
              parentVariable: null
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 1
            exposed: '0'
            name: canGoBack
            pointer: '0'
            pointerVariable: canGoBack
          -
            class_name: TestNodePort
            id: 618
            value: null
            node: 51
            variable: 373
            variableObject:
              class_name: TestVariable
              id: 373
              name: responseOptions
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 40
              parentVariable: null
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 1
            exposed: '0'
            name: responseOptions
            pointer: '0'
            pointerVariable: responseOptions
          -
            class_name: TestNodePort
            id: 619
            value: null
            node: 51
            variable: 374
            variableObject:
              class_name: TestVariable
              id: 374
              name: responseRequired
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 40
              parentVariable: null
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 1
            exposed: '0'
            name: responseRequired
            pointer: '0'
            pointerVariable: responseRequired
          -
            class_name: TestNodePort
            id: 620
            value: null
            node: 51
            variable: 375
            variableObject:
              class_name: TestVariable
              id: 375
              name: responseRequiredAlert
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 40
              parentVariable: null
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 1
            exposed: '0'
            name: responseRequiredAlert
            pointer: '0'
            pointerVariable: responseRequiredAlert
          -
            class_name: TestNodePort
            id: 621
            value: null
            node: 51
            variable: 376
            variableObject:
              class_name: TestVariable
              id: 376
              name: responseBank
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 40
              parentVariable: null
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 1
            exposed: '0'
            name: responseBank
            pointer: '0'
            pointerVariable: responseBank
          -
            class_name: TestNodePort
            id: 622
            value: null
            node: 51
            variable: 377
            variableObject:
              class_name: TestVariable
              id: 377
              name: testTimeLimit
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 40
              parentVariable: null
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 1
            exposed: '0'
            name: testTimeLimit
            pointer: '0'
            pointerVariable: testTimeLimit
          -
            class_name: TestNodePort
            id: 623
            value: '0'
            node: 51
            variable: 378
            variableObject:
              class_name: TestVariable
              id: 378
              name: testTimeLimitOffset
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: '0'
              test: 40
              parentVariable: null
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 1
            exposed: '0'
            name: testTimeLimitOffset
            pointer: '0'
            pointerVariable: testTimeLimitOffset
          -
            class_name: TestNodePort
            id: 624
            value: null
            node: 51
            variable: 379
            variableObject:
              class_name: TestVariable
              id: 379
              name: itemTimeLimit
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 40
              parentVariable: null
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 1
            exposed: '0'
            name: itemTimeLimit
            pointer: '0'
            pointerVariable: itemTimeLimit
          -
            class_name: TestNodePort
            id: 625
            value: null
            node: 51
            variable: 380
            variableObject:
              class_name: TestVariable
              id: 380
              name: nextItemSelectorModule
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 40
              parentVariable: null
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 1
            exposed: '0'
            name: nextItemSelectorModule
            pointer: '0'
            pointerVariable: nextItemSelectorModule
          -
            class_name: TestNodePort
            id: 626
            value: null
            node: 51
            variable: 381
            variableObject:
              class_name: TestVariable
              id: 381
              name: scoringModule
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 40
              parentVariable: null
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 1
            exposed: '0'
            name: scoringModule
            pointer: '0'
            pointerVariable: scoringModule
          -
            class_name: TestNodePort
            id: 627
            value: null
            node: 51
            variable: 382
            variableObject:
              class_name: TestVariable
              id: 382
              name: session
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 40
              parentVariable: null
            string: '1'
            defaultValue: '0'
            dynamic: '0'
            type: 1
            exposed: '0'
            name: session
            pointer: '1'
            pointerVariable: session
          -
            class_name: TestNodePort
            id: 628
            value: null
            node: 51
            variable: 383
            variableObject:
              class_name: TestVariable
              id: 383
              name: responseProcessorModule
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 40
              parentVariable: null
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 1
            exposed: '0'
            name: responseProcessorModule
            pointer: '0'
            pointerVariable: responseProcessorModule
          -
            class_name: TestNodePort
            id: 629
            value: null
            node: 51
            variable: 384
            variableObject:
              class_name: TestVariable
              id: 384
              name: itemNumLimit
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 40
              parentVariable: null
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 1
            exposed: '0'
            name: itemNumLimit
            pointer: '0'
            pointerVariable: itemNumLimit
          -
            class_name: TestNodePort
            id: 630
            value: null
            node: 51
            variable: 385
            variableObject:
              class_name: TestVariable
              id: 385
              name: itemTimeFullRequired
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 40
              parentVariable: null
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 1
            exposed: '0'
            name: itemTimeFullRequired
            pointer: '0'
            pointerVariable: itemTimeFullRequired
          -
            class_name: TestNodePort
            id: 631
            value: null
            node: 51
            variable: 386
            variableObject:
              class_name: TestVariable
              id: 386
              name: statusCheckModule
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 40
              parentVariable: null
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 1
            exposed: '0'
            name: statusCheckModule
            pointer: '0'
            pointerVariable: statusCheckModule
      -
        class_name: TestNode
        id: 52
        title: ''
        type: 2
        posX: 17337
        posY: 15782
        flowTest: 40
        sourceTest: 40
        sourceTestName: _questionnaire
        sourceTestDescription: ''
        ports:
          -
            class_name: TestNodePort
            id: 632
            value: null
            node: 52
            variable: 387
            variableObject:
              class_name: TestVariable
              id: 387
              name: scores
              type: 1
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 40
              parentVariable: null
            string: '1'
            defaultValue: '0'
            dynamic: '0'
            type: 0
            exposed: '0'
            name: scores
            pointer: '1'
            pointerVariable: traitScores
      -
        class_name: TestNode
        id: 53
        title: 'create settings'
        type: 0
        posX: 15354
        posY: 15018
        flowTest: 40
        sourceTest: 19
        sourceTestName: createList
        sourceTestDescription: 'List creation. Dynamic inputs will be used as list elements (input name as list key, input value as list value).'
        ports:
          -
            class_name: TestNodePort
            id: 633
            value: null
            node: 53
            variable: 113
            variableObject:
              class_name: TestVariable
              id: 113
              name: sourceList
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 19
              parentVariable: null
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 0
            exposed: '0'
            name: sourceList
            pointer: '0'
            pointerVariable: sourceList
          -
            class_name: TestNodePort
            id: 634
            value: null
            node: 53
            variable: 114
            variableObject:
              class_name: TestVariable
              id: 114
              name: result
              type: 1
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 19
              parentVariable: null
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 1
            exposed: '1'
            name: result
            pointer: '0'
            pointerVariable: result
          -
            class_name: TestNodePort
            id: 635
            value: '0'
            node: 53
            variable: 112
            variableObject:
              class_name: TestVariable
              id: 112
              name: out
              type: 2
              description: ''
              passableThroughUrl: '0'
              value: '0'
              test: 19
              parentVariable: null
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 2
            exposed: '1'
            name: out
            pointer: '0'
            pointerVariable: out
          -
            class_name: TestNodePort
            id: 636
            value: ''
            node: 53
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '1'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: canGoBack
            pointer: '0'
            pointerVariable: canGoBack
          -
            class_name: TestNodePort
            id: 637
            value: ''
            node: 53
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '1'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: itemBankItems
            pointer: '0'
            pointerVariable: itemBankItems
          -
            class_name: TestNodePort
            id: 638
            value: ''
            node: 53
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '1'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: itemBankTable
            pointer: '0'
            pointerVariable: itemBankTable
          -
            class_name: TestNodePort
            id: 639
            value: ''
            node: 53
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '1'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: itemBankType
            pointer: '0'
            pointerVariable: itemBankType
          -
            class_name: TestNodePort
            id: 640
            value: ''
            node: 53
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '1'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: itemNumLimit
            pointer: '0'
            pointerVariable: itemNumLimit
          -
            class_name: TestNodePort
            id: 641
            value: ''
            node: 53
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '1'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: itemsPerPage
            pointer: '0'
            pointerVariable: itemsPerPage
          -
            class_name: TestNodePort
            id: 642
            value: ''
            node: 53
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '1'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: itemTemplate
            pointer: '0'
            pointerVariable: itemTemplate
          -
            class_name: TestNodePort
            id: 643
            value: ''
            node: 53
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '1'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: itemTimeFullRequired
            pointer: '0'
            pointerVariable: itemTimeFullRequired
          -
            class_name: TestNodePort
            id: 644
            value: ''
            node: 53
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '1'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: itemTimeLimit
            pointer: '0'
            pointerVariable: itemTimeLimit
          -
            class_name: TestNodePort
            id: 645
            value: ''
            node: 53
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '1'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: order
            pointer: '0'
            pointerVariable: order
          -
            class_name: TestNodePort
            id: 646
            value: ''
            node: 53
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '1'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: responseBank
            pointer: '0'
            pointerVariable: responseBank
          -
            class_name: TestNodePort
            id: 647
            value: ''
            node: 53
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '1'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: responseOptions
            pointer: '0'
            pointerVariable: responseOptions
          -
            class_name: TestNodePort
            id: 648
            value: ''
            node: 53
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '1'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: responseRequired
            pointer: '0'
            pointerVariable: responseRequired
          -
            class_name: TestNodePort
            id: 649
            value: ''
            node: 53
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '1'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: responseRequiredAlert
            pointer: '0'
            pointerVariable: responseRequiredAlert
          -
            class_name: TestNodePort
            id: 650
            value: ''
            node: 53
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '1'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: testTimeLimit
            pointer: '0'
            pointerVariable: testTimeLimit
          -
            class_name: TestNodePort
            id: 651
            value: ''
            node: 53
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '1'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: testTimeLimitOffset
            pointer: '0'
            pointerVariable: testTimeLimitOffset
      -
        class_name: TestNode
        id: 54
        title: 'set settings'
        type: 0
        posX: 15704
        posY: 15018
        flowTest: 40
        sourceTest: 11
        sourceTestName: set
        sourceTestDescription: 'Promote variables. Use dynamic inputs to declare which variables you want to promote.'
        ports:
          -
            class_name: TestNodePort
            id: 652
            value: '0'
            node: 54
            variable: 75
            variableObject:
              class_name: TestVariable
              id: 75
              name: out
              type: 2
              description: ''
              passableThroughUrl: '0'
              value: '0'
              test: 11
              parentVariable: null
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 2
            exposed: '1'
            name: out
            pointer: '0'
            pointerVariable: out
          -
            class_name: TestNodePort
            id: 653
            value: ''
            node: 54
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '1'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: settings
            pointer: '0'
            pointerVariable: settings
      -
        class_name: TestNode
        id: 55
        title: ''
        type: 0
        posX: 15908
        posY: 15220
        flowTest: 40
        sourceTest: 38
        sourceTestName: _questionnaireInitialization
        sourceTestDescription: ''
        ports:
          -
            class_name: TestNodePort
            id: 654
            value: null
            node: 55
            variable: 345
            variableObject:
              class_name: TestVariable
              id: 345
              name: settings
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 38
              parentVariable: null
            string: '1'
            defaultValue: '0'
            dynamic: '0'
            type: 0
            exposed: '1'
            name: settings
            pointer: '1'
            pointerVariable: settings
          -
            class_name: TestNodePort
            id: 655
            value: null
            node: 55
            variable: 346
            variableObject:
              class_name: TestVariable
              id: 346
              name: items
              type: 1
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 38
              parentVariable: null
            string: '1'
            defaultValue: '0'
            dynamic: '0'
            type: 1
            exposed: '1'
            name: items
            pointer: '1'
            pointerVariable: items
          -
            class_name: TestNodePort
            id: 656
            value: null
            node: 55
            variable: 347
            variableObject:
              class_name: TestVariable
              id: 347
              name: itemsAdministered
              type: 1
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 38
              parentVariable: null
            string: '1'
            defaultValue: '0'
            dynamic: '0'
            type: 1
            exposed: '1'
            name: itemsAdministered
            pointer: '1'
            pointerVariable: itemsAdministered
          -
            class_name: TestNodePort
            id: 657
            value: null
            node: 55
            variable: 348
            variableObject:
              class_name: TestVariable
              id: 348
              name: testTimeStarted
              type: 1
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 38
              parentVariable: null
            string: '1'
            defaultValue: '0'
            dynamic: '0'
            type: 1
            exposed: '1'
            name: testTimeStarted
            pointer: '1'
            pointerVariable: testTimeStarted
          -
            class_name: TestNodePort
            id: 658
            value: null
            node: 55
            variable: 349
            variableObject:
              class_name: TestVariable
              id: 349
              name: testTimeLeft
              type: 1
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 38
              parentVariable: null
            string: '1'
            defaultValue: '0'
            dynamic: '0'
            type: 1
            exposed: '1'
            name: testTimeLeft
            pointer: '1'
            pointerVariable: testTimeLeft
          -
            class_name: TestNodePort
            id: 659
            value: null
            node: 55
            variable: 350
            variableObject:
              class_name: TestVariable
              id: 350
              name: traitScores
              type: 1
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 38
              parentVariable: null
            string: '1'
            defaultValue: '0'
            dynamic: '0'
            type: 1
            exposed: '1'
            name: traitScores
            pointer: '1'
            pointerVariable: traitScores
          -
            class_name: TestNodePort
            id: 660
            value: '0'
            node: 55
            variable: 344
            variableObject:
              class_name: TestVariable
              id: 344
              name: out
              type: 2
              description: ''
              passableThroughUrl: '0'
              value: '0'
              test: 38
              parentVariable: null
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 2
            exposed: '1'
            name: out
            pointer: '0'
            pointerVariable: out
          -
            class_name: TestNodePort
            id: 661
            value: null
            node: 55
            variable: 351
            variableObject:
              class_name: TestVariable
              id: 351
              name: scores
              type: 1
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 38
              parentVariable: null
            string: '1'
            defaultValue: '0'
            dynamic: '0'
            type: 1
            exposed: '1'
            name: scores
            pointer: '1'
            pointerVariable: scores
      -
        class_name: TestNode
        id: 56
        title: 'next item selector module'
        type: 0
        posX: 16291
        posY: 15214
        flowTest: 40
        sourceTest: 13
        sourceTestName: runTest
        sourceTestDescription: 'Run other test.'
        ports:
          -
            class_name: TestNodePort
            id: 662
            value: null
            node: 56
            variable: 81
            variableObject:
              class_name: TestVariable
              id: 81
              name: test
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 13
              parentVariable: 77
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 0
            exposed: '1'
            name: test
            pointer: '0'
            pointerVariable: test
          -
            class_name: TestNodePort
            id: 663
            value: null
            node: 56
            variable: 82
            variableObject:
              class_name: TestVariable
              id: 82
              name: params
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 13
              parentVariable: 78
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 0
            exposed: '0'
            name: params
            pointer: '0'
            pointerVariable: params
          -
            class_name: TestNodePort
            id: 664
            value: null
            node: 56
            variable: 83
            variableObject:
              class_name: TestVariable
              id: 83
              name: results
              type: 1
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 13
              parentVariable: 79
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 1
            exposed: '0'
            name: results
            pointer: '0'
            pointerVariable: results
          -
            class_name: TestNodePort
            id: 665
            value: '0'
            node: 56
            variable: 80
            variableObject:
              class_name: TestVariable
              id: 80
              name: out
              type: 2
              description: ''
              passableThroughUrl: '0'
              value: '0'
              test: 13
              parentVariable: 76
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 2
            exposed: '1'
            name: out
            pointer: '0'
            pointerVariable: out
          -
            class_name: TestNodePort
            id: 666
            value: '1'
            node: 56
            variable: null
            variableObject: null
            string: '0'
            defaultValue: '0'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: direction
            pointer: '1'
            pointerVariable: direction
          -
            class_name: TestNodePort
            id: 667
            value: ''
            node: 56
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '0'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: items
            pointer: '1'
            pointerVariable: items
          -
            class_name: TestNodePort
            id: 668
            value: 'NULL'
            node: 56
            variable: null
            variableObject: null
            string: '0'
            defaultValue: '0'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: itemsAdministered
            pointer: '1'
            pointerVariable: itemsAdministered
          -
            class_name: TestNodePort
            id: 669
            value: '0'
            node: 56
            variable: null
            variableObject: null
            string: '0'
            defaultValue: '0'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: prevPage
            pointer: '1'
            pointerVariable: page
          -
            class_name: TestNodePort
            id: 670
            value: ''
            node: 56
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '0'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: session
            pointer: '1'
            pointerVariable: session
          -
            class_name: TestNodePort
            id: 671
            value: ''
            node: 56
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '0'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: settings
            pointer: '1'
            pointerVariable: settings
          -
            class_name: TestNodePort
            id: 672
            value: ''
            node: 56
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '0'
            dynamic: '1'
            type: 1
            exposed: '1'
            name: nextItems
            pointer: '1'
            pointerVariable: currentItems
          -
            class_name: TestNodePort
            id: 673
            value: ''
            node: 56
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '0'
            dynamic: '1'
            type: 1
            exposed: '1'
            name: nextItemsIndices
            pointer: '1'
            pointerVariable: currentItemsIndices
          -
            class_name: TestNodePort
            id: 674
            value: ''
            node: 56
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '0'
            dynamic: '1'
            type: 1
            exposed: '1'
            name: nextPage
            pointer: '1'
            pointerVariable: page
          -
            class_name: TestNodePort
            id: 675
            value: ''
            node: 56
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '0'
            dynamic: '1'
            type: 1
            exposed: '1'
            name: pastResponsesSafe
            pointer: '0'
            pointerVariable: pastResponses
          -
            class_name: TestNodePort
            id: 676
            value: ''
            node: 56
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '0'
            dynamic: '1'
            type: 1
            exposed: '1'
            name: nextItemsSafe
            pointer: '0'
            pointerVariable: itemsSafe
      -
        class_name: TestNode
        id: 57
        title: ''
        type: 0
        posX: 16662
        posY: 15221
        flowTest: 40
        sourceTest: 39
        sourceTestName: _questionnaireShowItem
        sourceTestDescription: ''
        ports:
          -
            class_name: TestNodePort
            id: 677
            value: null
            node: 57
            variable: 353
            variableObject:
              class_name: TestVariable
              id: 353
              name: items
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 39
              parentVariable: null
            string: '1'
            defaultValue: '0'
            dynamic: '0'
            type: 0
            exposed: '1'
            name: items
            pointer: '1'
            pointerVariable: items
          -
            class_name: TestNodePort
            id: 678
            value: null
            node: 57
            variable: 354
            variableObject:
              class_name: TestVariable
              id: 354
              name: currentItemsIndices
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 39
              parentVariable: null
            string: '1'
            defaultValue: '0'
            dynamic: '0'
            type: 0
            exposed: '1'
            name: currentItemsIndices
            pointer: '1'
            pointerVariable: currentItemsIndices
          -
            class_name: TestNodePort
            id: 679
            value: null
            node: 57
            variable: 355
            variableObject:
              class_name: TestVariable
              id: 355
              name: itemsSafe
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 39
              parentVariable: null
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 0
            exposed: '1'
            name: itemsSafe
            pointer: '0'
            pointerVariable: itemsSafe
          -
            class_name: TestNodePort
            id: 680
            value: null
            node: 57
            variable: 356
            variableObject:
              class_name: TestVariable
              id: 356
              name: responsesSafe
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 39
              parentVariable: null
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 0
            exposed: '1'
            name: responsesSafe
            pointer: '0'
            pointerVariable: responsesSafe
          -
            class_name: TestNodePort
            id: 681
            value: null
            node: 57
            variable: 357
            variableObject:
              class_name: TestVariable
              id: 357
              name: settings
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 39
              parentVariable: null
            string: '1'
            defaultValue: '0'
            dynamic: '0'
            type: 0
            exposed: '1'
            name: settings
            pointer: '1'
            pointerVariable: settings
          -
            class_name: TestNodePort
            id: 682
            value: c.getDynamicInputs()
            node: 57
            variable: 358
            variableObject:
              class_name: TestVariable
              id: 358
              name: templateParams
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 39
              parentVariable: null
            string: '0'
            defaultValue: '0'
            dynamic: '0'
            type: 0
            exposed: '1'
            name: templateParams
            pointer: '0'
            pointerVariable: templateParams
          -
            class_name: TestNodePort
            id: 683
            value: null
            node: 57
            variable: 359
            variableObject:
              class_name: TestVariable
              id: 359
              name: testTimeLeft
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 39
              parentVariable: null
            string: '1'
            defaultValue: '0'
            dynamic: '0'
            type: 0
            exposed: '1'
            name: testTimeLeft
            pointer: '1'
            pointerVariable: testTimeLeft
          -
            class_name: TestNodePort
            id: 684
            value: null
            node: 57
            variable: 360
            variableObject:
              class_name: TestVariable
              id: 360
              name: testTimeStarted
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 39
              parentVariable: null
            string: '1'
            defaultValue: '0'
            dynamic: '0'
            type: 0
            exposed: '1'
            name: testTimeStarted
            pointer: '1'
            pointerVariable: testTimeStarted
          -
            class_name: TestNodePort
            id: 685
            value: null
            node: 57
            variable: 362
            variableObject:
              class_name: TestVariable
              id: 362
              name: page
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 39
              parentVariable: null
            string: '1'
            defaultValue: '0'
            dynamic: '0'
            type: 0
            exposed: '1'
            name: page
            pointer: '1'
            pointerVariable: page
          -
            class_name: TestNodePort
            id: 686
            value: null
            node: 57
            variable: 361
            variableObject:
              class_name: TestVariable
              id: 361
              name: response
              type: 1
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 39
              parentVariable: null
            string: '1'
            defaultValue: '0'
            dynamic: '0'
            type: 1
            exposed: '1'
            name: response
            pointer: '1'
            pointerVariable: response
          -
            class_name: TestNodePort
            id: 687
            value: '0'
            node: 57
            variable: 352
            variableObject:
              class_name: TestVariable
              id: 352
              name: outOfTime
              type: 2
              description: ''
              passableThroughUrl: '0'
              value: '0'
              test: 39
              parentVariable: null
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 2
            exposed: '1'
            name: outOfTime
            pointer: '0'
            pointerVariable: out
          -
            class_name: TestNodePort
            id: 688
            value: null
            node: 57
            variable: 363
            variableObject:
              class_name: TestVariable
              id: 363
              name: .branch
              type: 1
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 39
              parentVariable: null
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 1
            exposed: '1'
            name: .branch
            pointer: '0'
            pointerVariable: .branch
          -
            class_name: TestNodePort
            id: 689
            value: null
            node: 57
            variable: 364
            variableObject:
              class_name: TestVariable
              id: 364
              name: submitted
              type: 2
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 39
              parentVariable: null
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 2
            exposed: '1'
            name: submitted
            pointer: '0'
            pointerVariable: submitted
      -
        class_name: TestNode
        id: 58
        title: 'scoring module'
        type: 0
        posX: 17058
        posY: 15229
        flowTest: 40
        sourceTest: 13
        sourceTestName: runTest
        sourceTestDescription: 'Run other test.'
        ports:
          -
            class_name: TestNodePort
            id: 690
            value: null
            node: 58
            variable: 81
            variableObject:
              class_name: TestVariable
              id: 81
              name: test
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 13
              parentVariable: 77
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 0
            exposed: '1'
            name: test
            pointer: '0'
            pointerVariable: test
          -
            class_name: TestNodePort
            id: 691
            value: null
            node: 58
            variable: 82
            variableObject:
              class_name: TestVariable
              id: 82
              name: params
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 13
              parentVariable: 78
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 0
            exposed: '0'
            name: params
            pointer: '0'
            pointerVariable: params
          -
            class_name: TestNodePort
            id: 692
            value: null
            node: 58
            variable: 83
            variableObject:
              class_name: TestVariable
              id: 83
              name: results
              type: 1
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 13
              parentVariable: 79
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 1
            exposed: '0'
            name: results
            pointer: '0'
            pointerVariable: results
          -
            class_name: TestNodePort
            id: 693
            value: '0'
            node: 58
            variable: 80
            variableObject:
              class_name: TestVariable
              id: 80
              name: out
              type: 2
              description: ''
              passableThroughUrl: '0'
              value: '0'
              test: 13
              parentVariable: 76
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 2
            exposed: '1'
            name: out
            pointer: '0'
            pointerVariable: out
          -
            class_name: TestNodePort
            id: 694
            value: ''
            node: 58
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '0'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: response
            pointer: '1'
            pointerVariable: response
          -
            class_name: TestNodePort
            id: 695
            value: ''
            node: 58
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '0'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: items
            pointer: '1'
            pointerVariable: items
          -
            class_name: TestNodePort
            id: 696
            value: 'NULL'
            node: 58
            variable: null
            variableObject: null
            string: '0'
            defaultValue: '0'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: itemsAdministered
            pointer: '1'
            pointerVariable: itemsAdministered
          -
            class_name: TestNodePort
            id: 697
            value: ''
            node: 58
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '0'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: scores
            pointer: '1'
            pointerVariable: scores
          -
            class_name: TestNodePort
            id: 698
            value: ''
            node: 58
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '0'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: currentItemsIndices
            pointer: '1'
            pointerVariable: currentItemsIndices
          -
            class_name: TestNodePort
            id: 699
            value: ''
            node: 58
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '0'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: settings
            pointer: '1'
            pointerVariable: settings
          -
            class_name: TestNodePort
            id: 700
            value: ''
            node: 58
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '0'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: currentItems
            pointer: '1'
            pointerVariable: currentItems
          -
            class_name: TestNodePort
            id: 701
            value: ''
            node: 58
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '0'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: traitScores
            pointer: '1'
            pointerVariable: traitScores
          -
            class_name: TestNodePort
            id: 702
            value: ''
            node: 58
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '0'
            dynamic: '1'
            type: 1
            exposed: '1'
            name: scores
            pointer: '1'
            pointerVariable: scores
          -
            class_name: TestNodePort
            id: 703
            value: ''
            node: 58
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '0'
            dynamic: '1'
            type: 1
            exposed: '1'
            name: traitScores
            pointer: '1'
            pointerVariable: traitScores
      -
        class_name: TestNode
        id: 59
        title: 'response processing module'
        type: 0
        posX: 17422
        posY: 15230
        flowTest: 40
        sourceTest: 13
        sourceTestName: runTest
        sourceTestDescription: 'Run other test.'
        ports:
          -
            class_name: TestNodePort
            id: 704
            value: null
            node: 59
            variable: 81
            variableObject:
              class_name: TestVariable
              id: 81
              name: test
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 13
              parentVariable: 77
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 0
            exposed: '1'
            name: test
            pointer: '0'
            pointerVariable: test
          -
            class_name: TestNodePort
            id: 705
            value: null
            node: 59
            variable: 82
            variableObject:
              class_name: TestVariable
              id: 82
              name: params
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 13
              parentVariable: 78
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 0
            exposed: '0'
            name: params
            pointer: '0'
            pointerVariable: params
          -
            class_name: TestNodePort
            id: 706
            value: null
            node: 59
            variable: 83
            variableObject:
              class_name: TestVariable
              id: 83
              name: results
              type: 1
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 13
              parentVariable: 79
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 1
            exposed: '0'
            name: results
            pointer: '0'
            pointerVariable: results
          -
            class_name: TestNodePort
            id: 707
            value: '0'
            node: 59
            variable: 80
            variableObject:
              class_name: TestVariable
              id: 80
              name: out
              type: 2
              description: ''
              passableThroughUrl: '0'
              value: '0'
              test: 13
              parentVariable: 76
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 2
            exposed: '1'
            name: out
            pointer: '0'
            pointerVariable: out
          -
            class_name: TestNodePort
            id: 708
            value: ''
            node: 59
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '0'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: response
            pointer: '1'
            pointerVariable: response
          -
            class_name: TestNodePort
            id: 709
            value: ''
            node: 59
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '0'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: session
            pointer: '1'
            pointerVariable: session
          -
            class_name: TestNodePort
            id: 710
            value: ''
            node: 59
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '0'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: currentItems
            pointer: '1'
            pointerVariable: currentItems
          -
            class_name: TestNodePort
            id: 711
            value: ''
            node: 59
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '0'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: currentItemsIndices
            pointer: '1'
            pointerVariable: currentItemsIndices
          -
            class_name: TestNodePort
            id: 712
            value: 'NULL'
            node: 59
            variable: null
            variableObject: null
            string: '0'
            defaultValue: '0'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: itemsAdministered
            pointer: '1'
            pointerVariable: itemsAdministered
          -
            class_name: TestNodePort
            id: 713
            value: ''
            node: 59
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '0'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: page
            pointer: '1'
            pointerVariable: page
          -
            class_name: TestNodePort
            id: 714
            value: ''
            node: 59
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '0'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: scores
            pointer: '1'
            pointerVariable: scores
          -
            class_name: TestNodePort
            id: 715
            value: ''
            node: 59
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '0'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: settings
            pointer: '1'
            pointerVariable: settings
          -
            class_name: TestNodePort
            id: 716
            value: ''
            node: 59
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '0'
            dynamic: '1'
            type: 1
            exposed: '1'
            name: direction
            pointer: '1'
            pointerVariable: direction
          -
            class_name: TestNodePort
            id: 717
            value: ''
            node: 59
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '0'
            dynamic: '1'
            type: 1
            exposed: '1'
            name: itemsAdministered
            pointer: '1'
            pointerVariable: itemsAdministered
      -
        class_name: TestNode
        id: 60
        title: 'status check module'
        type: 0
        posX: 16951
        posY: 15719
        flowTest: 40
        sourceTest: 13
        sourceTestName: runTest
        sourceTestDescription: 'Run other test.'
        ports:
          -
            class_name: TestNodePort
            id: 718
            value: null
            node: 60
            variable: 81
            variableObject:
              class_name: TestVariable
              id: 81
              name: test
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 13
              parentVariable: 77
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 0
            exposed: '1'
            name: test
            pointer: '0'
            pointerVariable: test
          -
            class_name: TestNodePort
            id: 719
            value: null
            node: 60
            variable: 82
            variableObject:
              class_name: TestVariable
              id: 82
              name: params
              type: 0
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 13
              parentVariable: 78
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 0
            exposed: '0'
            name: params
            pointer: '0'
            pointerVariable: params
          -
            class_name: TestNodePort
            id: 720
            value: null
            node: 60
            variable: 83
            variableObject:
              class_name: TestVariable
              id: 83
              name: results
              type: 1
              description: ''
              passableThroughUrl: '0'
              value: null
              test: 13
              parentVariable: 79
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 1
            exposed: '0'
            name: results
            pointer: '0'
            pointerVariable: results
          -
            class_name: TestNodePort
            id: 721
            value: '0'
            node: 60
            variable: 80
            variableObject:
              class_name: TestVariable
              id: 80
              name: out
              type: 2
              description: ''
              passableThroughUrl: '0'
              value: '0'
              test: 13
              parentVariable: 76
            string: '1'
            defaultValue: '1'
            dynamic: '0'
            type: 2
            exposed: '0'
            name: out
            pointer: '0'
            pointerVariable: out
          -
            class_name: TestNodePort
            id: 722
            value: ''
            node: 60
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '1'
            dynamic: '1'
            type: 2
            exposed: '1'
            name: continue
            pointer: '0'
            pointerVariable: continue
          -
            class_name: TestNodePort
            id: 723
            value: ''
            node: 60
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '1'
            dynamic: '1'
            type: 2
            exposed: '1'
            name: stop
            pointer: '0'
            pointerVariable: stop
          -
            class_name: TestNodePort
            id: 724
            value: ''
            node: 60
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '0'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: testTimeLeft
            pointer: '1'
            pointerVariable: testTimeLeft
          -
            class_name: TestNodePort
            id: 725
            value: ''
            node: 60
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '0'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: testTimeStarted
            pointer: '1'
            pointerVariable: testTimeStarted
          -
            class_name: TestNodePort
            id: 726
            value: 'NULL'
            node: 60
            variable: null
            variableObject: null
            string: '0'
            defaultValue: '0'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: itemsAdministered
            pointer: '1'
            pointerVariable: itemsAdministered
          -
            class_name: TestNodePort
            id: 727
            value: ''
            node: 60
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '0'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: direction
            pointer: '1'
            pointerVariable: direction
          -
            class_name: TestNodePort
            id: 728
            value: ''
            node: 60
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '0'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: items
            pointer: '1'
            pointerVariable: items
          -
            class_name: TestNodePort
            id: 729
            value: ''
            node: 60
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '0'
            dynamic: '1'
            type: 0
            exposed: '1'
            name: settings
            pointer: '1'
            pointerVariable: settings
          -
            class_name: TestNodePort
            id: 730
            value: ''
            node: 60
            variable: null
            variableObject: null
            string: '1'
            defaultValue: '1'
            dynamic: '1'
            type: 1
            exposed: '1'
            name: .branch
            pointer: '0'
            pointerVariable: .branch
    nodesConnections:
      -
        class_name: TestNodeConnection
        id: 198
        flowTest: 40
        sourceNode: 51
        sourcePort: null
        sourcePortObject: null
        destinationNode: 53
        destinationPort: null
        destinationPortObject: null
        returnFunction: ''
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 199
        flowTest: 40
        sourceNode: 51
        sourcePort: 617
        sourcePortObject:
          class_name: TestNodePort
          id: 617
          value: null
          node: 51
          variable: 372
          variableObject:
            class_name: TestVariable
            id: 372
            name: canGoBack
            type: 0
            description: ''
            passableThroughUrl: '0'
            value: null
            test: 40
            parentVariable: null
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 1
          exposed: '0'
          name: canGoBack
          pointer: '0'
          pointerVariable: canGoBack
        destinationNode: 53
        destinationPort: 636
        destinationPortObject:
          class_name: TestNodePort
          id: 636
          value: ''
          node: 53
          variable: null
          variableObject: null
          string: '1'
          defaultValue: '1'
          dynamic: '1'
          type: 0
          exposed: '1'
          name: canGoBack
          pointer: '0'
          pointerVariable: canGoBack
        returnFunction: canGoBack
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 200
        flowTest: 40
        sourceNode: 51
        sourcePort: 613
        sourcePortObject:
          class_name: TestNodePort
          id: 613
          value: null
          node: 51
          variable: 368
          variableObject:
            class_name: TestVariable
            id: 368
            name: itemBankItems
            type: 0
            description: ''
            passableThroughUrl: '0'
            value: null
            test: 40
            parentVariable: null
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 1
          exposed: '0'
          name: itemBankItems
          pointer: '0'
          pointerVariable: itemBankItems
        destinationNode: 53
        destinationPort: 637
        destinationPortObject:
          class_name: TestNodePort
          id: 637
          value: ''
          node: 53
          variable: null
          variableObject: null
          string: '1'
          defaultValue: '1'
          dynamic: '1'
          type: 0
          exposed: '1'
          name: itemBankItems
          pointer: '0'
          pointerVariable: itemBankItems
        returnFunction: itemBankItems
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 201
        flowTest: 40
        sourceNode: 51
        sourcePort: 614
        sourcePortObject:
          class_name: TestNodePort
          id: 614
          value: null
          node: 51
          variable: 369
          variableObject:
            class_name: TestVariable
            id: 369
            name: itemBankTable
            type: 0
            description: ''
            passableThroughUrl: '0'
            value: null
            test: 40
            parentVariable: null
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 1
          exposed: '0'
          name: itemBankTable
          pointer: '0'
          pointerVariable: itemBankTable
        destinationNode: 53
        destinationPort: 638
        destinationPortObject:
          class_name: TestNodePort
          id: 638
          value: ''
          node: 53
          variable: null
          variableObject: null
          string: '1'
          defaultValue: '1'
          dynamic: '1'
          type: 0
          exposed: '1'
          name: itemBankTable
          pointer: '0'
          pointerVariable: itemBankTable
        returnFunction: itemBankTable
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 202
        flowTest: 40
        sourceNode: 51
        sourcePort: 615
        sourcePortObject:
          class_name: TestNodePort
          id: 615
          value: null
          node: 51
          variable: 370
          variableObject:
            class_name: TestVariable
            id: 370
            name: itemBankType
            type: 0
            description: ''
            passableThroughUrl: '0'
            value: null
            test: 40
            parentVariable: null
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 1
          exposed: '0'
          name: itemBankType
          pointer: '0'
          pointerVariable: itemBankType
        destinationNode: 53
        destinationPort: 639
        destinationPortObject:
          class_name: TestNodePort
          id: 639
          value: ''
          node: 53
          variable: null
          variableObject: null
          string: '1'
          defaultValue: '1'
          dynamic: '1'
          type: 0
          exposed: '1'
          name: itemBankType
          pointer: '0'
          pointerVariable: itemBankType
        returnFunction: itemBankType
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 203
        flowTest: 40
        sourceNode: 51
        sourcePort: 629
        sourcePortObject:
          class_name: TestNodePort
          id: 629
          value: null
          node: 51
          variable: 384
          variableObject:
            class_name: TestVariable
            id: 384
            name: itemNumLimit
            type: 0
            description: ''
            passableThroughUrl: '0'
            value: null
            test: 40
            parentVariable: null
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 1
          exposed: '0'
          name: itemNumLimit
          pointer: '0'
          pointerVariable: itemNumLimit
        destinationNode: 53
        destinationPort: 640
        destinationPortObject:
          class_name: TestNodePort
          id: 640
          value: ''
          node: 53
          variable: null
          variableObject: null
          string: '1'
          defaultValue: '1'
          dynamic: '1'
          type: 0
          exposed: '1'
          name: itemNumLimit
          pointer: '0'
          pointerVariable: itemNumLimit
        returnFunction: itemNumLimit
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 204
        flowTest: 40
        sourceNode: 51
        sourcePort: 616
        sourcePortObject:
          class_name: TestNodePort
          id: 616
          value: null
          node: 51
          variable: 371
          variableObject:
            class_name: TestVariable
            id: 371
            name: itemsPerPage
            type: 0
            description: ''
            passableThroughUrl: '0'
            value: null
            test: 40
            parentVariable: null
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 1
          exposed: '0'
          name: itemsPerPage
          pointer: '0'
          pointerVariable: itemsPerPage
        destinationNode: 53
        destinationPort: 641
        destinationPortObject:
          class_name: TestNodePort
          id: 641
          value: ''
          node: 53
          variable: null
          variableObject: null
          string: '1'
          defaultValue: '1'
          dynamic: '1'
          type: 0
          exposed: '1'
          name: itemsPerPage
          pointer: '0'
          pointerVariable: itemsPerPage
        returnFunction: itemsPerPage
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 205
        flowTest: 40
        sourceNode: 51
        sourcePort: 611
        sourcePortObject:
          class_name: TestNodePort
          id: 611
          value: null
          node: 51
          variable: 366
          variableObject:
            class_name: TestVariable
            id: 366
            name: itemTemplate
            type: 0
            description: ''
            passableThroughUrl: '0'
            value: null
            test: 40
            parentVariable: null
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 1
          exposed: '0'
          name: itemTemplate
          pointer: '0'
          pointerVariable: itemTemplate
        destinationNode: 53
        destinationPort: 642
        destinationPortObject:
          class_name: TestNodePort
          id: 642
          value: ''
          node: 53
          variable: null
          variableObject: null
          string: '1'
          defaultValue: '1'
          dynamic: '1'
          type: 0
          exposed: '1'
          name: itemTemplate
          pointer: '0'
          pointerVariable: itemTemplate
        returnFunction: itemTemplate
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 206
        flowTest: 40
        sourceNode: 51
        sourcePort: 630
        sourcePortObject:
          class_name: TestNodePort
          id: 630
          value: null
          node: 51
          variable: 385
          variableObject:
            class_name: TestVariable
            id: 385
            name: itemTimeFullRequired
            type: 0
            description: ''
            passableThroughUrl: '0'
            value: null
            test: 40
            parentVariable: null
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 1
          exposed: '0'
          name: itemTimeFullRequired
          pointer: '0'
          pointerVariable: itemTimeFullRequired
        destinationNode: 53
        destinationPort: 643
        destinationPortObject:
          class_name: TestNodePort
          id: 643
          value: ''
          node: 53
          variable: null
          variableObject: null
          string: '1'
          defaultValue: '1'
          dynamic: '1'
          type: 0
          exposed: '1'
          name: itemTimeFullRequired
          pointer: '0'
          pointerVariable: itemTimeFullRequired
        returnFunction: itemTimeFullRequired
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 207
        flowTest: 40
        sourceNode: 51
        sourcePort: 624
        sourcePortObject:
          class_name: TestNodePort
          id: 624
          value: null
          node: 51
          variable: 379
          variableObject:
            class_name: TestVariable
            id: 379
            name: itemTimeLimit
            type: 0
            description: ''
            passableThroughUrl: '0'
            value: null
            test: 40
            parentVariable: null
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 1
          exposed: '0'
          name: itemTimeLimit
          pointer: '0'
          pointerVariable: itemTimeLimit
        destinationNode: 53
        destinationPort: 644
        destinationPortObject:
          class_name: TestNodePort
          id: 644
          value: ''
          node: 53
          variable: null
          variableObject: null
          string: '1'
          defaultValue: '1'
          dynamic: '1'
          type: 0
          exposed: '1'
          name: itemTimeLimit
          pointer: '0'
          pointerVariable: itemTimeLimit
        returnFunction: itemTimeLimit
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 208
        flowTest: 40
        sourceNode: 51
        sourcePort: 612
        sourcePortObject:
          class_name: TestNodePort
          id: 612
          value: null
          node: 51
          variable: 367
          variableObject:
            class_name: TestVariable
            id: 367
            name: order
            type: 0
            description: ''
            passableThroughUrl: '0'
            value: null
            test: 40
            parentVariable: null
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 1
          exposed: '0'
          name: order
          pointer: '0'
          pointerVariable: order
        destinationNode: 53
        destinationPort: 645
        destinationPortObject:
          class_name: TestNodePort
          id: 645
          value: ''
          node: 53
          variable: null
          variableObject: null
          string: '1'
          defaultValue: '1'
          dynamic: '1'
          type: 0
          exposed: '1'
          name: order
          pointer: '0'
          pointerVariable: order
        returnFunction: order
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 209
        flowTest: 40
        sourceNode: 51
        sourcePort: 621
        sourcePortObject:
          class_name: TestNodePort
          id: 621
          value: null
          node: 51
          variable: 376
          variableObject:
            class_name: TestVariable
            id: 376
            name: responseBank
            type: 0
            description: ''
            passableThroughUrl: '0'
            value: null
            test: 40
            parentVariable: null
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 1
          exposed: '0'
          name: responseBank
          pointer: '0'
          pointerVariable: responseBank
        destinationNode: 53
        destinationPort: 646
        destinationPortObject:
          class_name: TestNodePort
          id: 646
          value: ''
          node: 53
          variable: null
          variableObject: null
          string: '1'
          defaultValue: '1'
          dynamic: '1'
          type: 0
          exposed: '1'
          name: responseBank
          pointer: '0'
          pointerVariable: responseBank
        returnFunction: responseBank
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 210
        flowTest: 40
        sourceNode: 51
        sourcePort: 618
        sourcePortObject:
          class_name: TestNodePort
          id: 618
          value: null
          node: 51
          variable: 373
          variableObject:
            class_name: TestVariable
            id: 373
            name: responseOptions
            type: 0
            description: ''
            passableThroughUrl: '0'
            value: null
            test: 40
            parentVariable: null
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 1
          exposed: '0'
          name: responseOptions
          pointer: '0'
          pointerVariable: responseOptions
        destinationNode: 53
        destinationPort: 647
        destinationPortObject:
          class_name: TestNodePort
          id: 647
          value: ''
          node: 53
          variable: null
          variableObject: null
          string: '1'
          defaultValue: '1'
          dynamic: '1'
          type: 0
          exposed: '1'
          name: responseOptions
          pointer: '0'
          pointerVariable: responseOptions
        returnFunction: responseOptions
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 211
        flowTest: 40
        sourceNode: 51
        sourcePort: 619
        sourcePortObject:
          class_name: TestNodePort
          id: 619
          value: null
          node: 51
          variable: 374
          variableObject:
            class_name: TestVariable
            id: 374
            name: responseRequired
            type: 0
            description: ''
            passableThroughUrl: '0'
            value: null
            test: 40
            parentVariable: null
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 1
          exposed: '0'
          name: responseRequired
          pointer: '0'
          pointerVariable: responseRequired
        destinationNode: 53
        destinationPort: 648
        destinationPortObject:
          class_name: TestNodePort
          id: 648
          value: ''
          node: 53
          variable: null
          variableObject: null
          string: '1'
          defaultValue: '1'
          dynamic: '1'
          type: 0
          exposed: '1'
          name: responseRequired
          pointer: '0'
          pointerVariable: responseRequired
        returnFunction: responseRequired
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 212
        flowTest: 40
        sourceNode: 51
        sourcePort: 620
        sourcePortObject:
          class_name: TestNodePort
          id: 620
          value: null
          node: 51
          variable: 375
          variableObject:
            class_name: TestVariable
            id: 375
            name: responseRequiredAlert
            type: 0
            description: ''
            passableThroughUrl: '0'
            value: null
            test: 40
            parentVariable: null
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 1
          exposed: '0'
          name: responseRequiredAlert
          pointer: '0'
          pointerVariable: responseRequiredAlert
        destinationNode: 53
        destinationPort: 649
        destinationPortObject:
          class_name: TestNodePort
          id: 649
          value: ''
          node: 53
          variable: null
          variableObject: null
          string: '1'
          defaultValue: '1'
          dynamic: '1'
          type: 0
          exposed: '1'
          name: responseRequiredAlert
          pointer: '0'
          pointerVariable: responseRequiredAlert
        returnFunction: responseRequiredAlert
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 213
        flowTest: 40
        sourceNode: 51
        sourcePort: 622
        sourcePortObject:
          class_name: TestNodePort
          id: 622
          value: null
          node: 51
          variable: 377
          variableObject:
            class_name: TestVariable
            id: 377
            name: testTimeLimit
            type: 0
            description: ''
            passableThroughUrl: '0'
            value: null
            test: 40
            parentVariable: null
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 1
          exposed: '0'
          name: testTimeLimit
          pointer: '0'
          pointerVariable: testTimeLimit
        destinationNode: 53
        destinationPort: 650
        destinationPortObject:
          class_name: TestNodePort
          id: 650
          value: ''
          node: 53
          variable: null
          variableObject: null
          string: '1'
          defaultValue: '1'
          dynamic: '1'
          type: 0
          exposed: '1'
          name: testTimeLimit
          pointer: '0'
          pointerVariable: testTimeLimit
        returnFunction: testTimeLimit
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 214
        flowTest: 40
        sourceNode: 51
        sourcePort: 623
        sourcePortObject:
          class_name: TestNodePort
          id: 623
          value: '0'
          node: 51
          variable: 378
          variableObject:
            class_name: TestVariable
            id: 378
            name: testTimeLimitOffset
            type: 0
            description: ''
            passableThroughUrl: '0'
            value: '0'
            test: 40
            parentVariable: null
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 1
          exposed: '0'
          name: testTimeLimitOffset
          pointer: '0'
          pointerVariable: testTimeLimitOffset
        destinationNode: 53
        destinationPort: 651
        destinationPortObject:
          class_name: TestNodePort
          id: 651
          value: ''
          node: 53
          variable: null
          variableObject: null
          string: '1'
          defaultValue: '1'
          dynamic: '1'
          type: 0
          exposed: '1'
          name: testTimeLimitOffset
          pointer: '0'
          pointerVariable: testTimeLimitOffset
        returnFunction: testTimeLimitOffset
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 215
        flowTest: 40
        sourceNode: 53
        sourcePort: 634
        sourcePortObject:
          class_name: TestNodePort
          id: 634
          value: null
          node: 53
          variable: 114
          variableObject:
            class_name: TestVariable
            id: 114
            name: result
            type: 1
            description: ''
            passableThroughUrl: '0'
            value: null
            test: 19
            parentVariable: null
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 1
          exposed: '1'
          name: result
          pointer: '0'
          pointerVariable: result
        destinationNode: 54
        destinationPort: 653
        destinationPortObject:
          class_name: TestNodePort
          id: 653
          value: ''
          node: 54
          variable: null
          variableObject: null
          string: '1'
          defaultValue: '1'
          dynamic: '1'
          type: 0
          exposed: '1'
          name: settings
          pointer: '0'
          pointerVariable: settings
        returnFunction: result
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 216
        flowTest: 40
        sourceNode: 53
        sourcePort: 635
        sourcePortObject:
          class_name: TestNodePort
          id: 635
          value: '0'
          node: 53
          variable: 112
          variableObject:
            class_name: TestVariable
            id: 112
            name: out
            type: 2
            description: ''
            passableThroughUrl: '0'
            value: '0'
            test: 19
            parentVariable: null
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 2
          exposed: '1'
          name: out
          pointer: '0'
          pointerVariable: out
        destinationNode: 54
        destinationPort: null
        destinationPortObject: null
        returnFunction: out
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 217
        flowTest: 40
        sourceNode: 54
        sourcePort: 652
        sourcePortObject:
          class_name: TestNodePort
          id: 652
          value: '0'
          node: 54
          variable: 75
          variableObject:
            class_name: TestVariable
            id: 75
            name: out
            type: 2
            description: ''
            passableThroughUrl: '0'
            value: '0'
            test: 11
            parentVariable: null
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 2
          exposed: '1'
          name: out
          pointer: '0'
          pointerVariable: out
        destinationNode: 55
        destinationPort: null
        destinationPortObject: null
        returnFunction: out
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 218
        flowTest: 40
        sourceNode: 55
        sourcePort: 660
        sourcePortObject:
          class_name: TestNodePort
          id: 660
          value: '0'
          node: 55
          variable: 344
          variableObject:
            class_name: TestVariable
            id: 344
            name: out
            type: 2
            description: ''
            passableThroughUrl: '0'
            value: '0'
            test: 38
            parentVariable: null
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 2
          exposed: '1'
          name: out
          pointer: '0'
          pointerVariable: out
        destinationNode: 56
        destinationPort: null
        destinationPortObject: null
        returnFunction: out
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 219
        flowTest: 40
        sourceNode: 51
        sourcePort: 625
        sourcePortObject:
          class_name: TestNodePort
          id: 625
          value: null
          node: 51
          variable: 380
          variableObject:
            class_name: TestVariable
            id: 380
            name: nextItemSelectorModule
            type: 0
            description: ''
            passableThroughUrl: '0'
            value: null
            test: 40
            parentVariable: null
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 1
          exposed: '0'
          name: nextItemSelectorModule
          pointer: '0'
          pointerVariable: nextItemSelectorModule
        destinationNode: 56
        destinationPort: 662
        destinationPortObject:
          class_name: TestNodePort
          id: 662
          value: null
          node: 56
          variable: 81
          variableObject:
            class_name: TestVariable
            id: 81
            name: test
            type: 0
            description: ''
            passableThroughUrl: '0'
            value: null
            test: 13
            parentVariable: 77
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 0
          exposed: '1'
          name: test
          pointer: '0'
          pointerVariable: test
        returnFunction: nextItemSelectorModule
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 220
        flowTest: 40
        sourceNode: 56
        sourcePort: 665
        sourcePortObject:
          class_name: TestNodePort
          id: 665
          value: '0'
          node: 56
          variable: 80
          variableObject:
            class_name: TestVariable
            id: 80
            name: out
            type: 2
            description: ''
            passableThroughUrl: '0'
            value: '0'
            test: 13
            parentVariable: 76
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 2
          exposed: '1'
          name: out
          pointer: '0'
          pointerVariable: out
        destinationNode: 57
        destinationPort: null
        destinationPortObject: null
        returnFunction: out
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 221
        flowTest: 40
        sourceNode: 56
        sourcePort: 676
        sourcePortObject:
          class_name: TestNodePort
          id: 676
          value: ''
          node: 56
          variable: null
          variableObject: null
          string: '1'
          defaultValue: '0'
          dynamic: '1'
          type: 1
          exposed: '1'
          name: nextItemsSafe
          pointer: '0'
          pointerVariable: itemsSafe
        destinationNode: 57
        destinationPort: 679
        destinationPortObject:
          class_name: TestNodePort
          id: 679
          value: null
          node: 57
          variable: 355
          variableObject:
            class_name: TestVariable
            id: 355
            name: itemsSafe
            type: 0
            description: ''
            passableThroughUrl: '0'
            value: null
            test: 39
            parentVariable: null
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 0
          exposed: '1'
          name: itemsSafe
          pointer: '0'
          pointerVariable: itemsSafe
        returnFunction: nextItemsSafe
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 222
        flowTest: 40
        sourceNode: 56
        sourcePort: 675
        sourcePortObject:
          class_name: TestNodePort
          id: 675
          value: ''
          node: 56
          variable: null
          variableObject: null
          string: '1'
          defaultValue: '0'
          dynamic: '1'
          type: 1
          exposed: '1'
          name: pastResponsesSafe
          pointer: '0'
          pointerVariable: pastResponses
        destinationNode: 57
        destinationPort: 680
        destinationPortObject:
          class_name: TestNodePort
          id: 680
          value: null
          node: 57
          variable: 356
          variableObject:
            class_name: TestVariable
            id: 356
            name: responsesSafe
            type: 0
            description: ''
            passableThroughUrl: '0'
            value: null
            test: 39
            parentVariable: null
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 0
          exposed: '1'
          name: responsesSafe
          pointer: '0'
          pointerVariable: responsesSafe
        returnFunction: pastResponsesSafe
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 223
        flowTest: 40
        sourceNode: 57
        sourcePort: 687
        sourcePortObject:
          class_name: TestNodePort
          id: 687
          value: '0'
          node: 57
          variable: 352
          variableObject:
            class_name: TestVariable
            id: 352
            name: outOfTime
            type: 2
            description: ''
            passableThroughUrl: '0'
            value: '0'
            test: 39
            parentVariable: null
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 2
          exposed: '1'
          name: outOfTime
          pointer: '0'
          pointerVariable: out
        destinationNode: 58
        destinationPort: null
        destinationPortObject: null
        returnFunction: outOfTime
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 224
        flowTest: 40
        sourceNode: 57
        sourcePort: 689
        sourcePortObject:
          class_name: TestNodePort
          id: 689
          value: null
          node: 57
          variable: 364
          variableObject:
            class_name: TestVariable
            id: 364
            name: submitted
            type: 2
            description: ''
            passableThroughUrl: '0'
            value: null
            test: 39
            parentVariable: null
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 2
          exposed: '1'
          name: submitted
          pointer: '0'
          pointerVariable: submitted
        destinationNode: 58
        destinationPort: null
        destinationPortObject: null
        returnFunction: submitted
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 225
        flowTest: 40
        sourceNode: 58
        sourcePort: 693
        sourcePortObject:
          class_name: TestNodePort
          id: 693
          value: '0'
          node: 58
          variable: 80
          variableObject:
            class_name: TestVariable
            id: 80
            name: out
            type: 2
            description: ''
            passableThroughUrl: '0'
            value: '0'
            test: 13
            parentVariable: 76
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 2
          exposed: '1'
          name: out
          pointer: '0'
          pointerVariable: out
        destinationNode: 59
        destinationPort: null
        destinationPortObject: null
        returnFunction: out
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 226
        flowTest: 40
        sourceNode: 51
        sourcePort: 626
        sourcePortObject:
          class_name: TestNodePort
          id: 626
          value: null
          node: 51
          variable: 381
          variableObject:
            class_name: TestVariable
            id: 381
            name: scoringModule
            type: 0
            description: ''
            passableThroughUrl: '0'
            value: null
            test: 40
            parentVariable: null
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 1
          exposed: '0'
          name: scoringModule
          pointer: '0'
          pointerVariable: scoringModule
        destinationNode: 58
        destinationPort: 690
        destinationPortObject:
          class_name: TestNodePort
          id: 690
          value: null
          node: 58
          variable: 81
          variableObject:
            class_name: TestVariable
            id: 81
            name: test
            type: 0
            description: ''
            passableThroughUrl: '0'
            value: null
            test: 13
            parentVariable: 77
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 0
          exposed: '1'
          name: test
          pointer: '0'
          pointerVariable: test
        returnFunction: scoringModule
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 227
        flowTest: 40
        sourceNode: 51
        sourcePort: 628
        sourcePortObject:
          class_name: TestNodePort
          id: 628
          value: null
          node: 51
          variable: 383
          variableObject:
            class_name: TestVariable
            id: 383
            name: responseProcessorModule
            type: 0
            description: ''
            passableThroughUrl: '0'
            value: null
            test: 40
            parentVariable: null
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 1
          exposed: '0'
          name: responseProcessorModule
          pointer: '0'
          pointerVariable: responseProcessorModule
        destinationNode: 59
        destinationPort: 704
        destinationPortObject:
          class_name: TestNodePort
          id: 704
          value: null
          node: 59
          variable: 81
          variableObject:
            class_name: TestVariable
            id: 81
            name: test
            type: 0
            description: ''
            passableThroughUrl: '0'
            value: null
            test: 13
            parentVariable: 77
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 0
          exposed: '1'
          name: test
          pointer: '0'
          pointerVariable: test
        returnFunction: responseProcessorModule
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 228
        flowTest: 40
        sourceNode: 60
        sourcePort: 723
        sourcePortObject:
          class_name: TestNodePort
          id: 723
          value: ''
          node: 60
          variable: null
          variableObject: null
          string: '1'
          defaultValue: '1'
          dynamic: '1'
          type: 2
          exposed: '1'
          name: stop
          pointer: '0'
          pointerVariable: stop
        destinationNode: 52
        destinationPort: null
        destinationPortObject: null
        returnFunction: stop
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 229
        flowTest: 40
        sourceNode: 60
        sourcePort: 722
        sourcePortObject:
          class_name: TestNodePort
          id: 722
          value: ''
          node: 60
          variable: null
          variableObject: null
          string: '1'
          defaultValue: '1'
          dynamic: '1'
          type: 2
          exposed: '1'
          name: continue
          pointer: '0'
          pointerVariable: continue
        destinationNode: 56
        destinationPort: null
        destinationPortObject: null
        returnFunction: continue
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 230
        flowTest: 40
        sourceNode: 59
        sourcePort: 707
        sourcePortObject:
          class_name: TestNodePort
          id: 707
          value: '0'
          node: 59
          variable: 80
          variableObject:
            class_name: TestVariable
            id: 80
            name: out
            type: 2
            description: ''
            passableThroughUrl: '0'
            value: '0'
            test: 13
            parentVariable: 76
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 2
          exposed: '1'
          name: out
          pointer: '0'
          pointerVariable: out
        destinationNode: 60
        destinationPort: null
        destinationPortObject: null
        returnFunction: out
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 231
        flowTest: 40
        sourceNode: 59
        sourcePort: 716
        sourcePortObject:
          class_name: TestNodePort
          id: 716
          value: ''
          node: 59
          variable: null
          variableObject: null
          string: '1'
          defaultValue: '0'
          dynamic: '1'
          type: 1
          exposed: '1'
          name: direction
          pointer: '1'
          pointerVariable: direction
        destinationNode: 60
        destinationPort: 727
        destinationPortObject:
          class_name: TestNodePort
          id: 727
          value: ''
          node: 60
          variable: null
          variableObject: null
          string: '1'
          defaultValue: '0'
          dynamic: '1'
          type: 0
          exposed: '1'
          name: direction
          pointer: '1'
          pointerVariable: direction
        returnFunction: direction
        automatic: '1'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 232
        flowTest: 40
        sourceNode: 59
        sourcePort: 717
        sourcePortObject:
          class_name: TestNodePort
          id: 717
          value: ''
          node: 59
          variable: null
          variableObject: null
          string: '1'
          defaultValue: '0'
          dynamic: '1'
          type: 1
          exposed: '1'
          name: itemsAdministered
          pointer: '1'
          pointerVariable: itemsAdministered
        destinationNode: 60
        destinationPort: 726
        destinationPortObject:
          class_name: TestNodePort
          id: 726
          value: 'NULL'
          node: 60
          variable: null
          variableObject: null
          string: '0'
          defaultValue: '0'
          dynamic: '1'
          type: 0
          exposed: '1'
          name: itemsAdministered
          pointer: '1'
          pointerVariable: itemsAdministered
        returnFunction: itemsAdministered
        automatic: '1'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 233
        flowTest: 40
        sourceNode: 51
        sourcePort: 631
        sourcePortObject:
          class_name: TestNodePort
          id: 631
          value: null
          node: 51
          variable: 386
          variableObject:
            class_name: TestVariable
            id: 386
            name: statusCheckModule
            type: 0
            description: ''
            passableThroughUrl: '0'
            value: null
            test: 40
            parentVariable: null
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 1
          exposed: '0'
          name: statusCheckModule
          pointer: '0'
          pointerVariable: statusCheckModule
        destinationNode: 60
        destinationPort: 718
        destinationPortObject:
          class_name: TestNodePort
          id: 718
          value: null
          node: 60
          variable: 81
          variableObject:
            class_name: TestVariable
            id: 81
            name: test
            type: 0
            description: ''
            passableThroughUrl: '0'
            value: null
            test: 13
            parentVariable: 77
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 0
          exposed: '1'
          name: test
          pointer: '0'
          pointerVariable: test
        returnFunction: statusCheckModule
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 234
        flowTest: 40
        sourceNode: 51
        sourcePort: 613
        sourcePortObject:
          class_name: TestNodePort
          id: 613
          value: null
          node: 51
          variable: 368
          variableObject:
            class_name: TestVariable
            id: 368
            name: itemBankItems
            type: 0
            description: ''
            passableThroughUrl: '0'
            value: null
            test: 40
            parentVariable: null
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 1
          exposed: '0'
          name: itemBankItems
          pointer: '0'
          pointerVariable: itemBankItems
        destinationNode: 53
        destinationPort: 636
        destinationPortObject:
          class_name: TestNodePort
          id: 636
          value: ''
          node: 53
          variable: null
          variableObject: null
          string: '1'
          defaultValue: '1'
          dynamic: '1'
          type: 0
          exposed: '1'
          name: canGoBack
          pointer: '0'
          pointerVariable: canGoBack
        returnFunction: itemBankItems
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 235
        flowTest: 40
        sourceNode: 51
        sourcePort: 614
        sourcePortObject:
          class_name: TestNodePort
          id: 614
          value: null
          node: 51
          variable: 369
          variableObject:
            class_name: TestVariable
            id: 369
            name: itemBankTable
            type: 0
            description: ''
            passableThroughUrl: '0'
            value: null
            test: 40
            parentVariable: null
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 1
          exposed: '0'
          name: itemBankTable
          pointer: '0'
          pointerVariable: itemBankTable
        destinationNode: 53
        destinationPort: 636
        destinationPortObject:
          class_name: TestNodePort
          id: 636
          value: ''
          node: 53
          variable: null
          variableObject: null
          string: '1'
          defaultValue: '1'
          dynamic: '1'
          type: 0
          exposed: '1'
          name: canGoBack
          pointer: '0'
          pointerVariable: canGoBack
        returnFunction: itemBankTable
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 236
        flowTest: 40
        sourceNode: 51
        sourcePort: 615
        sourcePortObject:
          class_name: TestNodePort
          id: 615
          value: null
          node: 51
          variable: 370
          variableObject:
            class_name: TestVariable
            id: 370
            name: itemBankType
            type: 0
            description: ''
            passableThroughUrl: '0'
            value: null
            test: 40
            parentVariable: null
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 1
          exposed: '0'
          name: itemBankType
          pointer: '0'
          pointerVariable: itemBankType
        destinationNode: 53
        destinationPort: 636
        destinationPortObject:
          class_name: TestNodePort
          id: 636
          value: ''
          node: 53
          variable: null
          variableObject: null
          string: '1'
          defaultValue: '1'
          dynamic: '1'
          type: 0
          exposed: '1'
          name: canGoBack
          pointer: '0'
          pointerVariable: canGoBack
        returnFunction: itemBankType
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 237
        flowTest: 40
        sourceNode: 51
        sourcePort: 629
        sourcePortObject:
          class_name: TestNodePort
          id: 629
          value: null
          node: 51
          variable: 384
          variableObject:
            class_name: TestVariable
            id: 384
            name: itemNumLimit
            type: 0
            description: ''
            passableThroughUrl: '0'
            value: null
            test: 40
            parentVariable: null
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 1
          exposed: '0'
          name: itemNumLimit
          pointer: '0'
          pointerVariable: itemNumLimit
        destinationNode: 53
        destinationPort: 636
        destinationPortObject:
          class_name: TestNodePort
          id: 636
          value: ''
          node: 53
          variable: null
          variableObject: null
          string: '1'
          defaultValue: '1'
          dynamic: '1'
          type: 0
          exposed: '1'
          name: canGoBack
          pointer: '0'
          pointerVariable: canGoBack
        returnFunction: itemNumLimit
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 238
        flowTest: 40
        sourceNode: 51
        sourcePort: 616
        sourcePortObject:
          class_name: TestNodePort
          id: 616
          value: null
          node: 51
          variable: 371
          variableObject:
            class_name: TestVariable
            id: 371
            name: itemsPerPage
            type: 0
            description: ''
            passableThroughUrl: '0'
            value: null
            test: 40
            parentVariable: null
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 1
          exposed: '0'
          name: itemsPerPage
          pointer: '0'
          pointerVariable: itemsPerPage
        destinationNode: 53
        destinationPort: 636
        destinationPortObject:
          class_name: TestNodePort
          id: 636
          value: ''
          node: 53
          variable: null
          variableObject: null
          string: '1'
          defaultValue: '1'
          dynamic: '1'
          type: 0
          exposed: '1'
          name: canGoBack
          pointer: '0'
          pointerVariable: canGoBack
        returnFunction: itemsPerPage
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 239
        flowTest: 40
        sourceNode: 51
        sourcePort: 611
        sourcePortObject:
          class_name: TestNodePort
          id: 611
          value: null
          node: 51
          variable: 366
          variableObject:
            class_name: TestVariable
            id: 366
            name: itemTemplate
            type: 0
            description: ''
            passableThroughUrl: '0'
            value: null
            test: 40
            parentVariable: null
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 1
          exposed: '0'
          name: itemTemplate
          pointer: '0'
          pointerVariable: itemTemplate
        destinationNode: 53
        destinationPort: 636
        destinationPortObject:
          class_name: TestNodePort
          id: 636
          value: ''
          node: 53
          variable: null
          variableObject: null
          string: '1'
          defaultValue: '1'
          dynamic: '1'
          type: 0
          exposed: '1'
          name: canGoBack
          pointer: '0'
          pointerVariable: canGoBack
        returnFunction: itemTemplate
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 240
        flowTest: 40
        sourceNode: 51
        sourcePort: 630
        sourcePortObject:
          class_name: TestNodePort
          id: 630
          value: null
          node: 51
          variable: 385
          variableObject:
            class_name: TestVariable
            id: 385
            name: itemTimeFullRequired
            type: 0
            description: ''
            passableThroughUrl: '0'
            value: null
            test: 40
            parentVariable: null
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 1
          exposed: '0'
          name: itemTimeFullRequired
          pointer: '0'
          pointerVariable: itemTimeFullRequired
        destinationNode: 53
        destinationPort: 636
        destinationPortObject:
          class_name: TestNodePort
          id: 636
          value: ''
          node: 53
          variable: null
          variableObject: null
          string: '1'
          defaultValue: '1'
          dynamic: '1'
          type: 0
          exposed: '1'
          name: canGoBack
          pointer: '0'
          pointerVariable: canGoBack
        returnFunction: itemTimeFullRequired
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 241
        flowTest: 40
        sourceNode: 51
        sourcePort: 624
        sourcePortObject:
          class_name: TestNodePort
          id: 624
          value: null
          node: 51
          variable: 379
          variableObject:
            class_name: TestVariable
            id: 379
            name: itemTimeLimit
            type: 0
            description: ''
            passableThroughUrl: '0'
            value: null
            test: 40
            parentVariable: null
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 1
          exposed: '0'
          name: itemTimeLimit
          pointer: '0'
          pointerVariable: itemTimeLimit
        destinationNode: 53
        destinationPort: 636
        destinationPortObject:
          class_name: TestNodePort
          id: 636
          value: ''
          node: 53
          variable: null
          variableObject: null
          string: '1'
          defaultValue: '1'
          dynamic: '1'
          type: 0
          exposed: '1'
          name: canGoBack
          pointer: '0'
          pointerVariable: canGoBack
        returnFunction: itemTimeLimit
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 242
        flowTest: 40
        sourceNode: 51
        sourcePort: 612
        sourcePortObject:
          class_name: TestNodePort
          id: 612
          value: null
          node: 51
          variable: 367
          variableObject:
            class_name: TestVariable
            id: 367
            name: order
            type: 0
            description: ''
            passableThroughUrl: '0'
            value: null
            test: 40
            parentVariable: null
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 1
          exposed: '0'
          name: order
          pointer: '0'
          pointerVariable: order
        destinationNode: 53
        destinationPort: 636
        destinationPortObject:
          class_name: TestNodePort
          id: 636
          value: ''
          node: 53
          variable: null
          variableObject: null
          string: '1'
          defaultValue: '1'
          dynamic: '1'
          type: 0
          exposed: '1'
          name: canGoBack
          pointer: '0'
          pointerVariable: canGoBack
        returnFunction: order
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 243
        flowTest: 40
        sourceNode: 51
        sourcePort: 621
        sourcePortObject:
          class_name: TestNodePort
          id: 621
          value: null
          node: 51
          variable: 376
          variableObject:
            class_name: TestVariable
            id: 376
            name: responseBank
            type: 0
            description: ''
            passableThroughUrl: '0'
            value: null
            test: 40
            parentVariable: null
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 1
          exposed: '0'
          name: responseBank
          pointer: '0'
          pointerVariable: responseBank
        destinationNode: 53
        destinationPort: 636
        destinationPortObject:
          class_name: TestNodePort
          id: 636
          value: ''
          node: 53
          variable: null
          variableObject: null
          string: '1'
          defaultValue: '1'
          dynamic: '1'
          type: 0
          exposed: '1'
          name: canGoBack
          pointer: '0'
          pointerVariable: canGoBack
        returnFunction: responseBank
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 244
        flowTest: 40
        sourceNode: 51
        sourcePort: 618
        sourcePortObject:
          class_name: TestNodePort
          id: 618
          value: null
          node: 51
          variable: 373
          variableObject:
            class_name: TestVariable
            id: 373
            name: responseOptions
            type: 0
            description: ''
            passableThroughUrl: '0'
            value: null
            test: 40
            parentVariable: null
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 1
          exposed: '0'
          name: responseOptions
          pointer: '0'
          pointerVariable: responseOptions
        destinationNode: 53
        destinationPort: 636
        destinationPortObject:
          class_name: TestNodePort
          id: 636
          value: ''
          node: 53
          variable: null
          variableObject: null
          string: '1'
          defaultValue: '1'
          dynamic: '1'
          type: 0
          exposed: '1'
          name: canGoBack
          pointer: '0'
          pointerVariable: canGoBack
        returnFunction: responseOptions
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 245
        flowTest: 40
        sourceNode: 51
        sourcePort: 619
        sourcePortObject:
          class_name: TestNodePort
          id: 619
          value: null
          node: 51
          variable: 374
          variableObject:
            class_name: TestVariable
            id: 374
            name: responseRequired
            type: 0
            description: ''
            passableThroughUrl: '0'
            value: null
            test: 40
            parentVariable: null
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 1
          exposed: '0'
          name: responseRequired
          pointer: '0'
          pointerVariable: responseRequired
        destinationNode: 53
        destinationPort: 636
        destinationPortObject:
          class_name: TestNodePort
          id: 636
          value: ''
          node: 53
          variable: null
          variableObject: null
          string: '1'
          defaultValue: '1'
          dynamic: '1'
          type: 0
          exposed: '1'
          name: canGoBack
          pointer: '0'
          pointerVariable: canGoBack
        returnFunction: responseRequired
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 246
        flowTest: 40
        sourceNode: 51
        sourcePort: 620
        sourcePortObject:
          class_name: TestNodePort
          id: 620
          value: null
          node: 51
          variable: 375
          variableObject:
            class_name: TestVariable
            id: 375
            name: responseRequiredAlert
            type: 0
            description: ''
            passableThroughUrl: '0'
            value: null
            test: 40
            parentVariable: null
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 1
          exposed: '0'
          name: responseRequiredAlert
          pointer: '0'
          pointerVariable: responseRequiredAlert
        destinationNode: 53
        destinationPort: 636
        destinationPortObject:
          class_name: TestNodePort
          id: 636
          value: ''
          node: 53
          variable: null
          variableObject: null
          string: '1'
          defaultValue: '1'
          dynamic: '1'
          type: 0
          exposed: '1'
          name: canGoBack
          pointer: '0'
          pointerVariable: canGoBack
        returnFunction: responseRequiredAlert
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 247
        flowTest: 40
        sourceNode: 51
        sourcePort: 622
        sourcePortObject:
          class_name: TestNodePort
          id: 622
          value: null
          node: 51
          variable: 377
          variableObject:
            class_name: TestVariable
            id: 377
            name: testTimeLimit
            type: 0
            description: ''
            passableThroughUrl: '0'
            value: null
            test: 40
            parentVariable: null
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 1
          exposed: '0'
          name: testTimeLimit
          pointer: '0'
          pointerVariable: testTimeLimit
        destinationNode: 53
        destinationPort: 636
        destinationPortObject:
          class_name: TestNodePort
          id: 636
          value: ''
          node: 53
          variable: null
          variableObject: null
          string: '1'
          defaultValue: '1'
          dynamic: '1'
          type: 0
          exposed: '1'
          name: canGoBack
          pointer: '0'
          pointerVariable: canGoBack
        returnFunction: testTimeLimit
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 248
        flowTest: 40
        sourceNode: 51
        sourcePort: 623
        sourcePortObject:
          class_name: TestNodePort
          id: 623
          value: '0'
          node: 51
          variable: 378
          variableObject:
            class_name: TestVariable
            id: 378
            name: testTimeLimitOffset
            type: 0
            description: ''
            passableThroughUrl: '0'
            value: '0'
            test: 40
            parentVariable: null
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 1
          exposed: '0'
          name: testTimeLimitOffset
          pointer: '0'
          pointerVariable: testTimeLimitOffset
        destinationNode: 53
        destinationPort: 636
        destinationPortObject:
          class_name: TestNodePort
          id: 636
          value: ''
          node: 53
          variable: null
          variableObject: null
          string: '1'
          defaultValue: '1'
          dynamic: '1'
          type: 0
          exposed: '1'
          name: canGoBack
          pointer: '0'
          pointerVariable: canGoBack
        returnFunction: testTimeLimitOffset
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 249
        flowTest: 40
        sourceNode: 56
        sourcePort: 666
        sourcePortObject:
          class_name: TestNodePort
          id: 666
          value: '1'
          node: 56
          variable: null
          variableObject: null
          string: '0'
          defaultValue: '0'
          dynamic: '1'
          type: 0
          exposed: '1'
          name: direction
          pointer: '1'
          pointerVariable: direction
        destinationNode: 57
        destinationPort: 679
        destinationPortObject:
          class_name: TestNodePort
          id: 679
          value: null
          node: 57
          variable: 355
          variableObject:
            class_name: TestVariable
            id: 355
            name: itemsSafe
            type: 0
            description: ''
            passableThroughUrl: '0'
            value: null
            test: 39
            parentVariable: null
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 0
          exposed: '1'
          name: itemsSafe
          pointer: '0'
          pointerVariable: itemsSafe
        returnFunction: nextItemsSafe
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 250
        flowTest: 40
        sourceNode: 56
        sourcePort: 666
        sourcePortObject:
          class_name: TestNodePort
          id: 666
          value: '1'
          node: 56
          variable: null
          variableObject: null
          string: '0'
          defaultValue: '0'
          dynamic: '1'
          type: 0
          exposed: '1'
          name: direction
          pointer: '1'
          pointerVariable: direction
        destinationNode: 57
        destinationPort: 680
        destinationPortObject:
          class_name: TestNodePort
          id: 680
          value: null
          node: 57
          variable: 356
          variableObject:
            class_name: TestVariable
            id: 356
            name: responsesSafe
            type: 0
            description: ''
            passableThroughUrl: '0'
            value: null
            test: 39
            parentVariable: null
          string: '1'
          defaultValue: '1'
          dynamic: '0'
          type: 0
          exposed: '1'
          name: responsesSafe
          pointer: '0'
          pointerVariable: responsesSafe
        returnFunction: pastResponsesSafe
        automatic: '0'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 251
        flowTest: 40
        sourceNode: 59
        sourcePort: 708
        sourcePortObject:
          class_name: TestNodePort
          id: 708
          value: ''
          node: 59
          variable: null
          variableObject: null
          string: '1'
          defaultValue: '0'
          dynamic: '1'
          type: 0
          exposed: '1'
          name: response
          pointer: '1'
          pointerVariable: response
        destinationNode: 60
        destinationPort: 722
        destinationPortObject:
          class_name: TestNodePort
          id: 722
          value: ''
          node: 60
          variable: null
          variableObject: null
          string: '1'
          defaultValue: '1'
          dynamic: '1'
          type: 2
          exposed: '1'
          name: continue
          pointer: '0'
          pointerVariable: continue
        returnFunction: direction
        automatic: '1'
        defaultReturnFunction: '1'
      -
        class_name: TestNodeConnection
        id: 252
        flowTest: 40
        sourceNode: 59
        sourcePort: 708
        sourcePortObject:
          class_name: TestNodePort
          id: 708
          value: ''
          node: 59
          variable: null
          variableObject: null
          string: '1'
          defaultValue: '0'
          dynamic: '1'
          type: 0
          exposed: '1'
          name: response
          pointer: '1'
          pointerVariable: response
        destinationNode: 60
        destinationPort: 722
        destinationPortObject:
          class_name: TestNodePort
          id: 722
          value: ''
          node: 60
          variable: null
          variableObject: null
          string: '1'
          defaultValue: '1'
          dynamic: '1'
          type: 2
          exposed: '1'
          name: continue
          pointer: '0'
          pointerVariable: continue
        returnFunction: itemsAdministered
        automatic: '1'
        defaultReturnFunction: '1'
    tags: ''
    groups: ''
    starterContent: true
    hash: 11f73b6d0003aee7322491a061922501f566f320
  -
    class_name: Test
    id: 41
    name: _questionnaireNextItemSelectorModule
    accessibility: 0
    archived: '0'
    visibility: 2
    type: 0
    code: |
      getSessionId = function(session) {
        id = 0
        if(!is.null(session) && is.list(session)) {
          id = session$id
        } else {
          id = paste0("i",concerto$session$id)
        }
        return(id)
      }
      
      getSafeItems = function(items) {
        items[,"reversedScore"] = NULL
        return(items)
      }
      
      getSafePastResponses = function(nextItems, session, responseBank) {
        responseBank = fromJSON(responseBank)
        if(is.null(responseBank$table)) {
          concerto.log("no response bank defined")
          return(NULL)
        }
      
        sql = "
      SELECT * FROM {{table}}
      WHERE 
      {{sessionIdColumn}}='{{sessionId}}' AND
      {{itemIdColumn}} IN ({{itemIds}})
      "
        #TODO: instead of itemIdColumn IN (itemIds) should use LIMIT
        response = concerto.table.query(sql, list(
          table=responseBank$table,
          sessionIdColumn=responseBank$columns$session_id,
          sessionId=getSessionId(session),
          itemIdColumn=responseBank$columns$item_id,
          itemIds=paste(nextItems[,"id"], collapse=",")
        ))
        if(dim(response)[1] > 0) {
          response[,"score"] = NULL
          return(response)
        }
        return(NULL)
      }
      
      concerto.log(prevPage, "previous page")
      concerto.log(direction, "direction")
      nextPage = as.numeric(prevPage) + as.numeric(direction)
      
      pageFirstItemIndex = (nextPage - 1) * as.numeric(settings$itemsPerPage) + 1
      pageLastItemIndex = min(nextPage * as.numeric(settings$itemsPerPage), dim(items)[1])
      
      nextItemsIndices = pageFirstItemIndex:pageLastItemIndex
      concerto.log(nextItemsIndices, "next item indices")
      nextItems = items[nextItemsIndices,]
      nextItemsSafe = getSafeItems(nextItems)
      pastResponsesSafe = getSafePastResponses(nextItems, session, settings$responseBank)
      
    description: ''
    variables:
      -
        class_name: TestVariable
        id: 388
        name: out
        type: 2
        description: ''
        passableThroughUrl: '0'
        value: '0'
        test: 41
        parentVariable: null
      -
        class_name: TestVariable
        id: 389
        name: direction
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: '1'
        test: 41
        parentVariable: null
      -
        class_name: TestVariable
        id: 390
        name: items
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 41
        parentVariable: null
      -
        class_name: TestVariable
        id: 391
        name: itemsAdministered
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 41
        parentVariable: null
      -
        class_name: TestVariable
        id: 392
        name: prevPage
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: '0'
        test: 41
        parentVariable: null
      -
        class_name: TestVariable
        id: 393
        name: session
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 41
        parentVariable: null
      -
        class_name: TestVariable
        id: 394
        name: settings
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 41
        parentVariable: null
      -
        class_name: TestVariable
        id: 395
        name: nextItems
        type: 1
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 41
        parentVariable: null
      -
        class_name: TestVariable
        id: 396
        name: nextItemsIndices
        type: 1
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 41
        parentVariable: null
      -
        class_name: TestVariable
        id: 397
        name: nextPage
        type: 1
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 41
        parentVariable: null
      -
        class_name: TestVariable
        id: 398
        name: nextItemsSafe
        type: 1
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 41
        parentVariable: null
      -
        class_name: TestVariable
        id: 399
        name: pastResponsesSafe
        type: 1
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 41
        parentVariable: null
    sourceWizard: null
    sourceWizardTest: null
    nodes: {  }
    nodesConnections: {  }
    tags: ''
    groups: ''
    starterContent: true
    hash: 8dfb1263967c4ebea398012e261da5e46d127c58
  -
    class_name: Test
    id: 42
    name: _questionnaireScoringModule
    accessibility: 0
    archived: '0'
    visibility: 2
    type: 0
    code: |
      getResponseScore = function(responseOptions, value, reversed) {
        minScore = NULL
        maxScore = NULL
        selectedScore = 0
        for(i in 1:length(responseOptions)) {
          option = responseOptions[[i]]
          score = as.numeric(option$score)
          if(!is.null(value) && value == option$value) { selectedScore = score }
          if(is.null(minScore) || score < minScore) { minScore = score }
          if(is.null(maxScore) || score > maxScore) { maxScore = score }
        }
        
        if(reversed) {
          return(maxScore - selectedScore + minScore)
        }
        return(selectedScore)
      }
      
      updateScores = function(currentItems, currentItemsIndices, scores, responseOptions, templateResponse) {
        for(i in 1:dim(currentItems)[1]) {
          item = currentItems[i,]
          index = currentItemsIndices[i]
          score = getResponseScore(
            responseOptions, 
            templateResponse[[paste0("r",item$id)]], 
            item$reversedScore == "1"
          )
          scores[index] = list(score)
        }
        return(scores)
      }
      
      updateTraitScores = function(scores, items) {
        traitScores = list()
        for(i in 1:length(scores)) {
          score = scores[[i]]
          if(is.null(score)) { score = 0 }
          item = as.list(items[i,])
          if(is.null(traitScores[[item$trait]])) {
            traitScores[[item$trait]] = 0
          }
          traitScores[[item$trait]] = traitScores[[item$trait]] + score
        }
        return(traitScores)
      }
      
      scores = updateScores(currentItems, currentItemsIndices, scores, fromJSON(settings$responseOptions), response)
      traitScores = updateTraitScores(scores, items)
      concerto.log(scores, "scores")
      concerto.log(traitScores, "traitScores")
      
    description: ''
    variables:
      -
        class_name: TestVariable
        id: 400
        name: out
        type: 2
        description: ''
        passableThroughUrl: '0'
        value: '0'
        test: 42
        parentVariable: null
      -
        class_name: TestVariable
        id: 401
        name: response
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 42
        parentVariable: null
      -
        class_name: TestVariable
        id: 402
        name: items
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 42
        parentVariable: null
      -
        class_name: TestVariable
        id: 403
        name: itemsAdministered
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 42
        parentVariable: null
      -
        class_name: TestVariable
        id: 404
        name: scores
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 42
        parentVariable: null
      -
        class_name: TestVariable
        id: 405
        name: currentItemsIndices
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 42
        parentVariable: null
      -
        class_name: TestVariable
        id: 406
        name: settings
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 42
        parentVariable: null
      -
        class_name: TestVariable
        id: 407
        name: currentItems
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 42
        parentVariable: null
      -
        class_name: TestVariable
        id: 408
        name: traitScores
        type: 1
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 42
        parentVariable: null
      -
        class_name: TestVariable
        id: 409
        name: traitScores
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 42
        parentVariable: null
      -
        class_name: TestVariable
        id: 410
        name: scores
        type: 1
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 42
        parentVariable: null
    sourceWizard: null
    sourceWizardTest: null
    nodes: {  }
    nodesConnections: {  }
    tags: ''
    groups: ''
    starterContent: true
    hash: f8ac86b0c61b15dacd04c0fafef995d3046e2508
  -
    class_name: Test
    id: 43
    name: _questionnaireResponseProcessingModule
    accessibility: 0
    archived: '0'
    visibility: 2
    type: 0
    code: |
      getSessionId = function(session) {
        id = 0
        if(!is.null(session) && is.list(session)) {
          id = session$id
        } else {
          id = paste0("i",concerto$session$id)
        }
        return(id)
      }
      
      saveResponses = function(responseBank, sessionId, templateResponse, currentItems, currentItemsIndices, scores) {
        responseBank = fromJSON(responseBank)
        if(is.null(responseBank$table)) {
          concerto.log("no response bank defined, skipping response saving")
          return(NULL)
        }
      
        sql = "SELECT * FROM {{table}} WHERE {{itemIdColumn}} IN ({{itemsIds}}) AND {{sessionIdColumn}}='{{sessionId}}'"
        responses = concerto.table.query(sql, params=list(
          table=responseBank$table,
          itemIdColumn=responseBank$columns$item_id,
          itemsIds=paste(currentItems[,"id"], collapse=","),
          sessionIdColumn=responseBank$columns$session_id,
          sessionId=sessionId
        ))
      
        queries = NULL
        for(i in 1:dim(currentItems)[1]) {
          found = F
          item = as.list(currentItems[i,])
          sql = ""
          if(dim(responses)[1] > 0) {
            for(j in 1:dim(responses)[1]) {
              response = as.list(responses[j,])
              if(response$item_id == item$id) {
                found = T
                sql = "
        UPDATE {{table}} 
        SET 
        {{itemIdColumn}}={{itemId}}, 
        {{responseColumn}}='{{response}}', 
        {{timeTakenColumn}}={{timeTaken}}, 
        {{sessionIdColumn}}='{{sessionId}}', 
        {{scoreColumn}}={{score}}, 
        {{traitColumn}}='{{trait}}'
        WHERE {{itemIdColumn}}={{itemId}} AND {{sessionIdColumn}}='{{sessionId}}'
        "
                break
              }
            }
          }
          if(!found) {
            sql = "
      INSERT INTO {{table}} ({{itemIdColumn}}, {{responseColumn}}, {{timeTakenColumn}}, {{sessionIdColumn}}, {{scoreColumn}}, {{traitColumn}})
      VALUES ({{itemId}}, '{{response}}', {{timeTaken}}, '{{sessionId}}', {{score}}, '{{trait}}')
      "
          }
          sql = concerto.table.insertParams(sql, list(
            table=responseBank$table,
            sessionIdColumn=responseBank$columns$session_id,
            sessionId=sessionId,
            itemIdColumn=responseBank$columns$item_id,
            itemId=item$id,
            responseColumn=responseBank$columns$response,
            response=templateResponse[[paste0("r",item$id)]],
            timeTakenColumn=responseBank$columns$timeTaken,
            timeTaken=response$timeTaken, #could use time difference
            scoreColumn=responseBank$columns$score,
            score=scores[currentItemsIndices[i]],
            traitColumn=responseBank$columns$trait,
            trait=item$trait
          ))
          queries = c(queries, sql)
        }
        for(i in 1:length(queries)) {
        	concerto.table.query(queries[i])  
        }
      }
      
      sessionId = getSessionId(session)
      saveResponses(settings$responseBank, sessionId, response, currentItems, currentItemsIndices, scores)
      
      direction = 1
      itemsAdministered = unique(c(itemsAdministered, currentItemsIndices)) 
      if(settings$canGoBack == "1" && page > 1 && response$buttonPressed == "back") {
        direction = -1
      }
      concerto.log(itemsAdministered, "itemsAdministered")
      concerto.log(direction, "direction")
      
    description: ''
    variables:
      -
        class_name: TestVariable
        id: 411
        name: out
        type: 2
        description: ''
        passableThroughUrl: '0'
        value: '0'
        test: 43
        parentVariable: null
      -
        class_name: TestVariable
        id: 412
        name: response
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 43
        parentVariable: null
      -
        class_name: TestVariable
        id: 413
        name: session
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 43
        parentVariable: null
      -
        class_name: TestVariable
        id: 414
        name: currentItems
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 43
        parentVariable: null
      -
        class_name: TestVariable
        id: 415
        name: scores
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 43
        parentVariable: null
      -
        class_name: TestVariable
        id: 416
        name: currenttemsIndices
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 43
        parentVariable: null
      -
        class_name: TestVariable
        id: 417
        name: itemsAdministered
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 43
        parentVariable: null
      -
        class_name: TestVariable
        id: 418
        name: settings
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 43
        parentVariable: null
      -
        class_name: TestVariable
        id: 419
        name: direction
        type: 1
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 43
        parentVariable: null
      -
        class_name: TestVariable
        id: 420
        name: itemsAdministered
        type: 1
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 43
        parentVariable: null
      -
        class_name: TestVariable
        id: 421
        name: page
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 43
        parentVariable: null
    sourceWizard: null
    sourceWizardTest: null
    nodes: {  }
    nodesConnections: {  }
    tags: ''
    groups: ''
    starterContent: true
    hash: 4c7aae3f5c4ef6ab26ff88a9a241ab2e4e360513
  -
    class_name: Test
    id: 44
    name: _questionnaireStatusCheckModule
    accessibility: 0
    archived: '0'
    visibility: 2
    type: 0
    code: |
      isOutOfTime = function(testTimeLimit, testTimeStarted, itemTimeLimit, itemTimeFullRequired) {
        startedAgo = as.numeric(Sys.time()) - testTimeStarted
        testTimeLeft = testTimeLimit - startedAgo
        if(testTimeLimit > 0) {
          if(testTimeLeft <= 0) { return(T) }
          if(testTimeLeft < itemTimeLimit && itemTimeFullRequired) { return(T) }
        }
        return(F)
      }
      
      getBranch = function(testTimeLimit, testTimeStarted, itemTimeLimit, itemTimeFullRequired, itemNumLimit, itemsNum, direction, itemsAdministered) {
        if(isOutOfTime(testTimeLimit, testTimeStarted, itemTimeLimit, itemTimeFullRequired)) {
          concerto.log("time out", "test status")
          return("stop")
        }
        
        if(itemNumLimit > 0 && length(itemsAdministered) >= itemNumLimit || length(itemsAdministered) >= itemsNum) {
          if(direction > 0) {
            concerto.log("maximum items reached", "test status")
            return("stop")
          }
        }
        
        concerto.log("continue", "test status")
        return("continue")
      }
      
      .branch = getBranch(
        as.numeric(settings$testTimeLimit), 
        testTimeStarted, 
        as.numeric(settings$itemTimeLimit), 
        settings$itemTimeFullRequired == "1", 
        as.numeric(settings$itemNumLimit), 
        dim(items)[1],
        direction,
        itemsAdministered
      )
      
    description: ''
    variables:
      -
        class_name: TestVariable
        id: 422
        name: continue
        type: 2
        description: ''
        passableThroughUrl: '0'
        value: '0'
        test: 44
        parentVariable: null
      -
        class_name: TestVariable
        id: 423
        name: testTimeLeft
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 44
        parentVariable: null
      -
        class_name: TestVariable
        id: 424
        name: testTimeStarted
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 44
        parentVariable: null
      -
        class_name: TestVariable
        id: 425
        name: itemsAdministered
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 44
        parentVariable: null
      -
        class_name: TestVariable
        id: 426
        name: direction
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 44
        parentVariable: null
      -
        class_name: TestVariable
        id: 427
        name: settings
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 44
        parentVariable: null
      -
        class_name: TestVariable
        id: 428
        name: items
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 44
        parentVariable: null
      -
        class_name: TestVariable
        id: 429
        name: .branch
        type: 1
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 44
        parentVariable: null
      -
        class_name: TestVariable
        id: 430
        name: stop
        type: 2
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 44
        parentVariable: null
    sourceWizard: null
    sourceWizardTest: null
    nodes: {  }
    nodesConnections: {  }
    tags: ''
    groups: ''
    starterContent: true
    hash: b78b748333b2ed020d3fe103a9601c40bc812895
  -
    class_name: TestWizard
    id: 11
    name: questionnaire
    description: ''
    accessibility: 0
    archived: '0'
    steps:
      -
        class_name: TestWizardStep
        id: 18
        title: Items
        description: ''
        orderNum: 0
        colsNum: 0
        wizard: 11
        params:
          -
            class_name: TestWizardParam
            id: 53
            label: 'Can go back?'
            description: 'Can go back to previous page of questionnaire?'
            hideCondition: ''
            type: 4
            passableThroughUrl: '0'
            value: '0'
            testVariable: 372
            name: canGoBack
            wizardStep: 18
            stepTitle: Items
            order: 5
            wizard: 11
            definition:
              placeholder: 0
              defvalue: '0'
          -
            class_name: TestWizardParam
            id: 54
            label: Items
            description: 'Items collection to use in questionnaire'
            hideCondition: 'values.itemBankType != "direct"'
            type: 10
            passableThroughUrl: '0'
            value: '[{"id":"1","question":"I like cats","orderIndex":"1","trait":"pets","reversedScore":"0"},{"id":"2","question":"I like dogs","orderIndex":"2","trait":"pets","reversedScore":"0"},{"id":"3","question":"I like horsies","orderIndex":"3","trait":"pets","reversedScore":"0"}]'
            testVariable: 368
            name: itemBankItems
            wizardStep: 18
            stepTitle: Items
            order: 1
            wizard: 11
            definition:
              element:
                type: 9
                definition:
                  placeholder: 0
                  fields:
                    -
                      type: 0
                      name: id
                      label: Id
                      definition:
                        placeholder: 0
                    -
                      type: 2
                      name: question
                      label: Question
                      definition:
                        placeholder: 0
                    -
                      type: 0
                      name: orderIndex
                      label: 'Order index'
                      definition:
                        placeholder: 0
                    -
                      type: 0
                      name: trait
                      label: Trait
                      definition:
                        placeholder: 0
                    -
                      type: 4
                      name: reversedScore
                      label: 'Reversed score'
                      definition:
                        placeholder: 0
          -
            class_name: TestWizardParam
            id: 55
            label: Table
            description: 'Column mapping for item bank data table'
            hideCondition: 'values.itemBankType != "table"'
            type: 12
            passableThroughUrl: '0'
            value: '[]'
            testVariable: 369
            name: itemBankTable
            wizardStep: 18
            stepTitle: Items
            order: 1
            wizard: 11
            definition:
              placeholder: 0
              cols:
                -
                  name: id
                  label: Id
                  tooltip: ''
                -
                  name: question
                  label: Question
                  tooltip: ''
                -
                  name: orderIndex
                  label: 'Order index'
                  tooltip: ''
                -
                  name: trait
                  label: Trait
                  tooltip: ''
                -
                  name: reversedScore
                  label: 'Reversed score'
                  tooltip: ''
          -
            class_name: TestWizardParam
            id: 56
            label: Type
            description: |
              <p>Type of item bank to use. One of the following:</p>
              
              <ul>
              	<li><strong>Direct</strong>&nbsp;- use item bank defined in wizard</li>
              	<li><strong>Table&nbsp;</strong>- use item bank from data table</li>
              </ul>
              
            hideCondition: ''
            type: 3
            passableThroughUrl: '0'
            value: direct
            testVariable: 370
            name: itemBankType
            wizardStep: 18
            stepTitle: Items
            order: 0
            wizard: 11
            definition:
              placeholder: 0
              options:
                -
                  value: direct
                  label: Direct
                -
                  value: table
                  label: Table
              defvalue: direct
          -
            class_name: TestWizardParam
            id: 57
            label: 'Items per page'
            description: 'Number of items to show on single questionnaire page'
            hideCondition: ''
            type: 0
            passableThroughUrl: '0'
            value: '10'
            testVariable: 371
            name: itemsPerPage
            wizardStep: 18
            stepTitle: Items
            order: 3
            wizard: 11
            definition:
              placeholder: 0
              defvalue: '10'
          -
            class_name: TestWizardParam
            id: 58
            label: 'Item template'
            description: 'Questionnaire page layout template'
            hideCondition: ''
            type: 5
            passableThroughUrl: '0'
            value: questionnaire
            testVariable: 366
            name: itemTemplate
            wizardStep: 18
            stepTitle: Items
            order: 4
            wizard: 11
            definition:
              placeholder: 0
              defvalue: questionnaire
          -
            class_name: TestWizardParam
            id: 59
            label: Order
            description: |
              <p>Order of questions. One of the following:</p>
              
              <ul>
              	<li><strong>Manual</strong>&nbsp;- will use sorted&nbsp;<strong>orderIndex&nbsp;</strong>value for order</li>
              	<li><strong>Random</strong>&nbsp;- order will be randomised</li>
              </ul>
              
            hideCondition: ''
            type: 3
            passableThroughUrl: '0'
            value: random
            testVariable: 367
            name: order
            wizardStep: 18
            stepTitle: Items
            order: 2
            wizard: 11
            definition:
              placeholder: 0
              options:
                -
                  value: manual
                  label: Manual
                -
                  value: random
                  label: Random
              defvalue: random
      -
        class_name: TestWizardStep
        id: 19
        title: 'Stopping Rules'
        description: ''
        orderNum: 0
        colsNum: 0
        wizard: 11
        params:
          -
            class_name: TestWizardParam
            id: 60
            label: 'Item Number Limit'
            description: 'Items number limit.&nbsp;<strong>0&nbsp;</strong>for no limit.'
            hideCondition: ''
            type: 0
            passableThroughUrl: '0'
            value: '0'
            testVariable: 384
            name: itemNumLimit
            wizardStep: 19
            stepTitle: 'Stopping Rules'
            order: 0
            wizard: 11
            definition:
              placeholder: 0
              defvalue: '0'
          -
            class_name: TestWizardParam
            id: 61
            label: 'Sufficient Item Time Required'
            description: 'If checked and currenty test time left is lesser than item time limit, then test will be finished.'
            hideCondition: 'values.testTimeLimit == 0 || values.itemTimeLimit == 0'
            type: 4
            passableThroughUrl: '0'
            value: '0'
            testVariable: 385
            name: itemTimeFullRequired
            wizardStep: 19
            stepTitle: 'Stopping Rules'
            order: 0
            wizard: 11
            definition:
              placeholder: 0
              defvalue: '0'
          -
            class_name: TestWizardParam
            id: 62
            label: 'Item time limit'
            description: 'Item time limit in seconds.&nbsp;<strong>0</strong>&nbsp;for no limit.'
            hideCondition: ''
            type: 0
            passableThroughUrl: '0'
            value: '0'
            testVariable: 379
            name: itemTimeLimit
            wizardStep: 19
            stepTitle: 'Stopping Rules'
            order: 0
            wizard: 11
            definition:
              placeholder: 0
              defvalue: '0'
          -
            class_name: TestWizardParam
            id: 63
            label: 'Test time limit'
            description: 'Total test time limit in seconds.&nbsp;<strong>0&nbsp;</strong>for no limit.'
            hideCondition: ''
            type: 0
            passableThroughUrl: '0'
            value: '0'
            testVariable: 377
            name: testTimeLimit
            wizardStep: 19
            stepTitle: 'Stopping Rules'
            order: 0
            wizard: 11
            definition:
              placeholder: 0
              defvalue: '0'
      -
        class_name: TestWizardStep
        id: 20
        title: Responses
        description: ''
        orderNum: 0
        colsNum: 0
        wizard: 11
        params:
          -
            class_name: TestWizardParam
            id: 64
            label: 'Response bank'
            description: 'Response table column map. Choose none for no response storing.'
            hideCondition: ''
            type: 12
            passableThroughUrl: '0'
            value: '{"table":"questionnaireResponses","columns":{"id":"id","item_id":"item_id","response":"response","timeTaken":"timeTaken","session_id":"session_id","score":"score","trait":"trait"}}'
            testVariable: 376
            name: responseBank
            wizardStep: 20
            stepTitle: Responses
            order: 0
            wizard: 11
            definition:
              placeholder: 0
              cols:
                -
                  name: id
                  label: Id
                  tooltip: ''
                -
                  name: item_id
                  label: 'Item id'
                  tooltip: ''
                -
                  name: response
                  label: Response
                  tooltip: ''
                -
                  name: timeTaken
                  label: 'Time taken'
                  tooltip: ''
                -
                  name: session_id
                  label: 'Session id'
                  tooltip: ''
                -
                  name: score
                  label: Score
                  tooltip: ''
                -
                  name: trait
                  label: Trait
                  tooltip: ''
          -
            class_name: TestWizardParam
            id: 65
            label: 'Response options'
            description: 'Possible response options for questionnaire items.'
            hideCondition: ''
            type: 10
            passableThroughUrl: '0'
            value: '[{"value":"yes","label":"Yes","score":"1"},{"value":"no","label":"No","score":"0"}]'
            testVariable: 373
            name: responseOptions
            wizardStep: 20
            stepTitle: Responses
            order: 0
            wizard: 11
            definition:
              element:
                type: 9
                definition:
                  placeholder: 0
                  fields:
                    -
                      type: 0
                      name: value
                      label: Value
                      definition:
                        placeholder: 0
                    -
                      type: 0
                      name: label
                      label: Label
                      definition:
                        placeholder: 0
                    -
                      type: 0
                      name: score
                      label: Score
                      definition:
                        placeholder: 0
          -
            class_name: TestWizardParam
            id: 66
            label: 'Response required'
            description: 'Check if answers to all items are required.'
            hideCondition: ''
            type: 4
            passableThroughUrl: '0'
            value: '0'
            testVariable: 374
            name: responseRequired
            wizardStep: 20
            stepTitle: Responses
            order: 0
            wizard: 11
            definition:
              placeholder: 0
              defvalue: '0'
          -
            class_name: TestWizardParam
            id: 67
            label: 'Response required alert'
            description: 'Alert text when there is missing answer.'
            hideCondition: 'values.responseRequired == "0"'
            type: 0
            passableThroughUrl: '0'
            value: 'Response required!'
            testVariable: 375
            name: responseRequiredAlert
            wizardStep: 20
            stepTitle: Responses
            order: 0
            wizard: 11
            definition:
              placeholder: 0
              defvalue: 'Response required!'
      -
        class_name: TestWizardStep
        id: 21
        title: Modules
        description: 'Test modules. Each module is a separate test that can use specific input variables and must return specific return variables.'
        orderNum: 0
        colsNum: 0
        wizard: 11
        params:
          -
            class_name: TestWizardParam
            id: 68
            label: 'Next item selector module'
            description: |
              <p>Next item selector module. Must return:</p>
              
              <ul>
              	<li><strong>nextItems</strong>&nbsp;- data frame, next items collection</li>
              	<li><strong>nextItemsIndices</strong>&nbsp;- vector, contains indices of next items</li>
              	<li><strong>nextItemsSafe</strong>&nbsp;- data frame, next items collection with sensitive data removed</li>
              	<li><strong>nextPage</strong>&nbsp;- numerical, index of next page</li>
              	<li><strong>pastResponsesSafe</strong>&nbsp;- data frame, past response for each of next item with sensitive data removed</li>
              </ul>
              
            hideCondition: ''
            type: 8
            passableThroughUrl: '0'
            value: _questionnaireNextItemSelectorModule
            testVariable: 380
            name: nextItemSelectorModule
            wizardStep: 21
            stepTitle: Modules
            order: 0
            wizard: 11
            definition:
              placeholder: 0
              defvalue: _questionnaireNextItemSelectorModule
          -
            class_name: TestWizardParam
            id: 69
            label: 'Response processor module'
            description: |
              <p>Response processor module. Must return:</p>
              
              <ul>
              	<li><strong>direction</strong>&nbsp;- numerical, positive if we should go to next page, negative if we should go to previous page</li>
              	<li><strong>itemsAdministered</strong>&nbsp;- vector, contains indices of already shown items</li>
              </ul>
              
            hideCondition: ''
            type: 8
            passableThroughUrl: '0'
            value: _questionnaireResponseProcessingModule
            testVariable: 383
            name: responseProcessorModule
            wizardStep: 21
            stepTitle: Modules
            order: 0
            wizard: 11
            definition:
              placeholder: 0
              defvalue: _questionnaireResponseProcessingModule
          -
            class_name: TestWizardParam
            id: 70
            label: 'Scoring module'
            description: |
              <p>Scoring module. Must return:</p>
              
              <ul>
              	<li><strong>scores</strong>&nbsp;- vector, contains scores for each of administered item</li>
              	<li><strong>traitScores</strong>&nbsp;- list, where key is trait name and value is sum of scores for given trait</li>
              </ul>
              
            hideCondition: ''
            type: 8
            passableThroughUrl: '0'
            value: _questionnaireScoringModule
            testVariable: 381
            name: scoringModule
            wizardStep: 21
            stepTitle: Modules
            order: 0
            wizard: 11
            definition:
              placeholder: 0
              defvalue: _questionnaireScoringModule
          -
            class_name: TestWizardParam
            id: 71
            label: 'Status check module'
            description: |
              <p>Status check module. Must return:</p>
              
              <ul>
              	<li><strong>.branch</strong>&nbsp;- string, should return&nbsp;<strong>continue&nbsp;</strong>if test should continue, or&nbsp;<strong>stop</strong>&nbsp;if test should be stopped</li>
              </ul>
              
            hideCondition: ''
            type: 8
            passableThroughUrl: '0'
            value: _questionnaireStatusCheckModule
            testVariable: 386
            name: statusCheckModule
            wizardStep: 21
            stepTitle: Modules
            order: 0
            wizard: 11
            definition:
              placeholder: 0
              defvalue: _questionnaireStatusCheckModule
    test: 40
    groups: ''
    starterContent: true
    hash: 47868b80eae38b4a6593e768c5c13ff0665b7572
  -
    class_name: Test
    id: 45
    name: questionnaire
    accessibility: 0
    archived: '0'
    visibility: 2
    type: 1
    code: null
    description: Questionnaire
    variables:
      -
        class_name: TestVariable
        id: 431
        name: out
        type: 2
        description: ''
        passableThroughUrl: '0'
        value: '0'
        test: 45
        parentVariable: 365
      -
        class_name: TestVariable
        id: 432
        name: itemTemplate
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: questionnaire
        test: 45
        parentVariable: 366
      -
        class_name: TestVariable
        id: 433
        name: order
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: random
        test: 45
        parentVariable: 367
      -
        class_name: TestVariable
        id: 434
        name: itemBankItems
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: '[{"id":"1","question":"I like cats","orderIndex":"1","trait":"pets","reversedScore":"0"},{"id":"2","question":"I like dogs","orderIndex":"2","trait":"pets","reversedScore":"0"},{"id":"3","question":"I like horsies","orderIndex":"3","trait":"pets","reversedScore":"0"}]'
        test: 45
        parentVariable: 368
      -
        class_name: TestVariable
        id: 435
        name: itemBankTable
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: '[]'
        test: 45
        parentVariable: 369
      -
        class_name: TestVariable
        id: 436
        name: itemBankType
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: direct
        test: 45
        parentVariable: 370
      -
        class_name: TestVariable
        id: 437
        name: itemsPerPage
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: '10'
        test: 45
        parentVariable: 371
      -
        class_name: TestVariable
        id: 438
        name: canGoBack
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: '0'
        test: 45
        parentVariable: 372
      -
        class_name: TestVariable
        id: 439
        name: responseOptions
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: '[{"value":"yes","label":"Yes","score":"1"},{"value":"no","label":"No","score":"0"}]'
        test: 45
        parentVariable: 373
      -
        class_name: TestVariable
        id: 440
        name: responseRequired
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: '0'
        test: 45
        parentVariable: 374
      -
        class_name: TestVariable
        id: 441
        name: responseRequiredAlert
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: 'Response required!'
        test: 45
        parentVariable: 375
      -
        class_name: TestVariable
        id: 442
        name: responseBank
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: '{"table":"questionnaireResponses","columns":{"id":"id","item_id":"item_id","response":"response","timeTaken":"timeTaken","session_id":"session_id","score":"score","trait":"trait"}}'
        test: 45
        parentVariable: 376
      -
        class_name: TestVariable
        id: 443
        name: testTimeLimit
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: '0'
        test: 45
        parentVariable: 377
      -
        class_name: TestVariable
        id: 444
        name: testTimeLimitOffset
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: '0'
        test: 45
        parentVariable: 378
      -
        class_name: TestVariable
        id: 445
        name: itemTimeLimit
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: '0'
        test: 45
        parentVariable: 379
      -
        class_name: TestVariable
        id: 446
        name: nextItemSelectorModule
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: _questionnaireNextItemSelectorModule
        test: 45
        parentVariable: 380
      -
        class_name: TestVariable
        id: 447
        name: scoringModule
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: _questionnaireScoringModule
        test: 45
        parentVariable: 381
      -
        class_name: TestVariable
        id: 448
        name: session
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 45
        parentVariable: 382
      -
        class_name: TestVariable
        id: 449
        name: responseProcessorModule
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: _questionnaireResponseProcessingModule
        test: 45
        parentVariable: 383
      -
        class_name: TestVariable
        id: 450
        name: itemNumLimit
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: '0'
        test: 45
        parentVariable: 384
      -
        class_name: TestVariable
        id: 451
        name: itemTimeFullRequired
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: '0'
        test: 45
        parentVariable: 385
      -
        class_name: TestVariable
        id: 452
        name: statusCheckModule
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: _questionnaireStatusCheckModule
        test: 45
        parentVariable: 386
      -
        class_name: TestVariable
        id: 453
        name: scores
        type: 1
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 45
        parentVariable: 387
    sourceWizard: 11
    sourceWizardTest: 40
    nodes: {  }
    nodesConnections: {  }
    tags: _concerto_core
    groups: ''
    starterContent: true
    hash: 5f49f14c299202a432400780a066dae80f6a11d6
  -
    class_name: Test
    id: 46
    name: _dataManipulation
    accessibility: 0
    archived: '0'
    visibility: 2
    type: 0
    code: |
      getWhereClause = function(where, type) {
        if((is.na(where) || where == "") && type != "update") {
          elems = NULL
          for(name in .dynamicInputs) {
            elem = concerto.table.insertParams("{{name}}='{{value}}'", list(
              name=name,
              value=get(name)
            ))
            elems = c(elems, elem)
          }
          if(length(elems) > 0) {
            elemsJoined = paste(elems, collapse=" AND ")
            return(paste0("WHERE ", elemsJoined))
          }
        } else if(length(where) == 1) {
          id = suppressWarnings(as.numeric(where))
          if(is.character(where) && is.na(id)) {
            params = list()
            for(name in .dynamicInputs) {
              params[[name]] = get(name)
            }
            elemsJoined = concerto.table.insertParams(where, params)
            return(paste0("WHERE ", elemsJoined))
          } else if(is.numeric(id)) {
            return(paste0("WHERE id=",where))
          }
        }
        return(NULL)
      }
          
      getSetClause = function(set, type) {
        if(is.na(set) || set == "") {
          if(type == "insert") {
            cols = NULL
            vals = NULL
            for(name in .dynamicInputs) {
              cols = c(cols, name)
              val = concerto.table.insertParams("'{{value}}'", list(
                value=get(name)
              ))
              vals = c(vals, val)
            }
            if(length(cols) > 0) {
              colsJoined = paste(cols, collapse=", ")
              valsJoined = paste(vals, collapse=", ")
              return(paste0("(",colsJoined,") VALUES (",valsJoined,")"))
            }
          } else {
            elems = NULL
            for(name in .dynamicInputs) {
              elem = concerto.table.insertParams("{{name}}='{{value}}'", list(
                name=name,
                value=get(name)
              ))
              elems = c(elems, elem)
            }
            if(length(elems) > 0) {
              elemsJoined = paste(elems, collapse=", ")
              return(paste0("SET ", elemsJoined))
            }
          }
        } else if(length(set) == 1 && is.character(set)) {
          params = list()
          for(name in .dynamicInputs) {
            params[[name]] = get(name)
          }
          elemsJoined = concerto.table.insertParams(set, params)
          return(paste0("SET ", elemsJoined))
        }
        return(NULL)
      }
        
      getCustomQuery = function(queryString) {
        params = list()
        for(name in .dynamicInputs) {
          params[[name]] = get(name)
        }
        queryString = concerto.table.insertParams(queryString, params)
        return(queryString)
      }
      
      result = NULL
      if(queryType == "select") {
        queryString = "SELECT * FROM {{table}}"
        whereString = getWhereClause(whereClause, queryType)
        if(!is.null(whereString)) {
          queryString = paste0(queryString, " ", whereString)
        }
        result = concerto.table.query(queryString, params=list(
          table=table
        ))
      } else if(queryType == "insert") {
        queryString = "INSERT INTO {{table}}"
        setString = getSetClause(setClause, queryType)
        if(!is.null(setString)) {
          queryString = paste0(queryString, " ", setString)
        }
        result = concerto.table.query(queryString, params=list(
          table=table
        ))
      } else if(queryType == "update") {
        queryString = "UPDATE {{table}}"
        setString = getSetClause(setClause, queryType)
        if(!is.null(setString)) {
          queryString = paste0(queryString, " ", setString)
        } else {
          stop("No 'set' clause for UPDATE query")
        }
        whereString = getWhereClause(whereClause, queryType)
        if(!is.null(whereString)) {
          queryString = paste0(queryString, " ", whereString)
        }
        result = concerto.table.query(queryString, params=list(
          table=table
        ))
      } else if(queryType == "delete") {
        queryString = "DELETE FROM {{table}}"
        whereString = getWhereClause(whereClause, queryType)
        if(!is.null(whereString)) {
          queryString = paste0(queryString, " ", whereString)
        }
        result = concerto.table.query(queryString, params=list(
          table=table
        ))
      } else {
        queryString = getCustomQuery(queryString)
        result = concerto.table.query(queryString)
      }
      
    description: ''
    variables:
      -
        class_name: TestVariable
        id: 454
        name: out
        type: 2
        description: ''
        passableThroughUrl: '0'
        value: '0'
        test: 46
        parentVariable: null
      -
        class_name: TestVariable
        id: 455
        name: queryType
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 46
        parentVariable: null
      -
        class_name: TestVariable
        id: 456
        name: queryString
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 46
        parentVariable: null
      -
        class_name: TestVariable
        id: 457
        name: result
        type: 1
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 46
        parentVariable: null
      -
        class_name: TestVariable
        id: 458
        name: table
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 46
        parentVariable: null
      -
        class_name: TestVariable
        id: 459
        name: whereClause
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 46
        parentVariable: null
      -
        class_name: TestVariable
        id: 460
        name: setClause
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 46
        parentVariable: null
    sourceWizard: null
    sourceWizardTest: null
    nodes: {  }
    nodesConnections: {  }
    tags: ''
    groups: ''
    starterContent: true
    hash: 0cd757ea70fa0f0eb6bfd582a7f8757251f85d16
  -
    class_name: TestWizard
    id: 12
    name: dataManipulation
    description: ''
    accessibility: 0
    archived: '0'
    steps:
      -
        class_name: TestWizardStep
        id: 22
        title: Data
        description: ''
        orderNum: 0
        colsNum: 0
        wizard: 12
        params:
          -
            class_name: TestWizardParam
            id: 72
            label: 'Query type'
            description: |
              <p>Type of query. One of following:</p>
              
              <ul>
              	<li><strong>Select&nbsp;</strong>- reads data from table</li>
              	<li><strong>Update&nbsp;</strong>- updates existing data in table</li>
              	<li><strong>Insert&nbsp;</strong>- inserts new data to table</li>
              	<li><strong>Delete&nbsp;</strong>- deletes existing data from table</li>
              	<li><strong>Custom&nbsp;</strong>- custom query</li>
              </ul>
              
            hideCondition: ''
            type: 3
            passableThroughUrl: '0'
            value: select
            testVariable: 455
            name: queryType
            wizardStep: 22
            stepTitle: Data
            order: 0
            wizard: 12
            definition:
              placeholder: 0
              options:
                -
                  value: select
                  label: Select
                  order: 0
                -
                  value: update
                  label: Update
                  order: 1
                -
                  value: delete
                  label: Delete
                  order: 3
                -
                  value: custom
                  label: Custom
                  order: 4
                -
                  value: insert
                  label: Insert
                  order: 2
              defvalue: select
          -
            class_name: TestWizardParam
            id: 73
            label: Table
            description: 'Table to run query on.'
            hideCondition: 'values.queryType == "custom"'
            type: 6
            passableThroughUrl: '0'
            value: ''
            testVariable: 458
            name: table
            wizardStep: 22
            stepTitle: Data
            order: 0
            wizard: 12
            definition:
              placeholder: 0
              defvalue: ''
          -
            class_name: TestWizardParam
            id: 74
            label: Query
            description: 'Custom query. Can use insert directives that will be replaced with dynamic input values.'
            hideCondition: 'values.queryType != "custom"'
            type: 1
            passableThroughUrl: '0'
            value: ''
            testVariable: 456
            name: queryString
            wizardStep: 22
            stepTitle: Data
            order: 0
            wizard: 12
            definition:
              placeholder: 0
              defvalue: ''
          -
            class_name: TestWizardParam
            id: 75
            label: 'Set clause'
            description: |
              <ul>
              	<li>if is string (<strong>Insert</strong>,&nbsp;<strong>Update</strong> only), will be used literally and replace any insert directives with dynamic inputs from node, e.g.:<br />
              	<strong>column1={{column1Value}} AND column2={{column2Value}}</strong></li>
              	<li>if empty (<strong>Insert</strong>&nbsp;only), will build clause from dynamic inputs, using &#39;<b>=</b>&#39;<b>&nbsp;</b>and &#39;<b>AND</b>&#39;<b>&nbsp;</b>operators, e.g. for dynamic inputs:&nbsp;<strong>col1=2</strong>,&nbsp;<strong>col2=3:</strong><br />
              	<strong>(col1,col2) VALUES (2,3)</strong></li>
              	<li>if empty (<b>Update&nbsp;</b>only), will build set clause from dynamic inputs, using &#39;<b>=</b>&#39;<b>&nbsp;</b>and &#39;<b>AND</b>&#39;<b>&nbsp;</b>operators, e.g. for dynamic inputs:&nbsp;<strong>col1=2</strong>,&nbsp;<strong>col2=3:</strong><br />
              	<strong>col1=2, col2=3</strong></li>
              </ul>
              
            hideCondition: 'values.queryType == "select"'
            type: 1
            passableThroughUrl: '0'
            value: ''
            testVariable: 460
            name: setClause
            wizardStep: 22
            stepTitle: Data
            order: 0
            wizard: 12
            definition:
              placeholder: 0
              defvalue: ''
          -
            class_name: TestWizardParam
            id: 76
            label: 'Where clause'
            description: |
              <ul>
              	<li>if is string (<strong>Select</strong>,&nbsp;<strong>Delete</strong> only), will be used literally and replace any insert directives with dynamic inputs from node, e.g.:<br />
              	<strong>column1={{column1Value}} AND column2={{column2Value}}</strong></li>
              	<li>if numeric, e.g.:<br />
              	<strong>23</strong><br />
              	will be converted to:<br />
              	<strong>id=23</strong></li>
              	<li>if empty, will build where clause from dynamic inputs, using &#39;<b>=</b>&#39;<b>&nbsp;</b>and &#39;<b>AND</b>&#39;<b>&nbsp;</b>operators, e.g. for dyanmic inputs:&nbsp;<strong>col1=2</strong>,&nbsp;<strong>col2=3:</strong><br />
              	<strong>col1=2 AND col2=3</strong></li>
              </ul>
              
            hideCondition: 'values.queryType == "insert"'
            type: 1
            passableThroughUrl: '0'
            value: ''
            testVariable: 459
            name: whereClause
            wizardStep: 22
            stepTitle: Data
            order: 0
            wizard: 12
            definition:
              placeholder: 0
              defvalue: ''
    test: 46
    groups: ''
    starterContent: true
    hash: a1bfc20f4861f9fae563a12f1ac558512a143433
  -
    class_name: Test
    id: 47
    name: dataManipulation
    accessibility: 0
    archived: '0'
    visibility: 2
    type: 1
    code: null
    description: 'Data tables manipulation.'
    variables:
      -
        class_name: TestVariable
        id: 461
        name: out
        type: 2
        description: ''
        passableThroughUrl: '0'
        value: '0'
        test: 47
        parentVariable: 454
      -
        class_name: TestVariable
        id: 462
        name: queryType
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: select
        test: 47
        parentVariable: 455
      -
        class_name: TestVariable
        id: 463
        name: queryString
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 47
        parentVariable: 456
      -
        class_name: TestVariable
        id: 464
        name: result
        type: 1
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 47
        parentVariable: 457
      -
        class_name: TestVariable
        id: 465
        name: table
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 47
        parentVariable: 458
      -
        class_name: TestVariable
        id: 466
        name: whereClause
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 47
        parentVariable: 459
      -
        class_name: TestVariable
        id: 467
        name: setClause
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 47
        parentVariable: 460
    sourceWizard: 12
    sourceWizardTest: 46
    nodes: {  }
    nodesConnections: {  }
    tags: _concerto_core
    groups: ''
    starterContent: true
    hash: b1d4bcb5913e2052e0ad72aee6072574a08d6cbe
  -
    class_name: Test
    id: 48
    name: _translationDictionary
    accessibility: 0
    archived: '0'
    visibility: 2
    type: 0
    code: |
      selectedLanguage = language
      if(is.na(language)) { selectedLanguage = defaultLanguage }
      
      concerto.log(selectedLanguage, "selected language")
      
      dictionaryTable = fromJSON(dictionaryTable)
      if(type == "multiTable") {
        suffixStartIndex = regexpr("_[^_]*$", dictionaryTable$table)
        if(suffixStartIndex==-1) {
          stop(paste0("dictionary mapping table ", dictionaryTable$table, " doesn't contain proper language suffix"))
        }
        
        dictionaryTable$table = paste0(substr(dictionaryTable$table, 1, suffixStartIndex), selectedLanguage)
      }
      
      entries = concerto.table.query("SELECT {{keyColumn}} AS entryKey, {{langColumn}} AS trans FROM {{table}}", params=list(
        keyColumn = dictionaryTable$columns$entryKey,
        langColumn = selectedLanguage,
        table = dictionaryTable$table
      ))
      
      c.set("dictionary", entries, global=T)
      
    description: ''
    variables:
      -
        class_name: TestVariable
        id: 468
        name: out
        type: 2
        description: ''
        passableThroughUrl: '0'
        value: '0'
        test: 48
        parentVariable: null
      -
        class_name: TestVariable
        id: 469
        name: language
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 48
        parentVariable: null
      -
        class_name: TestVariable
        id: 470
        name: defaultLanguage
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 48
        parentVariable: null
      -
        class_name: TestVariable
        id: 471
        name: dictionaryTable
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 48
        parentVariable: null
      -
        class_name: TestVariable
        id: 472
        name: type
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 48
        parentVariable: null
    sourceWizard: null
    sourceWizardTest: null
    nodes: {  }
    nodesConnections: {  }
    tags: ''
    groups: ''
    starterContent: true
    hash: 4e5873378330e1db9345c6e47e587a5e94e45715
  -
    class_name: TestWizard
    id: 13
    name: translationDictionary
    description: ''
    accessibility: 0
    archived: '0'
    steps:
      -
        class_name: TestWizardStep
        id: 23
        title: Dictionary
        description: ''
        orderNum: 0
        colsNum: 0
        wizard: 13
        params:
          -
            class_name: TestWizardParam
            id: 77
            label: 'Dictionary table'
            description: 'Dictionary table mapping. For&nbsp;<strong>Language per table</strong>&nbsp;type, this can be mapping to any of the language tables.'
            hideCondition: ''
            type: 12
            passableThroughUrl: '0'
            value: '{"table":"translationDictionary","columns":{"id":"id","entryKey":"entryKey"}}'
            testVariable: 471
            name: dictionaryTable
            wizardStep: 23
            stepTitle: Dictionary
            order: 1
            wizard: 13
            definition:
              placeholder: 0
              cols:
                -
                  name: id
                  label: Id
                  tooltip: ''
                -
                  name: entryKey
                  label: 'Entry key'
                  tooltip: ''
          -
            class_name: TestWizardParam
            id: 78
            label: 'Default language'
            description: 'Default language to use when no language is specified'
            hideCondition: ''
            type: 0
            passableThroughUrl: '0'
            value: en
            testVariable: 470
            name: defaultLanguage
            wizardStep: 23
            stepTitle: Dictionary
            order: 2
            wizard: 13
            definition:
              placeholder: 0
              defvalue: en
          -
            class_name: TestWizardParam
            id: 79
            label: Type
            description: |
              <p>Dictionary table type. One of the following:</p>
              
              <ul>
              	<li><strong>Language per table&nbsp;</strong>- each language in its own table (tables must end with underscore followed by language code, e.g.:&nbsp;<strong>dictionary_en</strong>&nbsp;for english), translation column name need to be same as language code (e.g.&nbsp;<strong>en</strong>&nbsp;for english)</li>
              	<li><strong>Language per column</strong>&nbsp;- single table, each language in its own column (column for each supported language, translation columns needs to be same as language code (e.g.&nbsp;<strong>en&nbsp;</strong>for english)</li>
              </ul>
              
            hideCondition: ''
            type: 3
            passableThroughUrl: '0'
            value: multiColumn
            testVariable: 472
            name: type
            wizardStep: 23
            stepTitle: Dictionary
            order: 0
            wizard: 13
            definition:
              placeholder: 0
              options:
                -
                  value: multiTable
                  label: 'Language per table'
                  order: 1
                -
                  value: multiColumn
                  label: 'Language per column'
                  order: 0
              defvalue: multiColumn
    test: 48
    groups: ''
    starterContent: true
    hash: dbf5061fbaa01ec66e70f4eaeb6b0632603f944c
  -
    class_name: Test
    id: 49
    name: translationDictionary
    accessibility: 0
    archived: '0'
    visibility: 2
    type: 1
    code: null
    description: 'Sets translation dictionary rules.'
    variables:
      -
        class_name: TestVariable
        id: 473
        name: out
        type: 2
        description: ''
        passableThroughUrl: '0'
        value: '0'
        test: 49
        parentVariable: 468
      -
        class_name: TestVariable
        id: 474
        name: language
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: null
        test: 49
        parentVariable: 469
      -
        class_name: TestVariable
        id: 475
        name: defaultLanguage
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: en
        test: 49
        parentVariable: 470
      -
        class_name: TestVariable
        id: 476
        name: dictionaryTable
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: '{"table":"translationDictionary","columns":{"id":"id","entryKey":"entryKey"}}'
        test: 49
        parentVariable: 471
      -
        class_name: TestVariable
        id: 477
        name: type
        type: 0
        description: ''
        passableThroughUrl: '0'
        value: multiColumn
        test: 49
        parentVariable: 472
    sourceWizard: 13
    sourceWizardTest: 48
    nodes: {  }
    nodesConnections: {  }
    tags: _concerto_core
    groups: ''
    starterContent: true
    hash: b6269263d88939b531153057cb2e8d9df2a310a7
